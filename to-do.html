Skip to content
You said:
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily To-Do List</title>
  <style>
    body {
      background-color: #f8f2eb;
      font-family: "Helvetica Neue", sans-serif;
      color: black;
      margin: 0;
      padding: 2rem;
    }

    h1 {
      margin-bottom: 0.5rem;
    }

    #countdown {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }

    #time-back {
      font-size: 1rem;
      margin-bottom: 1rem;
      color: #666;
    }

    #input-section {
      margin-bottom: 1rem;
    }

    input[type="text"], input[type="time"] {
      padding: 0.5rem;
      width: 300px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-bottom: 0.5rem;
      display: block;
    }

    input[type="time"] {
      width: 150px;
    }

    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      margin-left: 0.5rem;
      cursor: pointer;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .todo-text {
      margin-left: 0.5rem;
      flex-grow: 1;
    }

    .deadline-info {
      margin-left: 0.5rem;
      font-size: 0.9rem;
      color: #666;
    }

    .done .todo-text {
      color: gray;
      text-decoration: line-through;
    }

    input[type="checkbox"] {
      appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid black;
      border-radius: 2px;
      display: inline-block;
      position: relative;
      cursor: pointer;
    }

    input[type="checkbox"]:checked::after {
      content: "âœ”";
      position: absolute;
      top: -2px;
      left: 2px;
      font-size: 14px;
      color: black;
    }
  </style>
</head>
<body>

  <h1>Today's To-Do List</h1>
  <div id="countdown">Time left today: --:--:--</div>
  <div id="time-back">Time you get back: 0 minutes</div>

  <div id="input-section">
    <input type="text" id="todo-input" placeholder="Add a new task..." />
    <input type="time" id="deadline-input" placeholder="Deadline" />
    <button onclick="addTodo()">Add</button>
  </div>

  <ul id="todo-list"></ul>

  <script>
    // Global variables
    let totalTimeBack = parseInt(localStorage.getItem('timeBack')) || 0;
    let deadlineTimers = new Map();

    // Countdown timer
    function updateCountdown() {
      const now = new Date();
      const midnight = new Date();
      midnight.setHours(24, 0, 0, 0); // Next midnight

      const diff = midnight - now;

      const hours = String(Math.floor(diff / (1000 * 60 * 60))).padStart(2, '0');
      const minutes = String(Math.floor((diff / (1000 * 60)) % 60)).padStart(2, '0');
      const seconds = String(Math.floor((diff / 1000) % 60)).padStart(2, '0');

      document.getElementById('countdown').textContent = `Time left today: ${hours}:${minutes}:${seconds}`;
      document.getElementById('time-back').textContent = `Time you get back: ${totalTimeBack} minutes`;

      if (diff <= 0) {
        clearListAtMidnight();
      }
    }

    function clearListAtMidnight() {
      document.getElementById('todo-list').innerHTML = '';
      localStorage.removeItem('todos');
      localStorage.removeItem('timeBack');
      totalTimeBack = 0;
      deadlineTimers.clear();
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();

    // To-Do list logic
    const todoList = document.getElementById('todo-list');
    const todoInput = document.getElementById('todo-input');
    const deadlineInput = document.getElementById('deadline-input');

    function loadTodos() {
      const saved = JSON.parse(localStorage.getItem('todos')) || [];
      saved.forEach(item => {
        createTodoElement(item.text, item.deadline, item.done, item.timeBack || 0);
      });
    }

    function saveTodos() {
      const items = Array.from(todoList.children).map(li => ({
        text: li.querySelector('.todo-text').textContent,
        deadline: li.dataset.deadline,
        done: li.classList.contains('done'),
        timeBack: parseInt(li.dataset.timeBack) || 0
      }));
      localStorage.setItem('todos', JSON.stringify(items));
      localStorage.setItem('timeBack', totalTimeBack.toString());
    }

    function addTodo() {
      const text = todoInput.value.trim();
      const deadline = deadlineInput.value;
      
      if (text !== '' && deadline !== '') {
        createTodoElement(text, deadline, false, 0);
        todoInput.value = '';
        deadlineInput.value = '';
        saveTodos();
      }
    }

    function updateTaskDeadlineCountdown(li, deadline) {
      const deadlineTime = new Date();
      const [hours, minutes] = deadline.split(':');
      deadlineTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);

      const now = new Date();
      const diff = deadlineTime - now;

      if (diff > 0) {
        const hoursLeft = Math.floor(diff / (1000 * 60 * 60));
        const minutesLeft = Math.floor((diff / (1000 * 60)) % 60);
        
        let timeLeftText = '';
        if (hoursLeft > 0) {
          timeLeftText = `${hoursLeft}h ${minutesLeft}m`;
        } else {
          timeLeftText = `${minutesLeft}m`;
        }
        
        li.querySelector('.deadline-info').textContent = `Deadline: ${deadline} (${timeLeftText} left)`;
        li.dataset.timeLeft = Math.floor(diff / (1000 * 60));
      } else {
        li.querySelector('.deadline-info').textContent = `Deadline: ${deadline} (OVERDUE)`;
        li.dataset.timeLeft = 0;
      }
    }

    function createTodoElement(text, deadline, done, timeBack) {
      const li = document.createElement('li');
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';

      const span = document.createElement('span');
      span.className = 'todo-text';
      span.textContent = text;

      const deadlineSpan = document.createElement('span');
      deadlineSpan.className = 'deadline-info';

      li.dataset.deadline = deadline;
      li.dataset.timeBack = timeBack;

      checkbox.addEventListener('change', () => {
        if (checkbox.checked) {
          // Calculate time saved
          const timeLeft = parseInt(li.dataset.timeLeft) || 0;
          if (timeLeft > 0) {
            totalTimeBack += timeLeft;
            li.dataset.timeBack = (parseInt(li.dataset.timeBack) + timeLeft).toString();
            document.getElementById('time-back').textContent = `Time you get back: ${totalTimeBack} minutes`;
            localStorage.setItem('timeBack', totalTimeBack.toString());
          }
          
          li.classList.add('done');
          todoList.appendChild(li); // Move to bottom
          saveTodos();
        }
      });

      li.appendChild(checkbox);
      li.appendChild(span);
      li.appendChild(deadlineSpan);

      // Update deadline countdown
      updateTaskDeadlineCountdown(li, deadline);

      // Set up timer for this task's deadline countdown
      const timer = setInterval(() => {
        if (!li.classList.contains('done')) {
          updateTaskDeadlineCountdown(li, deadline);
        }
      }, 60000); // Update every minute
      
      deadlineTimers.set(li, timer);

      if (done) {
        li.classList.add('done');
        checkbox.checked = true;
        todoList.appendChild(li);
        clearInterval(timer);
      } else {
        todoList.insertBefore(li, todoList.firstChild);
      }
    }

    loadTodos();
  </script>

</body>
</html>
