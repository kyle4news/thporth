<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="google-site-verification" content="VoA7EfXHDZCU-Em6FGijJneXQVJfMKXUFZNcGNew_i8" />
	  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script> <!-- ✅ NEW -->
<script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore-compat.js"></script>
    <!-- Luxon for date/time handling - MOVED HERE to ensure it loads before dependent scripts -->
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.x/build/global/luxon.min.js"></script>

	 <style>
      /* RESTORED: Original CSS for news tabs */
      .news-tab[data-tab="fantasy"],
      .news-tab[data-tab="transactions"],
      #fantasy-feed,
      #transactions-feed {
        display: none !important;
      }
    </style>
	  

    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WWK5WV7N');</script>
<!-- End Google Tag Manager -->

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K8SHPNFM9Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K8SHPNFM9Y');
</script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Get the latest sports news, social buzz, and live scores for NFL, NBA, MLB, and more — all in one place.">
    <meta name="robots" content="index, follow" />
    <title>THPORTH | Breaking news. Highlights. Social. Videos.</title>
    
    <!-- Canonical URL to prevent mobile version indexing -->
    <link rel="canonical" href="https://thporth.com" />
    
    <!-- Immediate redirect for mobile subdomain (executes before page loads) -->
    <script>
      if (window.location.hostname === 'm.thporth.com') {
        window.location.replace('https://thporth.com' + window.location.pathname + window.location.search + window.location.hash);
      }
    </script>
    
    <!-- Additional meta tags to help with mobile/desktop versioning -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
   
<link rel="icon" type="image/png" href="https://github.com/kyle4news/thporth/blob/main/THPORTH%20logo.png?raw=true" />
  
    <link rel="canonical" href="https://www.thporth.com/" />
    
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.thporth.com/" />
<meta property="og:title" content="THPORTH | All the latest sports news" />
<meta property="og:description" content="Get the latest sports news, social buzz, and live scores for NFL, NBA, MLB, and more — all in one place." />
    <meta property="og:image" content="https://github.com/kyle4news/thporth/blob/main/THPORTH%20logo.png?raw=true" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content="https://www.thporth.com/" />
<meta name="twitter:title" content="THPORTH | All the latest sports news" />
<meta name="twitter:description" content="Get the latest sports news, social buzz, and live scores for NFL, NBA, MLB, and more — all in one place." />
    <meta name="twitter:image" content="https://github.com/kyle4news/thporth/blob/main/THPORTH%20logo.png?raw=true" />
   <style>
  /* ────────────────────────────────────────────────────────── */
  /* Global Resets                        */
  /* ────────────────────────────────────────────────────────── */
  html,
  body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    background-color: #151515;
    color: white;
  }

  ul,
  li {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .spacer-line {
    height: 10px;
  }

/* --- CSS FROM testing_testing-3.html (Live Games Viewer) --- */
.league-section {
    margin-top: 1px !important;
    margin-bottom: 1px !important;
    border-top: 1px solid transparent;
    border-bottom: 1px solid transparent;
}
.league-title { /* Renamed from .league-header to .league-title for clarity within this context */
    font-size: 14px;
    margin-bottom: 1rem;
    border-bottom: 2px solid #555;
    padding-bottom: 0.3rem;
    padding-left: 10px;
    background-color: #555; /* Inherited from .league-header in index-7 */
    color: #e0e0e0; /* Inherited from .league-header in index-7 */
    padding: 0.75rem 1rem; /* Inherited from .league-header in index-7 */
    font-weight: 600; /* Inherited from .league-header in index-7 */
    border-top: 1px solid #555; /* Inherited from .league-header in index-7 */
    /* border-radius: 0.5rem; /* Inherited from .league-header in index-7 */
    /* box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* Inherited from .league-header in index-7 */
    margin-top: 32px; /* Inherited from .league-header in index-7 */
}
.league-title:first-child {
    margin-top: 10px;
}
.game-table {
    border-collapse: separate; /* Allow spacing between table rows for block effect */
    border-spacing: 0 4px; /* 4px between all rows */
    width: 100%;
    table-layout: fixed;
    max-width: 100%;
}
.game-table td {
    padding: 4px 10px; /* Default cell padding */
    vertical-align: top;
    font-size: 12px; /* Set a single font size for all cells */
}
.game-table td:nth-child(2) { /* Second column (teams) */
    width: 100% !important;
    min-width: 250px !important;
    max-width: none !important;
}
@media (max-width: 768px) {
    .game-table td:nth-child(2) { /* Responsive teams column */
        min-width: 200px !important;
    }
}
@media (max-width: 480px) {
    .game-table td:nth-child(2) { /* Mobile teams column */
        min-width: 150px !important;
    }
}
.game-table td:nth-child(3) { /* Override default padding for score column */
    padding-left: 4px;
    padding-right: 0;
}
.game-table td:nth-child(1) { /* First column (time/status) */
    width: 75px;
    min-width: 75px;
    text-align: left;
    padding-right: 5px;
}
.game-table td:nth-child(3) { /* Third column (score) */
    width: 30px !important;
    min-width: 30px !important;
    text-align: right !important;
    padding-right: 0 !important;
    padding-left: 4px !important;
	font-size: 12px !important;
}
.game-table td:nth-child(4) { /* Fourth column (empty spacer) */
    width: 5px !important;
    min-width: 5px !important;
    padding: 0 !important;
    border: none !important;
	font-size: 10px !important;
}
.game-row {
    /* Remove block styling - back to simple rows */
}
.game-separator {
    /* Add line break after each game */
}
.game-separator::after {
    content: "\A";
    white-space: pre;
    display: block;
    height: 30px;
}
.error {
    color: red;
}

        /* Videos Column Styling */
        .videos-column {
            border-left: none;
        }

.videos-tab {
    flex: 1;
    background-color: #2a2a2a;
    border: none;
    color: #5f5f5f;
    padding: 6px 8px;
    font-size: 9px;
    font-weight: 500;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.videos-tab:hover {
    background-color: #2a2a2a;
    color: #5f5f5f;
}

.videos-tab.active {
    background-color: #3c3c3c;
    color: white;
}

        .videos-content {
            flex: 1;
            padding: 0;
            margin: 0;
            overflow-y: auto;
            background-color: #000000;
        }

.video-item {
    border-bottom: 1px solid #333333;
    padding: 8px 0;
    margin-bottom: 8px;
}

.video-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.video-title {
    color: #CCCCCC;
    font-weight: 500;
    margin-bottom: 4px;
    font-size: 11px;
    line-height: 1.4;
}

.video-title a {
    color: #00FF00;
    text-decoration: none;
}

.video-title a:hover {
    text-decoration: underline;
}

.video-meta {
    color: #888888;
    font-size: 9px;
}

/* --- END CSS FROM testing_testing-3.html --- */


/* --- EXISTING CSS FROM index-7.html (merged and adjusted) --- */
/* Loading indicator styling */
.loading-indicator {
    display: none; /* flex */
    flex-direction: column; /* flex-col */
    align-items: center; /* items-center */
    justify-content: center; /* justify-center */
    padding: 2.5rem; /* p-10 */
    color: #9ca3af; /* text-gray-400 */
}
.loading-spinner {
    display: none;
    animation: spin 1s linear infinite; /* animate-spin */
    height: 2.5rem; /* h-10 */
    width: 2.5rem; /* w-10 */
    color: #60a5fa; /* text-blue-400 */
    margin-bottom: 0.75rem; /* mb-3 */
}
.loading-text {
   display: none;
    font-size: 1.125rem; /* text-lg */
    line-height: 1.75rem; /* leading-7 */
}
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Error message styling */
.error-message {
     display: none;
    background-color: #991b1b; /* bg-red-800 */
    border-width: 1px; /* border */
    border-color: #dc2626; /* border-red-600 */
    color: #fecaca; /* text-red-200 */
    padding: 0.75rem 1rem; /* py-3 px-4 */
    border-radius: 0.25rem; /* rounded */
    position: relative; /* relative */
    margin-top: 1rem; /* mt-4 */
}
.error-message strong {
    font-weight: 700; /* font-bold */
}
.error-message span {
    display: block; /* block */
}
@media (min-width: 640px) { /* sm:inline */
    .error-message span {
        display: inline;
    }
}

/* League section styling (from index-7, for general structure) */
/* .league-section { margin-bottom: 16px; } */ /* Overridden by testing_testing-3.html's 3rem */
/* .league-section:last-child { margin-bottom: 16px; } */ /* Overridden */

/* League header styling (from index-7, now applies to .league-title) */
/* .league-header { ... } */ /* Renamed to .league-title and merged */


/* Game entries wrapper (from index-7, for overall structure) */
.game-entry-wrapper {
    border-radius: 0.5rem; /* rounded-lg */
    border-width: 1px; /* border */
    border-color: #374151; /* border-gray-700 */
    overflow: hidden; /* overflow-hidden */
    background-color: #1f1f1f; /* bg-gray-800 */
    padding-bottom: 32px;
    margin-bottom: 32px;
}
.game-entry-wrapper .game-entry:not(:last-child) {
    border-bottom: 1px solid #374151; /* divide-y divide-gray-700 */
    margin-bottom: 0;
}

/* Individual game entry styling (from index-7, now applies to .game-entry) */
.game-entry {
    display: flex; /* flex */
    align-items: center; /* items-center */
    padding-top: 0; /* py-2 */
    padding-bottom: 0; /* py-2 */
    padding-left: 3px; /* px-4 */
    margin-left: 0;
    padding-right: 3px; /* px-4 */
}
.game-entry:hover {
    background-color: #374151; /* hover:bg-gray-700 */
}

/* Status cell styling */
.status-finished {
    color: #22c55e; /* text-green-500 */
}
.status-live {
    color: #ef4444; /* text-red-500 */
}
.status-scheduled {
    color: #a0a0a0; /* text-gray-400 */
}

/* Time cell styling (from index-7, now applies to .time-cell) */
/* Time cell styling */
.time-cell {
    /* font-weight: 500; /* Medium weight */
    text-align: left !important; /* Ensure left alignment */
    width: 50px; /* Fixed width for time */
    flex-shrink: 0;
    padding-right: 0 !important;
    padding-left: 0 !important;
    margin-left: 0 !important;
    color: #e0e0e0 !important; /* Changed to !important to ensure override */
    font-size: 10px !important; /* Changed font size and added !important */
}

/* Game details (teams) styling */
.game-details {
    flex-grow: 1; /* flex-grow */
    padding-left: 3px; /* padding-left */
    padding-right: 3px; /* padding-right */
    color: #e5e7eb !important; /* Changed to !important to ensure override */
}
.team-name {
    font-size: 11px !important; /* Changed font size and added !important */
    line-height: 1.2; /* Adjusted line height for tighter spacing */
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 0 !important;
}

/* Game scores styling */
.game-scores {
    text-align: right; /* text-right */
    padding-right: 1rem; /* padding-right */
    width: 20px; /* fixed width */
    flex-shrink: 0; /* flex-shrink-0 */
    color: #e5e7eb !important; /* Changed to !important to ensure override */
}
.score-value {
    font-size: 11px !important; /* Changed font size and added !important */
    line-height: 1.2; /* Adjusted line height for tighter spacing */
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
}
/* Game channel styling (from index-7, now applies to .game-channel) */
.game-channel {
    text-align: right; /* text-right */
    width: 100px; /* fixed width */
    flex-shrink: 0; /* flex-shrink-0 */
    padding-right: 1rem; /* padding-right */
    color: #9ca3af; /* text-gray-400 */
    font-size: 0.875rem; /* text-sm */
    line-height: 1.25rem; /* leading-5 */
}

/* Custom scrollbar for overflow-y-auto */
.column.tv-listings::-webkit-scrollbar,
.games-content::-webkit-scrollbar,
.game-entry-wrapper::-webkit-scrollbar,
#league-specific-column::-webkit-scrollbar { /* Added new column */
    width: 8px;
}
.column.tv-listings::-webkit-scrollbar-thumb,
.games-content::-webkit-scrollbar-thumb,
.game-entry-wrapper::-webkit-scrollbar-thumb,
#league-specific-column::-webkit-scrollbar-thumb { /* Added new column */
    background-color: #4a4a4a; /* Darker gray */
    border-radius: 4px;
}
.column.tv-listings::-webkit-scrollbar-track,
.games-content::-webkit-scrollbar-track,
.game-entry-wrapper::-webkit-scrollbar-track,
#league-specific-column::-webkit-scrollbar-track { /* Added new column */
    background-color: #2a2a2a; /* Even darker gray */
}

/* ────── Today's MLB Games widget (scoped) ────── */
/* This section from index-7.html is now largely superseded by the new structure,
   but keeping it here for reference and in case any specific overrides are still desired.
   The new structure uses .league-section, .game-table, .game-row, .team-cell, etc. */
#tv-listings-today #todayGamesWrapper .game-row {
  display: grid;
  /* col1=time • col2=teams • col3=scores • col4=channel */
  grid-template-columns: 55px 1fr 15px 30px;
  align-items: center;
  padding: 0;
  /* border-bottom: 1px solid #333; */ /* Removed as per new game-separator logic */
  font-size: 13px;
  margin-bottom: 0;
}

#tv-listings-today #todayGamesWrapper .time {
  color: #ccc;
}
#tv-listings-today #todayGamesWrapper .time.live {
  color: #DC143C;
  font-weight: bold;
}

#tv-listings-today #todayGamesWrapper .teams {
  display: flex;
  flex-direction: column;
  padding-left: 8px;
}

#tv-listings-today #todayGamesWrapper .team-name {
  line-height: 17px;
}

#tv-listings-today #todayGamesWrapper .score-cell {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-variant-numeric: tabular-nums;
}

#tv-listings-today #todayGamesWrapper .channel-cell {
  text-align: right;
  font-size: 12px;
}
#tv-listings-today #todayGamesWrapper .channel-cell a {
  color: #99f;
  text-decoration: none;
}
#tv-listings-today #todayGamesWrapper .channel-cell a:hover {
  text-decoration: underline;
}

/* ──────────────────────────────────────────────── */
  /* ────────────────────────────────────────────────────────── */
  /* Top Bars                          */
  /* ────────────────────────────────────────────────────────── */
  #topBar {
    width: 100%;
    height: 18px;
    background-color: #3c3c3c;
  }

  #topDivider {
    width: 100%;
    height: 2px;
    background-color: #151515;
  }

  #topBar,
  #topDivider {
    width: 100%;
    margin: 0 auto;
    box-sizing: border-box;
  }
  
  #topBar {
    width: 100%;
  }

  /* ────────────────────────────────────────────────────────── */
  /* Layout Containers                    */
  /* ────────────────────────────────────────────────────────── */
  .container {
    display: flex;
    width: 1421px;
    height: calc(100% - 20px); /* account for topBar + topDivider */
    justify-content: center;
    margin: 0 auto;
    box-sizing: border-box;
  }

  .column {
    overflow: auto;
    padding: 0;
  }

  .column.tv-listings {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
  }

  .column.tv-listings * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .main-menu {
    background-color: #151515;
    color: white;
    flex: 0 0 165px;
    font-size: 11px;
    padding: 0;
  }

  .divider {
    flex: 0 0 4px;
    background-color: #151515;
  }

  .news {
    flex: 0 0 370px; /* reduced to accommodate 110px Standings panel */
    background-color: #fafaf9;
    padding: 0;
  }

  .social {
    flex: 0 0 350px;
    background-color: #fff;
  }

  /* ────────────────────────────────────────────────────────── */
  /* Main‐Menu Styling                     */
  /* ────────────────────────────────────────────────────────── */
  #menuTopBox {
    width: 165px;
    height: 18px;
    background-color: #3c3c3c;
    padding-left: 2px;
    display: flex;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 2;
  }

  #menuTopBox img {
    height: 18px;
    display: block;
  }

  #menuSearch {
    width: 165px;
    height: 18px;
    box-sizing: border-box;
    margin-top: 2px;
    margin-bottom: 2px;
    background-color: #000;
    color: #fff;
    border: 1px solid #3c3c3c;
    padding: 2px 5px 2px 25px;
    font-size: 10px;
    background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjYzRjNGM0IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49ImJldmVsIj48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ij48L2NpcmNsZT48bGluZSB4MT0iMjEiIHkxPSIyMSIgeDI9IjE2LjY1IiB5Mj0iMTYuNjUiPjwvbGluZT48L3N2Zz4=')
      no-repeat 5px center;
    background-size: 14px 14px;
  }

  #menuFilters {
    width: 165px;
    display: flex;
    margin-bottom: 10px;
  }

  .menu-filter {
    flex: 1;
    text-align: center;
    padding: 1px;
    border: 1px solid #444;
    background-color: #222;
    font-size: 9px;
    font-family: Helvetica, Arial, sans-serif;
    cursor: pointer;
    color: #fff;
  }

  .menu-filter.active {
    background-color: #3c3c3c;
    color: white;
    border-color: #3c3c3c;
  }

  .selected {
    font-weight: bold;
    background-color: #3c3c3c;
    color: white;
  }

  #menuList ul {
    padding-left: 0;
    padding-top: 10;
    margin: 0;
  }

  #menuList li {
    cursor: pointer;
    padding: 5px 0;
    vertical-align: middle;
    line-height: 1;
  }

  .nested {
    margin-left: 10px;
    margin-top: 0;
    padding-top: 8px;
  }

  .nested li {
    margin-left: 10px;
  }

  #newsSubMenu {
    position: sticky;
    top: 0;
    width: 100%;
    z-index: 10;
    background-color: #3f3f3f;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 10px;
    height: 18px;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 0;
    margin: 0;
  }

  .news-menu-item {
    line-height: 18px;
    height: 18px;
    padding: 0 8px; /* Adjust horizontal only */
    display: flex;
    align-items: center;
    box-sizing: border-box;
  }

  .news-menu-item.active {
    background-color: black;
    color: white;
  }

  /* ────────────────────────────────────────────────────────── */
  /* RSS‐Feed Links                       */
  /* ────────────────────────────────────────────────────────── */
  .news .rss-feed {
    padding-left: 10px;
  }

  .rss-feed a {
    font-family: Helvetica, Arial, sans-serif;
    font-size: 11px;
    color: black;
    text-decoration: none;
  }

  .rss-feed a.clicked {
    color: lightgray;
  }

  .rss-feed ul li {
    border-bottom: 1px solid #C9C8C7;
    padding: 5px 0;
  }

  .rss-feed ul li:last-child {
    border-bottom: none;
  }

  .rss-feed h4 {
    color: black;
  }

  .rss-feed {
    background-color: #fafaf9;
  }

  .content-section {
    display: none;
    padding: 0;
  }

  .expand-button {
    background-color: #3c3c3c;
    color: white;
    border: none;
    padding: 6px 10px;
    font-size: 11px;
    cursor: pointer;
    margin-top: 8px;
  }

  .expand-button:hover {
    background-color: #555;
  }

  /* ────────────────────────────────────────────────────────── */
  /* News Column (Split Scroll Areas)          */
  /* ────────────────────────────────────────────────────────── */

 /* ────────────────────────────────────────────────────────── */
/* News Column (Split Scroll Areas) - REVISED AND CORRECTED    */
/* ────────────────────────────────────────────────────────── */

/* 1) Main News Column. Remove all padding to make content flush with edges. */
.column.news {
    flex: 0 0 370px !important;
    background-color: #fafaf9 !important;
    padding: 0 !important;
}

/* 2) Main container for both headlines and breaking news sections.
      It needs to fill the full available height of the news column minus the header. */
.news-main-container {
    display: flex !important;
    flex-direction: column !important;
    height: calc(100% - 18px) !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* 3) The Headlines section container. It's now a horizontal tab layout. */
.headlines-section {
    flex: 0 0 60% !important;
    display: flex !important;
    flex-direction: column !important;
    border-bottom: 2px solid #d4d4d4 !important;
    min-height: auto !important;
    max-height: 60% !important;
    overflow: hidden !important;
    padding: 0 !important;
    margin: 0 !important;
}

	   .nwsl-headlines-section,
.ligue1-headlines-section,
.ligamx-headlines-section,
.uefaeuropaleague-headlines-section,
.uefaconferenceleague-headlines-section,
.livgolf-headlines-section,
.indycar-headlines-section,
.lpgatour-headlines-section,
.trackandfield-headlines-section {
    flex: 1 1 auto !important;
    max-height: 100% !important;
}

.nwsl-headlines-section .news-feed-content,
.ligue1-headlines-section .news-feed-content,
.ligamx-headlines-section .news-feed-content,
.uefaeuropaleague-headlines-section .news-feed-content,
.uefaconferenceleague-headlines-section .news-feed-content,
.livgolf-headlines-section .news-feed-content,
.indycar-headlines-section .news-feed-content,
.lpgatour-headlines-section .news-feed-content,
.trackandfield-headlines-section .news-feed-content {
    flex: 1 1 auto !important;
    overflow-y: auto !important;
    padding: 0 !important;
    background: #fafaf9 !important;
    font-size: 11px !important;
    color: #111 !important;
    margin: 0 !important;
}

.nwsl-headlines-section .news-feed-content ul,
.ligue1-headlines-section .news-feed-content ul,
.ligamx-headlines-section .news-feed-content ul,
.uefaeuropaleague-headlines-section .news-feed-content ul,
.uefaconferenceleague-headlines-section .news-feed-content ul,
.livgolf-headlines-section .news-feed-content ul,
.indycar-headlines-section .news-feed-content ul,
.lpgatour-headlines-section .news-feed-content ul,
.trackandfield-headlines-section .news-feed-content ul {
    list-style: none !important;
    padding: 0 10px !important;
    margin: 0 !important;
}

.nwsl-headlines-section .news-feed-content ul li,
.ligue1-headlines-section .news-feed-content ul li,
.ligamx-headlines-section .news-feed-content ul li,
.uefaeuropaleague-headlines-section .news-feed-content ul li,
.uefaconferenceleague-headlines-section .news-feed-content ul li,
.livgolf-headlines-section .news-feed-content ul li,
.indycar-headlines-section .news-feed-content ul li,
.lpgatour-headlines-section .news-feed-content ul li,
.trackandfield-headlines-section .news-feed-content ul li {
    padding: 5px 0 !important;
    border-bottom: 1px solid #C9C8C7;
    margin: 0 !important;
}

#nwsltabs-NWSL .headlines-tab,
#ligue1tabs-Ligue1 .headlines-tab,
#ligamxtabs-LigaMX .headlines-tab,
#uefaeuropaleaguetabs-UEFAEuropaLeague .headlines-tab,
#uefaconferenceleaguetabs-UEFAConferenceLeague .headlines-tab,
#livgolftabs-LIVGolf .headlines-tab,
#indycarrtabs-IndyCar .headlines-tab,
#lpgatourtabs-LPGATour .headlines-tab,
#trackandfieldtabs-TrackAndField .headlines-tab {
    flex: 1 !important;
    text-align: center !important;
    font-size: 10px !important;
    line-height: 18px !important;
    color: #aaa !important;
    cursor: pointer !important;
    background-color: #2a2a2a !important;
    border-right: 1px solid #1f1f1f !important;
    margin: 0 !important;
    padding: 0 !important;
}

#nwsltabs-NWSL .headlines-tab:last-child,
#ligue1tabs-Ligue1 .headlines-tab:last-child,
#ligamxtabs-LigaMX .headlines-tab:last-child,
#uefaeuropaleaguetabs-UEFAEuropaLeague .headlines-tab:last-child,
#uefaconferenceleaguetabs-UEFAConferenceLeague .headlines-tab:last-child,
#livgolftabs-LIVGolf .headlines-tab:last-child,
#indycarrtabs-IndyCar .headlines-tab:last-child,
#lpgatourtabs-LPGATour .headlines-tab:last-child,
#trackandfieldtabs-TrackAndField .headlines-tab:last-child {
    border-right: none !important;
}

#nwsltabs-NWSL .headlines-tab.active,
#ligue1tabs-Ligue1 .headlines-tab.active,
#ligamxtabs-LigaMX .headlines-tab.active,
#uefaeuropaleaguetabs-UEFAEuropaLeague .headlines-tab.active,
#uefaconferenceleaguetabs-UEFAConferenceLeague .headlines-tab.active,
#livgolftabs-LIVGolf .headlines-tab.active,
#indycarrtabs-IndyCar .headlines-tab.active,
#lpgatourtabs-LPGATour .headlines-tab.active,
#trackandfieldtabs-TrackAndField .headlines-tab.active {
    background-color: #3c3c3c !important;
    color: #fff !important;
}

/* 4) The "Headlines" header bar. Ensure it has no top margin/padding issues. */
.headlines-section .news-section-header {
    position: sticky !important;
    top: 0 !important;
    z-index: 29 !important;
    background: #3c3c3c !important;
    color: #fff !important;
    font-family: Helvetica, Arial, sans-serif !important;
    font-size: 12px !important;
    height: 18px !important;
    display: flex !important;
    align-items: center !important;
    padding: 0 10px !important;
    border-bottom: 1px solid #2a2a2a !important;
    font-weight: bold !important;
    letter-spacing: 0.5px !important;
    margin: 0 !important;
}

	   /*
  This is the corrected CSS to ensure the proper layout for both the
  home page's horizontal tabs and the league pages' vertical tabs.
*/

/* 5) The horizontal tabs container (used for the Home page). */
#headlines-tabs {
    position: sticky !important;
    top: 18px !important;
    z-index: 28 !important;
    display: flex !important;
    height: 18px !important;
    background-color: #2a2a2a !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* 11) New styles for the tabs themselves (Home page style). */
#headlines-tabs .headlines-tab {
    flex: 1 !important;
    text-align: center !important;
    font-size: 10px !important;
    line-height: 18px !important;
    color: #aaa !important;
    cursor: pointer !important;
    background-color: #2a2a2a !important;
    border-right: 1px solid #1f1f1f !important;
    margin: 0 !important;
    padding: 0 !important;
}

#headlines-tabs .headlines-tab:last-child {
    border-right: none !important;
}

#headlines-tabs .headlines-tab.active {
    background-color: #3c3c3c !important;
    color: #fff !important;
}

/* New styles for the vertical tabs on league pages. */
.headlines-tabs-column {
    display: flex !important;
    flex-direction: column !important; /* Forces vertical stacking */
    overflow-y: auto !important;
    background-color: #1f1f1f !important;
    width: 20% !important;
    flex-shrink: 0 !important;
    padding: 0 !important;
}
  
.headlines-tabs-column .headlines-tab {
    display: block !important;
    width: 100% !important;
    padding: 10px 2px !important;
    text-align: left !important;
    font-size: 10px !important;
    background-color: #151515 !important;
    color: white !important;
    border-bottom: 1px solid #444 !important;
    cursor: pointer !important;
    transition: background-color 0.2s !important;
    margin: 0 !important;
}

/* More specific rule to override any conflicting padding */
.headlines-tabs-column .headlines-tab[data-url] {
    padding: 10px 2px !important;
}
  
.headlines-tabs-column .headlines-tab:hover {
    background-color: #555 !important;
}
  
.headlines-tabs-column .headlines-tab.active {
    background-color: #333 !important;
    font-weight: bold !important;
}

/* Rule to make the default color of the links black */
.news-feed-content ul li a {
    color: black;
    text-decoration: none; /* Keeps the links from being underlined */
}

/* Rule for when a link has been visited (clicked) */
.news-feed-content ul li a:visited {
    color: lightgray;
}


	     /* 5a) ESPN feed-entry styling */
 /* Apply identical styling to ESPN, CBS, Yahoo and FOX feeds */
#espn-feed ul,
#cbs-feed ul,
#yahoo-feed ul,
#fox-feed ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

#espn-feed ul li,
#cbs-feed ul li,
#yahoo-feed ul li,
#fox-feed ul li {
  margin-bottom: 0.5em;
}

#espn-feed ul li a,
#cbs-feed ul li a,
#yahoo-feed ul li a,
#fox-feed ul li a {
  color: black;
  text-decoration: none;
  line-height: 1;
  word-break: break-word;
}

#espn-feed ul li a:visited,
#cbs-feed ul li a:visited,
#yahoo-feed ul li a:visited,
#fox-feed ul li a:visited {
  color: lightgray;
}

	   



/* 6) The news feed content area. This needs to be padding-free. */
.headlines-section .news-feed-content {
    flex: 1 1 auto !important;
    overflow-y: auto !important;
    padding: 0 !important;
    background: #fafaf9 !important;
    font-size: 11px !important;
    color: #111 !important;
    margin: 0 !important;
}

/* 7) Ensure list items have padding for readability after removing container padding. */
.headlines-section .news-feed-content ul {
    list-style: none !important;
    padding: 0 10px !important;
    margin: 0 !important;
}

.headlines-section .news-feed-content ul li {
    padding: 5px 0 !important;
    border-bottom: 1px solid #C9C8C7;
    margin: 0 !important;
}

/* 8) Breaking news section. Ensure it fills the rest of the available height. */
  .breaking-section {
    flex: 1 1 40%;
    display: flex;
    flex-direction: column;
    min-height: 80px;
    max-height: 40%;
    overflow: auto !important;
  }


 /* 6) "Breaking" header pinned at top of breaking-section */
  .breaking-section .news-section-header {
    position: sticky;
    top: 0; /* directly at top of breaking-section (under headlines-section) */
    z-index: 27;
    background: #3c3c3c;
    color: #fff;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 12px;
    height: 18px;
    display: flex;
    align-items: center;
    padding: 0 10px;
    border-bottom: 1px solid #ccc;
    font-weight: bold;
    letter-spacing: 0.5px;
  }

	     /* 7) Breaking │ Fantasy │ Transactions tabs pinned under "Breaking" header */
  .breaking-tabs-header {
    position: sticky;
    top: 18px; /* just under the 18px-high "Breaking" header */
    z-index: 26;
    display: flex;
    gap: 0;
    padding: 0;
    height: 18px;
    background-color: #3c3c3c;
  }


/* 10) The Breaking News content. Adjust padding. */
.breaking-section .news-feed-content {
    padding: 0 10px !important;
}

/* --- Unified Style for ALL Breaking News Sections (to match Headlines) --- */

/* This adds left/right padding to the main containers so the
   separator lines don't touch the edges of the box. */
#breaking-feed,
div[id^="breaking-content-"] {
  padding: 0 16px; /* 0 for top/bottom, 16px for left/right */
}

/* This removes the default browser styling (bullets, margin) from the list itself. */
#breaking-feed ul,
div[id^="breaking-content-"] ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

/* This styles each individual headline's row. */
#breaking-feed li,
div[id^="breaking-content-"] li {
  /* The thin, light gray separator line, perfect for dark mode */
  border-bottom: 1px solid #C9C8C7; 
  padding: 1px 0; /* Creates the vertical spacing above and below the text */
}

/* This removes the border from the very last item in the list for a cleaner look. */
#breaking-feed li:last-child,
div[id^="breaking-content-"] li:last-child {
  border-bottom: none;
}

/* This styles the actual link text. */
#breaking-feed a,
div[id^="breaking-content-"] a {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 11px;
  font-weight: normal;
  color: #151515;
  text-decoration: none;   /* No underline */
  line-height: 1.4;        /* Improves readability */
  transition: color 0.2s ease; /* Adds a smooth effect on hover */
}

/* A muted gray color for links you've already visited. */
#breaking-feed a:visited,
div[id^="breaking-content-"] a:visited {
  color: #757575;
}

/* Darkens the text slightly when you hover over it for feedback. */
#breaking-feed a:hover,
div[id^="breaking-content-"] a:hover {
  color: #505050;
}

  /* ────────────────────────────────────────────────────────── */
  /* TV-Listings (Games) Styling               */
  /* ────────────────────────────────────────────────────────── */
  .column.tv-listings #live-games-container {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* .league-section { margin-bottom: 14px !important; } */ /* Overridden by new CSS */


  /* .league-header { ... } */ /* Overridden by new CSS .league-title */

  /* the wrapper around all the rows for a league */
  .games-list {}

  /* .game-row { ... } */ /* Overridden by new CSS .game-table and .game-row/.game-separator */

  .game-time {
    font-size: 11px;
    color: #ccc;
  
  }

  .game-time.live {
    color: #DC143C !important;
    font-weight: bold;
  }

  .game-time-final {
    padding-left: 12px !important;
    text-align: left !important; /* Make sure it's not being centered */
    color: #ccc; /* or whatever color you want for the F */
    background: none;
  }

.game-teams {
  display: flex;
  flex-direction: column;
  padding-left: 10px;   /* same as old .game-matchup's padding */
  font-size: 11px;
  color: #ccc;
  line-height: 1.2;
}

.game-teams .team {
  margin: 0;
  padding: 0;
}

  .game-channel {
    text-align: right;
    font-size: 11px;
    color: #ccc;
  }

  .games-tab {
    flex: 1;
    text-align: center;
    font-size: 10px;
    line-height: 18px;
    color: #aaa;
    cursor: pointer;
    background-color: #2a2a2a;
    border-right: 1px solid #1f1f1f;
  }

  .games-tab.active {
    background-color: #3c3c3c;
    color: #fff;
  }

  .schedule-tab {
    flex: 1;
    text-align: center;
    font-size: 10px;
    line-height: 18px;
    color: #aaa;
    cursor: pointer;
    background-color: #2a2a2a;
    border-right: 1px solid #1f1f1f;
    transition: all 0.2s ease;
  }

  .schedule-tab.active {
    background-color: #3c3c3c;
    color: #fff;
  }

  .schedule-tab:hover {
    background-color: #333;
    color: #fff;
  }

  .schedule-content {
    min-height: 100px;
  }

  .games-content {
    display: none;
  }

  #tv-listings-scores,
  #tv-listings-today,
  #tv-listings-live {
    padding: 5px;
  }
	   
	   .winner {
  font-weight: bold;
}
	   /* --- FIX for League-Specific Column Horizontal Overflow --- */

/* Target the table cells ONLY inside the league-specific column */
#league-specific-column .game-table td {
    /* Reduce horizontal padding from 10px to 4px to save space */
    padding-left: 4px;
    padding-right: 4px;
    /* Reduce font size slightly for a better fit */
    font-size: 11px;
}

/* Target the first column (Time/Status) inside the league-specific column */
#league-specific-column .game-table td:first-child {
    /* Reduce the width from 90px to a much smaller 60px */
    width: 60px;
    min-width: 60px;
}

/* Target the last column (Score) inside the league-specific column */
#league-specific-column .game-table td:last-child {
    /* Reduce the width from 40px to 30px */
    width: 30px;
    min-width: 30px;
}


  /* ────────────────────────────────────────────────────────── */
  /* Fonts (Owners)                       */
  /* ────────────────────────────────────────────────────────── */
  @font-face {
    font-family: 'Owners';
    src: url('https://www.thporth.com/fonts/Owners-XLight.woff') format('woff');
    font-weight: 200;
    font-style: normal;
  }

  @font-face {
    font-family: 'Owners';
    src: url('https://www.thporth.com/fonts/Owners-medium.woff') format('woff');
    font-weight: 500;
    font-style: normal;
  }

  /* Owners Wide */
  @font-face {
    font-family: 'Owners Wide';
    src: url('https://www.thporth.com/fonts/OwnersWide-Light.woff') format('woff');
    font-weight: 300;
    font-style: normal;
  }

  @font-face {
    font-family: 'Owners Wide';
    src: url('https://www.thporth.com/fonts/OwnersWide-Regular.woff') format('woff');
    font-weight: 400;
    font-style: normal;
  }

  /* Owners XX Wide */
  @font-face {
    font-family: 'Owners XX Wide';
    src: url('https://www.thporth.com/fonts/OwnersXXWide-Light.woff') format('woff');
    font-weight: 300;
    font-style: normal;
  }

  @font-face {
    font-family: 'Owners XX Wide';
    src: url('https://www.thporth.com/fonts/OwnersXXWide-Regular.woff') format('woff');
    font-weight: 400;
    font-style: normal;
  }

  @font-face {
    font-family: 'Owners XX Wide';
    src: url('https://www.thporth.com/fonts/OwnersXXWide-Medium.woff') format('woff');
    font-weight: 500;
    font-style: normal;
  }

  @font-face {
    font-family: 'Owners XX Wide';
    src: url('https://www.thporth.com/fonts/OwnersXXWide-Bold.woff') format('woff');
    font-weight: 700;
    font-style: normal;
  }

  @font-face {
    font-family: 'Owners XXWideXBlack';
    src: url('https://www.thporth.com/fonts/OwnersXXWide-XBlack.woff') format('woff');
    font-weight: 950;
    font-style: normal;
  }
  
  /* Logo aspect ratio preservation */
  img[alt*="Logo"], img[alt*="NFL"], img[alt*="NBA"], img[alt*="MLB"], img[alt*="NHL"], img[alt*="Soccer"], img[alt*="Boxing"], img[alt*="Track"], img[alt*="Field"], img[alt*="UFC"], img[alt*="Tennis"], img[alt*="WNBA"], img[alt*="Formula"], img[alt*="NCAAF"], img[alt*="PGA"], img[alt*="NASCAR"], img[alt*="MotoGP"], img[alt*="LPGA"], img[alt*="LIV"], img[alt*="IndyCar"], img[alt*="NCAA"] {
    object-fit: contain !important;
    width: 12px !important;
    height: 12px !important;
    margin-right: 6px !important;
    vertical-align: middle !important;
    display: inline-block !important;
  }
  
</style>
	  <style>
		  /* ───────────── Header Styling ───────────── */
#resp-header {
  display: none;
  position: sticky;
  top: 0; left: 0; right: 0;
  height: 50px;
  background: #151515;
  z-index: 200;
  padding: 0 10px;
  align-items: center;
  justify-content: space-between;
}
#resp-header img#header-logo {
  height: 30px;
}
#resp-header button {
  background: none;
  border: none;
  color: white;
  font-size: 14px;
  cursor: pointer;
}
#resp-header .hamburger {
  display: block;
  width: 24px; height: 2px;
  background: white;
  position: relative;
}
#resp-header .hamburger::before,
#resp-header .hamburger::after {
  content: "";
  position: absolute;
  width: 24px; height: 2px;
  background: white;
}
#resp-header .hamburger::before { top: -6px; }
#resp-header .hamburger::after  { top:  6px; }

/* ───────────── Overlay Panels ───────────── */
.column.main-menu.open,
.column.tv-listings.open {
  position: absolute;
  top: 50px; /* header height */
  background: #151515;
  z-index: 150;
  height: calc(100vh - 50px);
  overflow-y: auto;
}
.column.main-menu.open {
  left: 0;
  width: 250px;
}
.column.tv-listings.open {
  right: 0;
  width: 250px;
}

/* ─── always honor "open" toggles, even under the smaller-screen hide rules ─── */
.column.main-menu.open {
  display: block !important;
}
.column.tv-listings.open {
  display: block !important;
}




.game-entry, .game-entry * {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  padding-top: 0 !important;
  padding-left: 0 !important;
  margin-left: 0 !important;
  padding-bottom: 0 !important;
  line-height: 1.1 !important;
}




/* ADD 10PX SPACE TO LEFT OF MAIN MENU */
.main-menu {
  margin-left: 10px !important;
}

/* ═══════════════════════════════════════════════════════════════════
   MOBILE RESPONSIVENESS - MAINTAIN DESKTOP, ADD MOBILE
   ═══════════════════════════════════════════════════════════════════ */

/* Mobile (0-767px) - Single column with bottom toolbar */
@media (max-width: 767px) {
  /* Hide desktop elements */
  .main-menu,
  .divider {
    display: none !important;
  }
  
  /* Container becomes single column */
  .container {
    display: flex !important;
    flex-direction: column !important;
    padding: 0 !important;
    width: 100% !important;
    max-width: none !important;
    margin: 0 !important;
    position: fixed !important;
    top: 20px !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 60px !important; /* Exact bottom toolbar height */
  }
  
  /* All columns full width, but only one visible at a time */
  .column {
    width: 100% !important;
    min-width: 0 !important;
    flex: 1 !important;
    margin-bottom: 0 !important;
    max-width: 100% !important;
    height: 100% !important;
    display: none !important; /* Hidden by default, shown by JS */
  }
  
  /* Show only the active column */
  .column.mobile-active {
    display: flex !important;
    flex-direction: column !important;
    height: 100% !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
  }
  
  /* Top bar adjustments */
  #topBar {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    padding: 8px 0 !important;
  }
  
  /* Mobile logo */
  #topBar::after {
    content: "";
    background-image: url('https://github.com/kyle4news/thporth/blob/main/THPORTH%20logo.png?raw=true');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    width: 120px;
    height: 30px;
    display: block;
  }
  
  /* Space for bottom toolbar */
  body {
    padding-bottom: 80px !important;
  }
  
  /* Add bottom padding to all content columns to prevent toolbar overlap */
  .column {
    padding-bottom: 60px !important;
  }
  
  /* Ensure content areas have proper spacing */
  .column .content-section,
  .column .news-main-container,
  .column .news-section,
  .column .news-feed-content,
  .column .schedule-content,
  .column .standings-content,
  .column .social-feed-container,
  .column .videos-container {
    padding-bottom: 60px !important;
  }
  
  /* Mobile News Section Height Allocation */
  .column.news .news-main-container {
    height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
  }
  
  /* Headlines section takes 60% of available height */
  .column.news .news-section:first-child {
    flex: 3 !important; /* 60% = 3 parts out of 5 total */
    display: flex !important;
    flex-direction: column !important;
    min-height: 0 !important;
  }
  
  /* Breaking section takes 40% of available height */
  .column.news .news-section:last-child {
    flex: 2 !important; /* 40% = 2 parts out of 5 total */
    display: flex !important;
    flex-direction: column !important;
    min-height: 0 !important;
  }
  
  /* Ensure feed content areas fill their containers */
  .column.news .news-feed-content,
  .column.news .news-content-pane {
    flex: 1 !important;
    overflow-y: auto !important;
    min-height: 0 !important;
  }
}

/* Bottom Toolbar Styling */
#mobile-bottom-toolbar {
  display: none;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background-color: #000;
  border-top: 1px solid #333;
  z-index: 1000;
  justify-content: center;
  align-items: center;
  gap: 1px;
}

@media (max-width: 767px) {
  #mobile-bottom-toolbar {
    display: flex !important;
  }
}

.mobile-toolbar-btn {
  flex: 1;
  height: 50px;
  background-color: #333; /* Dark gray for inactive */
  color: #ccc; /* Light text for inactive */
  border: none;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

/* Special styling for the league button (first button) */
#mobile-league-btn {
  flex: 1.5; /* Make it 1.5x as wide as other buttons (25% reduction from previous 2x) */
  flex-direction: row; /* Horizontal layout for league name and arrow */
  justify-content: space-between; /* Space between text and arrow */
  align-items: center; /* Center vertically */
  padding: 8px 12px; /* Add padding for better spacing */
  text-align: left; /* Left align the text */
}

#mobile-league-btn span:first-child {
  flex: 1; /* League name takes available space */
  text-align: left; /* Left align league name */
  line-height: 1.2; /* Better line height for multi-line text */
  word-wrap: break-word; /* Allow text to wrap */
  overflow-wrap: break-word; /* Better word wrapping */
}

#mobile-league-btn span:last-child {
  flex-shrink: 0; /* Arrow doesn't shrink */
  margin-left: 8px; /* Space between text and arrow */
}

.mobile-toolbar-btn.active {
  background-color: #ccc !important; /* Light gray for active league */
  color: #333 !important; /* Dark text for active league */
}

.mobile-toolbar-btn:not(.active):hover {
  background-color: #444;
}

/* Mobile Menu Overlay */
#mobile-league-menu {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.9);
  z-index: 2000;
  overflow-y: auto;
  padding: 20px;
}

#mobile-league-menu .menu-content {
  background-color: #151515;
  border-radius: 8px;
  padding: 20px;
  max-width: 400px;
  margin: 0 auto;
}

#mobile-league-menu .menu-header {
  color: white;
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 20px;
  text-align: center;
  border-bottom: 1px solid #333;
  padding-bottom: 10px;
}

#mobile-league-menu .league-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

#mobile-league-menu .league-list li {
  padding: 12px 0;
  border-bottom: 1px solid #333;
  color: #ccc;
  cursor: pointer;
  transition: color 0.2s ease;
}

#mobile-league-menu .league-list li:hover {
  color: white;
}

#mobile-league-menu .close-btn {
  position: absolute;
  top: 15px;
  right: 20px;
  background: none;
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
}

/* Standings Tabs Styling - Updated to match site design */
.standings-tabs {
    display: flex;
    margin-bottom: 20px;
    background-color: #2a2a2a;
    overflow: hidden;
    width: 100%;
}

.tab-button {
    background: #2a2a2a;
    border: none;
    padding: 0;
    color: #9ca3af;
    cursor: pointer;
    font-size: 10px;
    font-weight: normal;
    line-height: 18px;
    height: 18px;
    transition: all 0.2s ease;
    flex: 1;
    text-align: center;
    width: 50%;
}

.tab-button:hover {
    color: #ffffff;
    background-color: #374151;
}

.tab-button.active {
    background-color: #2a2a2a;
    color: #ffffff;
    font-weight: bold;
    border-bottom: 2px solid #ffffff;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

.division-section {
    margin-bottom: 20px;
}

.division-header {
    color: #ffffff;
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 8px;
    padding: 8px 0;
    border-bottom: 1px solid #4a4a4a;
}

.conference-header {
    color: #ffffff;
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 12px;
    padding: 10px 0;
    border-bottom: 1px solid #4a4a4a;
}

.conference-section {
    margin-bottom: 25px;
}

.wnba-standings .conference-section:last-child {
    margin-bottom: 0;
}

</style>

<!-- Add this snippet above closing </head> or integrate into your existing <style> section -->

  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WWK5WV7N"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    
    <!-- Redirect mobile subdomain to main domain -->
    <script>
      // Immediate redirect for mobile subdomain
      if (window.location.hostname === 'm.thporth.com') {
        // Use replace to avoid back button issues
        window.location.replace('https://thporth.com' + window.location.pathname + window.location.search + window.location.hash);
      }
    </script>
    
    <!-- Fallback meta refresh for mobile subdomain -->
    <script>
      if (window.location.hostname === 'm.thporth.com') {
        document.write('<meta http-equiv="refresh" content="0; url=https://thporth.com' + window.location.pathname + window.location.search + window.location.hash + '">');
      }
    </script>
    
	  <header id="resp-header">
  <button id="menu-toggle" aria-label="Open menu">
    <span class="hamburger"></span>
  </button>
  <img src="https://github.com/THPORTH/thporth/blob/main/thporth_AllSportsNews_logo-white.png?raw=true"
       alt="THPORTH" id="header-logo"/>
  <button id="games-toggle">Games</button>
</header>
        <div id="topBar" style="position: relative;">
            <div id="responsive-tabs" style="display: none;">
                <button id="videos-tab" class="videos-tab-btn" style="display: none;">Videos</button>
                <button id="social-tab" class="videos-tab-btn" style="display: none;">Social</button>
                <button id="news-tab" class="videos-tab-btn" style="display: none;">News</button>
            </div>
        </div>
    <div id="topDivider"></div>
    
    <!-- Banner Ads Section -->
    <div id="banner-ads" style="display: flex; justify-content: center; align-items: center; background-color: #000; padding: 10px 0; gap: 10px; width: 100%; box-sizing: border-box;">
      <div class="ad-container" style="width: 728px; height: 90px; display: flex; justify-content: center; align-items: center;">
        <script type="text/javascript">
          atOptions = {
            'key' : '452de3915164cea7c2886de2ad095172',
            'format' : 'iframe',
            'height' : 90,
            'width' : 728,
            'params' : {}
          };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/452de3915164cea7c2886de2ad095172/invoke.js"></script>
      </div>
      <div class="ad-container" style="width: 728px; height: 90px; display: flex; justify-content: center; align-items: center;">
        <script type="text/javascript">
          atOptions = {
            'key' : '452de3915164cea7c2886de2ad095172',
            'format' : 'iframe',
            'height' : 90,
            'width' : 728,
            'params' : {}
          };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/452de3915164cea7c2886de2ad095172/invoke.js"></script>
      </div>
    </div>
    
    
    <div class="container">
  
     <!-- MAIN MENU COLUMN -->
      <div class="column main-menu">
        <div id="menuTopBox">
          <img
            src="https://github.com/kyle4news/thporth/blob/main/THPORTH%20logo.png?raw=true"
            alt="Logo"
          />
        </div>
        <input type="text" id="menuSearch" placeholder="Search leagues" />
        <div id="menuFilters">
          <span class="menu-filter active" data-filter="123">123</span>
          <span class="menu-filter" data-filter="az">A‑Z</span>
          <span class="menu-filter" data-filter="group">Group</span>
        </div>
        <div id="menuList">
          <!-- 123 FILTER LIST -->
          <ul id="menuList-123" style="margin-top: 0; padding-top: 0;">
            <li data-section="Home" class="selected"><img src="https://github.com/kyle4news/thporth/blob/main/Screenshot%202025-09-27%20at%2009.04.02.png?raw=true" alt="ALL" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">ALL</li>
            <li data-section="NFL"><img src="https://www.flashscore.com/res/image/data/W6t8omXI-prCDKdX1.png" alt="NFL" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NFL</li>
            <li data-section="NBA"><img src="https://static.flashscore.com/res/image/data/OhgQNlXI-nyYPIw0n.png" alt="NBA" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NBA</li>
            <li data-section="MLB"><img src="https://www.flashscore.com/res/image/data/QPJ3alWI-pS3BMXxt.png" alt="MLB" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">MLB</li>
            <li data-section="NHL"><img src="https://github.com/kyle4news/thporth/blob/main/nhl.png?raw=true" alt="NHL" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NHL</li>
            <li data-section="Soccer"><img src="https://github.com/kyle4news/thporth/blob/main/Soccer.png?raw=true" alt="Soccer" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Soccer
              <ul class="nested">
                <li data-section="UEFAChampionsLeague"><img src="https://github.com/kyle4news/thporth/blob/main/UCL.png?raw=true" alt="UEFA Champions League" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">UEFA Champions League</li>
                <li data-section="PremierLeague"><img src="https://github.com/kyle4news/thporth/blob/main/premierleague.png?raw=true" alt="Premier League" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Premier League</li>
                <li data-section="MLS"><img src="https://github.com/kyle4news/thporth/blob/main/mls.png?raw=true" alt="MLS" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">MLS</li>
                <li data-section="LaLiga"><img src="https://static.flashscore.com/res/image/data/6aNYx0jD-A3tOPy9B.png" alt="LaLiga" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">LaLiga</li>
                <li data-section="SerieA"><img src="https://static.flashscore.com/res/image/data/rFHMayEO-2exwJQks.png" alt="Serie A" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Serie A</li>
                <li data-section="Bundesliga"><img src="https://static.flashscore.com/res/image/data/fqltz6CO-4ATnefbq.png" alt="Bundesliga" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Bundesliga</li>
                <li data-section="FACup"><img src="https://github.com/kyle4news/thporth/blob/main/FACup.png?raw=true" alt="FA Cup" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">FA Cup</li>
                <li data-section="LigaMX"><img src="https://github.com/kyle4news/thporth/blob/main/ligamx.png?raw=true" alt="Liga MX" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Liga MX</li>
                <li data-section="NWSL"><img src="https://github.com/kyle4news/thporth/blob/main/nwsl.png?raw=true" alt="NWSL" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NWSL</li>
                <li data-section="Ligue1"><img src="https://github.com/kyle4news/thporth/blob/main/LIgue%201.png?raw=true" alt="Ligue 1" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Ligue 1</li>
                <li data-section="UEFAEuropaLeague"><img src="https://static.flashscore.com/res/image/data/lxUusmmd-nyYh4pi6.png" alt="UEFA Europa League" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">UEFA Europa League</li>
                <li data-section="UEFAConferenceLeague"><img src="https://static.flashscore.com/res/image/data/6a9THkA7-fmGCnzrf.png" alt="UEFA Conference League" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">UEFA Conference League</li>
              </ul>
            </li>
            <li data-section="FormulaOne"><img src="https://github.com/kyle4news/thporth/blob/main/f1.png?raw=true" alt="Formula One" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Formula One</li>
            <li data-section="NCAAF"><img src="https://github.com/kyle4news/thporth/blob/main/ncaaf.png?raw=true" alt="NCAAF" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NCAAF</li>
            <li data-section="PGATour"><img src="https://github.com/kyle4news/thporth/blob/main/PGATour.png?raw=true" alt="PGA Tour" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">PGA Tour</li>
            <li data-section="UFC"><img src="https://github.com/kyle4news/thporth/blob/main/ufc.png?raw=true" alt="UFC" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">UFC</li>
            <li data-section="Boxing"><img src="https://github.com/kyle4news/thporth/blob/main/Github%20boxing.png?raw=true" alt="Boxing" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Boxing</li>
            <li data-section="NASCARCupSeries"><img src="https://github.com/kyle4news/thporth/blob/main/nascar.png?raw=true" alt="NASCAR Cup Series" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NASCAR Cup Series</li>
            <li data-section="Tennis"><img src="https://github.com/kyle4news/thporth/blob/main/atp.png?raw=true" alt="Tennis" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Tennis</li>
            <li data-section="WNBA"><img src="https://github.com/kyle4news/thporth/blob/main/WNBA.png?raw=true" alt="WNBA" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">WNBA</li>
            <li data-section="LIVGolf"><img src="https://github.com/kyle4news/thporth/blob/main/LIVGolf.png?raw=true" alt="LIV Golf" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">LIV Golf</li>
            <li data-section="IndyCar"><img src="https://github.com/kyle4news/thporth/blob/main/indycar.png?raw=true" alt="IndyCar" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">IndyCar</li>
            <li data-section="NCAAM"><img src="https://static.flashscore.com/res/image/data/UN5z4YU1-423yojZa.png" alt="NCAAM" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NCAAM</li>
            <li data-section="NCAAW"><img src="https://static.flashscore.com/res/image/data/UN5z4YU1-423yojZa.png" alt="NCAAW" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NCAAW</li>
           <!-- <li data-section="UFL">UFL</li> -->
            <li data-section="NCAABaseball"><img src="https://static.flashscore.com/res/image/data/UN5z4YU1-423yojZa.png" alt="NCAA Baseball" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NCAA Baseball</li>
            <li data-section="NCAASoftball"><img src="https://static.flashscore.com/res/image/data/UN5z4YU1-423yojZa.png" alt="NCAA Softball" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">NCAA Softball</li>
            <li data-section="MotoGP"><img src="https://github.com/kyle4news/thporth/blob/main/motogp.png?raw=true" alt="MotoGP" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">MotoGP</li>
            <li data-section="LPGATour"><img src="https://github.com/kyle4news/thporth/blob/main/LPGATour.png?raw=true" alt="LPGA Tour" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">LPGA Tour</li>
            <li data-section="TrackAndField"><img src="https://github.com/kyle4news/thporth/blob/main/Screenshot%202025-09-27%20at%2005,05,08-Picsart-BackgroundRemover.png?raw=true" alt="Track & Field" style="width: 12px; height: 12px; margin-right: 6px; vertical-align: middle; display: inline-block;">Track & Field</li>
            <br><br><br><br><br><br><br><br>
          </ul>
          <!-- A‑Z FILTER LIST (Complete) -->
        <ul id="menuList-az" style="display: none;">
            <li data-section="Home">ALL</li>
           <!-- <li data-section="AFCChampionsLeagueElite">AFC Champions League Elite</li>
            <li data-section="AFL">AFL</li>
            <li data-section="AfricaCupOfNations">Africa Cup of Nations</li>
            <li data-section="ARCAMenards">ARCA Menards</li>
            <li data-section="ArgentinePrimera">Argentine Primera</li>
            <li data-section="BelgianProLeague">Belgian Pro League</li>
            <li data-section="BigBashLeague">Big Bash League</li> -->
            <li data-section="Boxing">Boxing</li>
          <!--   <li data-section="Brasileirao">Brasileirão</li> -->
            <li data-section="Bundesliga">Bundesliga</li>
         <!--    <li data-section="CAFChampionsLeague">CAF Champions League</li>
            <li data-section="CanadianPremierLeague">Canadian Premier League</li>
            <li data-section="CarabaoCup">Carabao Cup</li>
            <li data-section="CFL">CFL</li>
            <li data-section="CONCACAFChampionsCup">Concacaf Champions Cup</li>
            <li data-section="CONCACAFGoldCup">Concacaf Gold Cup</li>
            <li data-section="CONCACAFNationsLeague">Concacaf Nations League</li>
            <li data-section="CONCACAFWGoldCup">Concacaf W Gold Cup</li>
            <li data-section="CopaDelRey">Copa del Rey</li>
            <li data-section="CopaLibertadores">Copa Libertadores</li>
            <li data-section="CopaSudamericana">Copa Sudamericana</li>
            <li data-section="CoppaItalia">Coppa Italia</li>
            <li data-section="Cricket">Cricket</li>
            <li data-section="Cycling">Cycling</li>
            <li data-section="DFBPokal">DFB-Pokal</li>
            <li data-section="EFLChampionship">EFL Championship</li>
            <li data-section="EuroLeague">EuroLeague</li> -->
            <li data-section="FACup">FA Cup</li>
         <!--    <li data-section="FIFAClubWorldCup">FIFA Club World Cup</li>
            <li data-section="FigureSkating">Figure Skating</li> -->
            <li data-section="FormulaOne">Formula 1</li>
         <!--    <li data-section="Formula2">Formula 2</li>
            <li data-section="Formula3">Formula 3</li>
            <li data-section="Gymnastics">Gymnastics</li>
            <li data-section="HorseRacing">Horse Racing</li> -->
            <li data-section="IndyCar">IndyCar</li>
         <!--    <li data-section="KornFerryTour">Korn Ferry Tour</li> -->
            <li data-section="LaLiga">LaLiga</li>
            <li data-section="LigaMX">Liga MX</li>
         <!--    <li data-section="LigaPortugal">Liga Portugal</li> -->
            <li data-section="Ligue1">Ligue 1</li>
        <!--     <li data-section="LittleLeagueSoftballWorldSeries">Little League Softball</li>
            <li data-section="LittleLeagueWorldSeries">Little League World Series</li> -->
            <li data-section="LIVGolf">LIV Golf</li>
            <li data-section="LPGATour">LPGA Tour</li>
        <!--     <li data-section="MajorLeagueRugby">Major League Rugby</li> -->
            <li data-section="MLB">MLB</li>
            <li data-section="MLS">MLS</li>
          <!--   <li data-section="MMA">MMA</li> -->
            <li data-section="MotoGP">MotoGP</li>
            <li data-section="NASCARCupSeries">NASCAR Cup Series</li>
            <li data-section="NBA">NBA</li>
         <!--    <li data-section="NBAGLeague">NBA G League</li>
            <li data-section="NCAAB">NCAAB</li> -->
            <li data-section="NCAAF">NCAAF</li>
            <li data-section="NCAAM">NCAAM</li>
            <li data-section="NCAAW">NCAAW</li>
            <li data-section="NCAABaseball">NCAA Baseball</li>
        <!--     <li data-section="NCAAMensHockey">NCAA Men's Hockey</li> -->
            <li data-section="NCAASoftball">NCAA Softball</li>
            <li data-section="NFL">NFL</li>
            <li data-section="NHL">NHL</li>
         <!--    <li data-section="NHRA">NHRA</li> -->
          <li data-section="NWSL">NWSL</li>
          <!--  <li data-section="Olympics">Olympics</li>
            <li data-section="PGAChampions">PGA Champions</li> -->
            <li data-section="PGATour">PGA Tour</li>
          <li data-section="PremierLeague">Premier League</li>
         <!--    <li data-section="PremiershipRugby">Premiership Rugby</li>
            <li data-section="SaudiProLeague">Saudi Pro League</li>
            <li data-section="ScottishPremiership">Scottish Premiership</li> -->
      <li data-section="SerieA">Serie A</li>
              <li data-section="Soccer">Soccer</li>
            <li data-section="Tennis">Tennis</li>
         <!--   <li data-section="TGL">TGL</li> -->
            <li data-section="TrackAndField">Track & Field</li>
<!--
            <li data-section="USOpenCup">U.S. Open Cup</li> -->
            <li data-section="UFC">UFC</li>
            <!--<li data-section="UFL">UFL)-->
            <li data-section="UEFAChampionsLeague">UEFA Champions League</li>
            <li data-section="UEFAConferenceLeague">UEFA Conference League</li>
            <li data-section="UEFAEuropaLeague">UEFA Europa League</li>
        <!--      <li data-section="UEFANationsLeague">UEFA Nations League</li>
            <li data-section="UEFAWChampionsLeague">UEFA W Champions League</li>
            <li data-section="Volleyball">Volleyball</li> -->
            <li data-section="WNBA">WNBA</li>
           <!--   <li data-section="WomensSuperLeague">Women's Super League</li>
            <li data-section="XGames">X Games</li> -->
            <li class="spacer-line"></li>
            <li class="spacer-line"></li>
            <li class="spacer-line"></li>
          </ul>
          <!-- GROUP FILTER LIST -->
          <ul id="menuList-group" style="display: none;">
          <li data-section="Home"><span style="font-weight: bold;">ALL</span></li>            
            <li class="spacer-line"></li>
            <li><strong>FOOTBALL</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="NFL">NFL</li>
               <!-- <li data-section="NCAAF">NCAAF</li> -->
             <!-- <li data-section="UFL">UFL)-->
              <!-- <li data-section="CFL">CFL)-->
            </ul>
            <li class="spacer-line"></li>
            <li><strong>BASEBALL</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="MLB">MLB</li>
              <li data-section="NCAABaseball">NCAA Baseball</li>
              <!-- <li data-section="LittleLeagueWorldSeries">Little League World Series</li> -->
            </ul>
            <li class="spacer-line"></li>
            <li><strong>BASKETBALL</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="NBA">NBA</li>
              <li data-section="WNBA">WNBA</li>
              <li data-section="NCAAM">NCAAM</li>
              <li data-section="NCAAW">NCAAW</li>
             <!--  <li data-section="NBAGLeague">NBA G League</li> -->
             <!--  <li data-section="EuroLeague">EuroLeague</li> -->
            </ul>
            <li class="spacer-line"></li>
            <li data-section="Soccer"><span style="font-weight: bold;">SOCCER</span></li>
            <ul style="padding-left: 10px;">
              <li data-section="UEFAChampionsLeague">UEFA Champions League</li>
              <li data-section="PremierLeague">Premier League</li>
              <li data-section="MLS">MLS</li>
              <li data-section="LaLiga">LaLiga</li>
              <li data-section="SerieA">Serie A</li>
              <li data-section="Bundesliga">Bundesliga</li>
              <li data-section="FACup">FA Cup</li>
              <li data-section="LigaMX">Liga MX</li>
              <li data-section="NWSL">NWSL</li>
              <li data-section="Ligue1">Ligue 1</li>
              <li data-section="UEFAEuropaLeague">UEFA Europa League</li>
              <li data-section="UEFAConferenceLeague">UEFA Conference League</li>
             <!--  <li class="soccer-more-toggle" style="cursor: pointer; color: #bebebe;" onclick="toggleSoccerMore()">More…</li>
            </ul>
            <div id="soccer-more" style="display: none;">
              <ul style="padding-left: 10px;">
                <li data-section="CarabaoCup">Carabao Cup</li>
                <li data-section="UEFANationsLeague">UEFA Nations League</li>
                <li data-section="CONCACAFNationsLeague">Concacaf Nations League</li>
                <li data-section="SaudiProLeague">Saudi Pro League</li>
                <li data-section="EFLChampionship">EFL Championship</li>
                <li data-section="CopaDelRey">Copa del Rey</li>
                <li data-section="FIFAClubWorldCup">FIFA Club World Cup</li>
                <li data-section="Brasileirao">Brasileirão</li>
                <li data-section="AFCChampionsLeagueElite">AFC Champions League Elite</li>
                <li data-section="CopaLibertadores">Copa Libertadores</li>
                <li data-section="CONCACAFGoldCup">Concacaf Gold Cup</li>
                <li data-section="CONCACAFWGoldCup">Concacaf W Gold Cup</li>
                <li data-section="CopaSudamericana">Copa Sudamericana</li>
                <li data-section="CanadianPremierLeague">Canadian Premier League</li>
                <li data-section="CoppaItalia">Coppa Italia</li>
                <li data-section="DFBPokal">DFB-Pokal</li>
                <li data-section="ScottishPremiership">Scottish Premiership</li>
                <li data-section="UEFAWChampionsLeague">UEFA W Champions League</li>
                <li data-section="CAFChampionsLeague">CAF Champions League</li>
                <li data-section="AfricaCupOfNations">Africa Cup of Nations</li>
                <li data-section="CONCACAFChampionsCup">Concacaf Champions Cup</li>
                <li data-section="ArgentinePrimera">Argentine Primera</li>
                <li data-section="BelgianProLeague">Belgian Pro League</li>
                <li data-section="WomensSuperLeague">Women's Super League</li>
                <li data-section="LigaPortugal">Liga Portugal</li>
                <li data-section="USOpenCup">U.S. Open Cup</li>
              </ul>
            </div> -->
            <li class="spacer-line"></li>
            <li><strong>HOCKEY</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="NHL">NHL</li>
             <!--  <li data-section="NCAAMensHockey">NCAA Men's Hockey</li> -->
            </ul>
            <li class="spacer-line"></li>
            <li><strong>MOTORSPORTS</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="FormulaOne">Formula 1</li>
              <li data-section="NASCARCupSeries">NASCAR Cup Series</li>
              <li data-section="IndyCar">IndyCar</li>
              <li data-section="MotoGP">MotoGP</li>
           <!--    <li data-section="NHRA">NHRA</li>
              <li data-section="NASCARXfinitySeries">NASCAR Xfinity Series</li>
              <li data-section="NASCARTruckSeries">NASCAR Truck Series</li>
              <li data-section="Formula2">Formula 2</li>
              <li data-section="Formula3">Formula 3</li>
              <li data-section="ARCAMenards">ARCA Menards</li> -->
            </ul>
            <li class="spacer-line"></li>
            <li><strong>GOLF</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="PGATour">PGA Tour</li>
              <li data-section="LIVGolf">LIV Golf</li>
           <!--    <li data-section="TGL">TGL</li> -->
              <li data-section="LPGATour">LPGA Tour</li>
         <!--      <li data-section="PGAChampions">PGA Champions</li>
              <li data-section="DPWorldTour">DP World Tour</li>
              <li data-section="KornFerryTour">Korn Ferry Tour</li> -->
            </ul>
            <li class="spacer-line"></li>
            <li><strong>FIGHTING</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="UFC">UFC</li>
              <li data-section="Boxing">Boxing</li>
            <!--   <li data-section="MMA">MMA</li> -->
            </ul>
            <li class="spacer-line"></li>
           <!--  <li><strong>TENNIS</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="ATP">ATP</li>
              <li data-section="WTA">WTA</li>
            </ul> 
            <li class="spacer-line"></li> -->
            <li><strong>SOFTBALL</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="NCAASoftball">NCAA Softball</li>
             <!--  <li data-section="LittleLeagueSoftballWorldSeries">Little League Softball</li> -->
            </ul>
            <li class="spacer-line"></li>
              <!-- Placeholder for Tennis for right now until new leagues are added 
              <ul style="padding-left: 10px;">
              <li data-section="Tennis">Tennis</li>
            </ul> -->
           <!--  <li><strong>RUGBY</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="RugbyUnion">Rugby Union</li>
              <li data-section="PremiershipRugby">Premiership Rugby</li>
              <li data-section="MajorLeagueRugby">Major League Rugby</li>
            </ul>
            <li class="spacer-line"></li>
            <li><strong>CRICKET</strong></li>
            <ul style="padding-left: 10px;">
              <li data-section="BigBashLeague">Big Bash League</li>
            </ul> 
            <li class="spacer-line"></li>-->
            <li><strong>OTHER</strong></li>
            <ul style="padding-left: 10px;">
<!--
              <li data-section="AFL">AFL</li>
              <li data-section="Cycling">Cycling</li>
              <li data-section="FigureSkating">Figure Skating</li>
              <li data-section="Gymnastics">Gymnastics</li>
              <li data-section="HorseRacing">Horse Racing</li>
              <li data-section="Olympics">Olympics</li> -->
             <li data-section="TrackAndField">Tennis</li>
              <li data-section="TrackAndField">Track & Field</li>
               <!--
              <li data-section="Volleyball">Volleyball</li>
              <li data-section="XGames">XGames</li>  -->
              <li class="spacer-line"></li>
              <li class="spacer-line"></li>
              <li class="spacer-line"></li>
            </ul>
          </ul>
        </div>
      </div>


      <!-- Divider between main menu and standings -->
<div class="divider"></div>

<!-- ─── TV-LISTINGS COLUMN (Default View) ──────────────────────────────────────── -->
<div class="column tv-listings" id="games-column" style="flex: 0 0 250px; background-color: #1f1f1f; overflow-x: hidden; padding-bottom: 40px;">
  <div id="tv-listings-container" style="display: block;">
    <div id="games-header" style="
        position: sticky; top: 0; width: 100%; height: 18px;
        background-color: #3c3c3c; font-family: Helvetica, Arial, sans-serif;
        font-size: 10px; display: flex; align-items: center;
        padding-left: 1px; z-index: 11; border-bottom: 1px solid #1f1f1f;
      ">
      <strong>Games</strong>
    </div>

    <div id="games-tabs" style="display: flex; height: 18px; background-color: #2a2a2a;">
      <div class="games-tab" data-tab="scores">SCORES</div>
      <div class="games-tab active" data-tab="today">TODAY</div>
      <div id="live-filter-toggle" class="games-tab"><span style="display: inline-block; width: 3px; height: 3px; background-color: #ff0000; border-radius: 50%; margin-right: 4px; margin-left: 2px; vertical-align: middle; transform: translateY(-2px);"></span>LIVE</div>
    </div>
    <div id="tv-listings-scores" class="games-content" style="display: none;">
      <div id="scoresWrapper">
        <div id="scoresLoading" class="loading-indicator hidden">
          <svg class="loading-spinner" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <p class="loading-text">Loading yesterday's scores...</p>
        </div>
        <div id="scoresErrorMessage" class="error-message hidden" role="alert">
          <strong>Error!</strong>
          <span id="scoresErrorText"></span>
        </div>
        <div id="dynamicScoresContent"></div>
      </div>
    </div>
    <div id="tv-listings-today" class="games-content" style="display: block;">
      <div id="games"></div>
      <div id="error" class="error"></div>
    </div>
    </div>

  <div id="f1-column-content" style="display: none; height: 100%; flex-direction: column; background-color: #1f1f1f; color: #ffffff;">
      
      <div style="padding: 0.5rem; border-bottom: 0px; background-color: #3c3c3c;">
          <h2 style="font-size: 12px; font-weight: normal; color: #fff;">Schedule</h2>
      </div>
  
      <div id="f1-schedule-container" style="padding: 1rem; font-size: 0.875rem;">
    <p style="color: #9ca3af;">Loading schedule...</p>
</div>
  
      <div style="padding: 0.5rem; border-top: 1px solid #374151; border-bottom: 0px; background-color: #3c3c3c;">
          <h2 style="font-size: 12px; font-weight: normal; color: #fff;">Standings</h2>
      </div>
  
      <div style="display: flex; flex-direction: column; flex: 1; overflow: hidden;">
          <div style="padding: 0 1.5rem; border-bottom: 1px solid #374151;">
              <nav id="f1-tab-buttons" style="display: flex; margin-bottom: -1px; gap: 1.5rem;">
                  <button class="f1-tab-button active" data-tab="driver-standings" style="border-bottom: 2px solid #DC143C; color: #fff; padding-bottom: 0.5rem; font-size: 0.875rem; font-weight: 600; background: none; border-top: none; border-left: none; border-right: none; cursor: pointer;">
                      Driver
                  </button>
                  <button class="f1-tab-button" data-tab="constructor-standings" style="border-bottom: 2px solid transparent; color: #9ca3af; padding-bottom: 0.5rem; font-size: 0.875rem; font-weight: 600; background: none; border-top: none; border-left: none; border-right: none; cursor: pointer;">
                      Constructor
                  </button>
              </nav>
          </div>
          <div style="padding: 0.5rem; flex: 1; overflow-y: auto;">
             <div id="driver-standings" class="f1-content-pane">
              <div id="driver-loading" style="text-align: center; padding: 20px; color: #9ca3af;">Loading driver standings...</div>
              <div id="driver-error" style="display: none; color: #ef4444; text-align: center; padding: 20px;"></div>
              <table id="driver-table" style="width: 100%; border-collapse: collapse; font-size: 11px; display: none;">
                <thead>
                  <tr style="text-align: left;">
                    <th style="padding: 6px 4px; width: 25px;">#</th>
                    <th style="padding: 6px 4px;">Driver</th>
                    <th style="padding: 6px 4px;">Team</th>
                    <th style="padding: 6px 4px; text-align: right;">Pts</th>
                  </tr>
                </thead>
                <tbody id="driver-tbody"></tbody>
              </table>
            </div>
            <div id="constructor-standings" class="f1-content-pane" style="display: none;">
              <div id="constructor-loading" style="text-align: center; padding: 20px; color: #9ca3af;">Loading constructor standings...</div>
              <div id="constructor-error" style="display: none; color: #ef4444; text-align: center; padding: 20px;"></div>
              <table id="constructor-table" style="width: 100%; border-collapse: collapse; font-size: 11px; display: none;">
                <thead>
                  <tr style="text-align: left;">
                    <th style="padding: 6px 4px; width: 25px;">#</th>
                    <th style="padding: 6px 4px;">Team</th>
                    <th style="padding: 6px 4px; text-align: right;">Pts</th>
                  </tr>
                </thead>
                <tbody id="constructor-tbody"></tbody>
              </table>
            </div>
          </div>
      </div>
  </div>
  </div>
<br><br><br><br><br><br><br><br>


<!-- ─── LEAGUE-SPECIFIC COLUMN (New, Initially Hidden) ────────────────────────── -->
<div class="column" id="league-specific-column" style="display: none; flex: 0 0 250px; background-color: #1f1f1f; color: #ffffff; padding: 0; overflow-x: hidden;">
    <!-- Header will be dynamically set -->
    <div id="league-specific-header" style="position: sticky; top: 0; width: 100%; height: 18px; background-color: #3c3c3c; font-family: Helvetica, Arial, sans-serif; font-size: 10px; display: flex; align-items: center; padding-left: 10px; z-index: 11; border-bottom: 1px solid #1f1f1f; font-weight: bold;">
        League Info
    </div>
    
            <!-- Main Tabs: Schedule | Standings (Stats hidden for now) -->
            <div id="main-tabs" style="display: flex; height: 18px; background-color: #2a2a2a; overflow: hidden; flex-shrink: 0;">
                <div class="main-tab active" data-main-tab="schedule" style="flex: 1; text-align: center; font-size: 10px; line-height: 18px; cursor: pointer; border-right: 1px solid #1f1f1f; background-color: #fff; color: #000; font-weight: bold;">SCHEDULE</div>
                <div class="main-tab" data-main-tab="standings" style="flex: 1; text-align: center; font-size: 10px; line-height: 18px; cursor: pointer; background-color: #2a2a2a; color: #ccc;">STANDINGS</div>
                <!-- Stats tab hidden for now - keeping functionality intact -->
                <div class="main-tab" data-main-tab="stats" style="display: none; flex: 1; text-align: center; font-size: 10px; line-height: 18px; cursor: pointer; background-color: #2a2a2a; color: #ccc;">STATS</div>
            </div>

    <!-- Schedule Tab Content (active by default) -->
    <div id="schedule-tab-content" class="main-tab-content" style="display: block; height: calc(100% - 18px); flex-direction: column;">
        <!-- Schedule Sub-Tabs (Today/Upcoming) - Full Column Width -->
        <div id="schedule-tabs" style="display: flex; height: 18px; background-color: #2a2a2a; margin-bottom: 1px; overflow: hidden; flex-shrink: 0; width: 100%;">
            <div class="schedule-tab active" data-schedule-tab="today" style="flex: 1; text-align: center; font-size: 10px; line-height: 18px; cursor: pointer; border-right: 1px solid #1f1f1f; background-color: #2a2a2a; color: #fff; border-bottom: 2px solid #fff;">Today</div>
            <div class="schedule-tab" data-schedule-tab="yesterday" style="flex: 1; text-align: center; font-size: 10px; line-height: 18px; cursor: pointer; border-right: 1px solid #1f1f1f; background-color: #2a2a2a; color: #ccc;">Yesterday</div>
            <div class="schedule-tab" data-schedule-tab="upcoming" style="flex: 1; text-align: center; font-size: 10px; line-height: 18px; cursor: pointer; background-color: #2a2a2a; color: #ccc;">Upcoming</div>
        </div>
        
        <!-- Schedule Content with padding -->
        <div style="padding: 0 0 1rem 0; flex: 1; display: flex; flex-direction: column;">
            <div id="league-schedule-today-content" class="schedule-content" style="display: block; flex: 1; overflow-y: auto;"><p style="color: #9ca3af;">Loading today's schedule...</p></div>
            <div id="league-schedule-yesterday-content" class="schedule-content" style="display: none; flex: 1; overflow-y: auto;"><p style="color: #9ca3af;">Loading yesterday's scores...</p></div>
            <div id="league-schedule-upcoming-content" class="schedule-content" style="display: none; flex: 1; overflow-y: auto;"><p style="color: #9ca3af;">Loading upcoming schedule...</p></div>
        </div>
    </div>

    <!-- Standings Tab Content (hidden by default) -->
    <div id="standings-tab-content" class="main-tab-content" style="display: none; padding: 5px; height: calc(100% - 18px); flex-direction: column; overflow-y: auto;">
        <div id="league-standings-content" style="flex: 1;"><p style="color: #9ca3af;">Loading standings...</p></div>
    </div>

    <!-- Stats Tab Content (hidden by default) -->
    <div id="stats-tab-content" class="main-tab-content" style="display: none; height: calc(100% - 18px); flex-direction: column; overflow: hidden;">
        <!-- Stats Sub-Tabs (Player/Team) -->
        <div id="stats-sub-tabs" style="display: flex; height: 18px; background-color: #000; margin-bottom: 1px; overflow: hidden; flex-shrink: 0; width: 100%;">
            <div class="stats-sub-tab active" data-stats-sub-tab="player" style="flex: 1; text-align: center; font-size: 10px; line-height: 18px; cursor: pointer; border-right: 1px solid #1f1f1f; background-color: #000; color: #fff; border-bottom: 1px solid #fff;">Player</div>
            <div class="stats-sub-tab" data-stats-sub-tab="team" style="flex: 1; text-align: center; font-size: 10px; line-height: 18px; cursor: pointer; background-color: #000; color: #fff;">Team</div>
        </div>
        
        <!-- Player Stats Content (active by default) -->
        <div id="player-stats-content" class="stats-sub-content" style="display: flex; flex: 1; height: calc(100% - 18px); overflow: hidden;">
            <!-- Left Column: Category Menu (20% width) -->
            <div id="player-category-menu" class="stats-category-menu" style="width: 20%; background-color: #1f1f1f; border-right: 1px solid #1f1f1f; overflow-y: auto; flex-shrink: 0;">
                <div class="stats-category-item active" data-category="batting" style="padding: 8px 2px; cursor: pointer; border-bottom: 1px solid #fff; background-color: #000; color: #fff; font-weight: bold; font-size: 9px; margin-bottom: 1px;">Batting</div>
                <div class="stats-category-item" data-category="pitching" style="padding: 8px 2px; cursor: pointer; background-color: #141414; color: #BFBFBF; font-size: 9px; margin-bottom: 1px;">Pitching</div>
                <div class="stats-category-item" data-category="fielding" style="padding: 8px 2px; cursor: pointer; background-color: #141414; color: #BFBFBF; font-size: 9px; margin-bottom: 1px;">Fielding</div>
                <div class="stats-category-item" data-category="advanced" style="padding: 8px 2px; cursor: pointer; background-color: #141414; color: #BFBFBF; font-size: 9px; margin-bottom: 1px;">Advanced</div>
            </div>
            
            <!-- Right Column: Stats Display (80% width) -->
            <div id="player-stats-display" class="stats-display" style="width: 80%; background-color: #000; overflow-y: auto; padding: 1rem;">
                <div id="player-stats-content-area" style="color: #9ca3af;">Player statistics will be loaded here...</div>
            </div>
        </div>
        
        <!-- Team Stats Content (hidden by default) -->
        <div id="team-stats-content" class="stats-sub-content" style="display: none; flex: 1; height: calc(100% - 18px); overflow: hidden;">
            <!-- Left Column: Category Menu (20% width) -->
            <div id="team-category-menu" class="stats-category-menu" style="width: 20%; background-color: #1f1f1f; border-right: 1px solid #1f1f1f; overflow-y: auto; flex-shrink: 0;">
                <div class="stats-category-item active" data-category="standings" style="padding: 8px 2px; cursor: pointer; border-bottom: 1px solid #fff; background-color: #000; color: #fff; font-weight: bold; font-size: 9px; margin-bottom: 1px;">Standings</div>
                <div class="stats-category-item" data-category="offense" style="padding: 8px 2px; cursor: pointer; background-color: #141414; color: #BFBFBF; font-size: 9px; margin-bottom: 1px;">Offense</div>
                <div class="stats-category-item" data-category="defense" style="padding: 8px 2px; cursor: pointer; background-color: #141414; color: #BFBFBF; font-size: 9px; margin-bottom: 1px;">Defense</div>
                <div class="stats-category-item" data-category="pitching" style="padding: 8px 2px; cursor: pointer; background-color: #141414; color: #BFBFBF; font-size: 9px; margin-bottom: 1px;">Pitching</div>
            </div>
            
            <!-- Right Column: Stats Display (80% width) -->
            <div id="team-stats-display" class="stats-display" style="width: 80%; background-color: #000; overflow-y: auto; padding: 1rem;">
                <div id="team-stats-content-area" style="color: #9ca3af;">Team statistics will be loaded here...</div>
            </div>
        </div>
    </div>

</div>


      <!-- DIVIDER BETWEEN STANDINGS AND NEWS -->
      <div class="divider"></div>


      <!-- NEWS PANEL -->
      <div class="column news" style="height: 100%;">
        <!-- News header -->
        <div class="news-header" style="width: 100%; height: 18px;
            background-color: #3c3c3c; font-family: Helvetica, Arial, sans-serif;
            font-size: 10px; display: flex; align-items: center;
            padding-left: 1px; z-index: 11; border-bottom: 1px solid #1f1f1f;">News</div>

        <!-- Home News Section (Headlines + Breaking) -->
      <div id="news-Home" class="content-section" style="display: block; height: calc(100% - 18px);">
  <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
    <!-- Headlines Section -->
    <div class="news-section headlines-section" style="flex: 0 0 60%; min-height: 0;">
      <div class="news-section-header">Headlines</div>
      <div id="headlines-tabs">
        <div class="headlines-tab active" data-source="espn">ESPN</div>
        <div class="headlines-tab" data-source="cbs">CBS</div>
        <div class="headlines-tab" data-source="yahoo">Yahoo</div>
        <div class="headlines-tab" data-source="fox">FOX</div>
      </div>
      <div class="news-feed-content" id="espn-feed" style="display: block;">Loading ESPN...</div>
      <div class="news-feed-content" id="cbs-feed" style="display:none;">Loading CBS...</div>
      <div class="news-feed-content" id="yahoo-feed" style="display:none;">Loading Yahoo...</div>
      <div class="news-feed-content" id="fox-feed" style="display:none;">Loading FOX...</div>
    </div>
    <!-- Breaking/Fantasy/Transactions Tabs Section -->
    <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
      <div class="news-section-header breaking-tabs-header">
        <span class="news-tab active" data-tab="breaking">Breaking</span>
        <span class="news-tab" data-tab="fantasy">Fantasy</span>
        <span class="news-tab" data-tab="transactions">Transactions</span>
      </div>
      <div class="news-feed-content" id="breaking-feed" style="display: block;">Loading breaking news...</div>
      <div class="news-feed-content" id="fantasy-feed" style="display:none;">Loading fantasy news...</div>
      <div class="news-feed-content" id="transactions-feed" style="display:none;">Loading transactions...</div>
    </div>
  </div>
</div>

      <div id="news-MLB" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
       
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
               
                <div id="headlines-tabs-MLB" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/Kcftj40UrmoGhLBA.xml">MLB.com</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/HOpwhDoXxePVbZxP.xml">ESPN</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/Bv6N7qiA79eXbSl6.xml">CBS Sports</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/BKInO41JsrUscMDQ.xml">Yahoo</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/unWxzeL5zRi6VjgR.xml">FOX Sports</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/h2rZtVYvCl4WpXQE.xml">FanGraphs</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/qGFj8TG2O53TYIL3.xml">The Athletic</div>
                </div>
               
                <div id="headlines-content-MLB" class="news-feed-content" style="width: 80%; overflow-y: auto;">
                   
                </div>
            </div>
        </div>
       
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/AYtjYuHSzf8VXPWV.xml">Breaking</span>
                <span class="news-tab" data-tab="fantasy" data-url="YOUR_MLB_FANTASY_FEED_URL">Fantasy</span>
                <span class="news-tab" data-tab="transactions" data-url="YOUR_MLB_TRANSACTIONS_FEED_URL">Transactions</span>
            </div>
            <div class="news-content-pane" id="breaking-content-MLB" style="display: block;">
            </div>
            <div class="news-content-pane" id="fantasy-content-MLB" style="display:none;">
            </div>
            <div class="news-content-pane" id="transactions-content-MLB" style="display:none;">
            </div>
        </div>
    </div>
</div>

<div id="news-NBA" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-NBA" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/gpNdeo4WRun54WuS.xml">NBA.com</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/pbw0uEDOop5lPZ1h.xml">ESPN</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/XNu5yCjXjSTjFNuz.xml">CBS Sports</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/Xc90gEP7aCpQkKAc.xml">Yahoo</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/0MaiPBu2UKvcQmyT.xml">SI</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/bGCDWYzMpS4kpEEJ.xml">FOX Sports</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/k6Vxs5GaPOehD9B3.xml">B/R</div>
					
                </div>
                <div id="headlines-content-NBA" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/akV2j729WtUvltyb.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-NBA" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-NFL" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-NFL" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/RzsFiWRkJWt232Z1.xml">NFL.com</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/cexYuRoRAMSoUAp8.xml">ESPN</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/YUKCB1afohjvJMle.xml">PFT</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/PlvW7vqF4AaGbwcp.xml">CBS Sports</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/KoszNpQLJ70ZBJbs.xml">SI</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/yQjCNVjNGrK8PYed.xml">FOX Sports</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/LCbkYBU74yt9AnT5.xml">B/R</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/rHWxXQ9YaXdlGVjA.xml">Yahoo</div>
                </div>
                <div id="headlines-content-NFL" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/kjurR9A5jgpHvsLg.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-NFL" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-NHL" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-NHL" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/tjqR23Xwa5us4EGS.xml">NHL.com</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/aEOH2tj5bfjq4oJd.xml">ESPN</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/xtqmDS6UnTyXSmXG.xml">CBS Sports</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/Zf7Ng96ruXO870Ee.xml">The Hockey Writers</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/6gjSXkILFAiwYPLU.xml">Yahoo</div>
      				<div class="headlines-tab" data-url="https://rss.app/feeds/V79dVmqWDC7pLACZ.xml">The Hockey News</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/6DIuDmmR4diUZR4q.xml">The Athletic</div>
					
          
				</div>
                <div id="headlines-content-NHL" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/0piSZjcFTmeW7hqi.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-NHL" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-Soccer" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-Soccer" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab" data-url="https://rss.app/feeds/3SZSbvRR7GXi7Al1.xml">ESPN FC</div>
					<div class="headlines-tab active" data-url="https://rss.app/feeds/SBZfeZPSsLT2mwmU.xml">OneFootball</div>
					<div class="headlines-tab active" data-url="https://rss.app/feeds/qKDoR3HZOMRmExUP.xml">Sports Mole</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/tWKu85yTZrmms6lo.xml">Goal</div>
					<div class="headlines-tab active" data-url="https://rss.app/feeds/SlUe5H1aOykHQcvX.xml">Yahoo</div>
					<div class="headlines-tab active" data-url="https://rss.app/feeds/7sTylsAUGavU2YDz.xml">Sky Sports</div>
					<div class="headlines-tab active" data-url="https://rss.app/feeds/B9IZq10WgLEwHyYf.xml">The Guardian</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/KIxs5SCBkVuAWcRr.xml">BBC</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/f5rbTpdVjq93AlTY.xml">World Soccer Talk</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/UM3B0Vem8qh04dDU.xml">AS</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/W5qj2Lq2skC4hTyn.xml">Transfermarkt</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/bXOgyqHWCvZHvUmF.xml">FourFourTwo</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/10xrZLK2Mn4xhAqJ.xml">CBS Sports</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/joZlHdOrkZ6ijBM8.xml">FOX Sports</div>
                </div>
                <div id="headlines-content-Soccer" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/3V06VrWkV19SDcqR.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-Soccer" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-UEFAChampionsLeague" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-UEFAChampionsLeague" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab" data-url="https://rss.app/feeds/yB1knLblnebjjIez.xml">Google News</div>
					<div class="headlines-tab active" data-url="https://rss.app/feeds/3zS8zHZWlrY4F0TM.xml">SI</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/NO1HAlGkT9Ya9p34.xml">The Athletic</div>
                </div>
                <div id="headlines-content-UEFAChampionsLeague" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/j3EAnbrpQMEYzW57.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-UEFAChampionsLeague" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-PremierLeague" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-PremierLeague" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
					<div class="headlines-tab" data-url="https://rss.app/feeds/9rFQ7zMHhTXb4Mxs.xml">BBC</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/CgpGWf4RQSblPcSP.xml">SI</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/OlgI95YoXAeS1Lyb.xml">OneFootball</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/qVMKN8SmPBqcCH7z.xml">Sports Mole</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/IrtseC3G2pfQi6Va.xml">Sky</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/4ztlqsjqgVdJj7Gz.xml">Football Talk</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/3J967vogi1qGdK1Y.xml">Sporting News</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/co5skijSzgAW0vTJ.xml">Daily Mail</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/JSvDlnImnrDjDgsk.xml">talkSPORT</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/30ZdeDXrftk47uLL.xml">SPORTbible</div>
					<div class="headlines-tab active" data-url="https://rss.app/feeds/PBkEtFlIayIUTcNp.xml">TEAMTalk</div>
                </div>
                <div id="headlines-content-PremierLeague" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/V6GJiuM6jBXVG34K.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-PremierLeague" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-MLS" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-MLS" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/7uKlukxNjjXJ2Ajl.xml">SI</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/XgOB7BUJbxy6FsjC.xml">MLSSoccer.com</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/rAadgaUcXJa3grIV.xml">Google News</div>
                    
                </div>
                <div id="headlines-content-MLS" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/iuBiYyHPmlifaUUK.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-MLS" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-LaLiga" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-LaLiga" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/3QnoBYzr3leLRwZf.xml">SI</div>
					 <div class="headlines-tab" data-url="https://rss.app/feeds/UnTi09biy7NcbQpv.xml">Sports Mole</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/Oj48mcyrNfIxbqp9.xml">Google News</div>
                </div>
                <div id="headlines-content-LaLiga" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/t8z976udlBJCMLSW.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-LaLiga" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-SerieA" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-SerieA" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/64sPxSy8RzyuVNFy.xml">Football Italia</div>
					 <div class="headlines-tab" data-url="https://rss.app/feeds/NeOHPCIlHddJXJCU.xml">Cult of Calcio</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/7YSOeJAQ5WMbRdsS.xml">OneFootball</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/fyCV7KEfBBxSFsOL.xml">Yahoo</div>
                   
                </div>
                <div id="headlines-content-SerieA" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/HSwo9xgOL1OUFqS0.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-SerieA" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-Bundesliga" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-Bundesliga" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/zIPPZ5Zh9GDpvIbV.xml">Bulinews</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/ixvULiUvb7Hm3fDx.xml">GGFN</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/fg5UIrrq1YikBxyg.xml">Bundesliga.com</div>
                
                </div>
                <div id="headlines-content-Bundesliga" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/qeqYXeDvgq5bpYsL.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-Bundesliga" style="display: block;"></div>
        </div>
    </div>
</div>

		  <div id="news-LigaMX" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section ligamx-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="ligamxtabs-LigaMX" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/tr10VModrXb2evce.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/Eh9IrBhQ1Pk3MxVu.xml">Breaking</div>
        <div class="headlines-tab" data-source="reddit" data-url="https://rss.app/feeds/o3KVLBimGj35TqzR.xml">Reddit</div>
      </div>

      <div class="news-feed-content" id="headlines-feed-LigaMX" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-LigaMX" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="reddit-feed-LigaMX" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>

<div id="news-FACup" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section" style="flex: 1 1 auto; min-height: 0;">
            <div id="news-content-FACup" class="news-feed-content" style="overflow-y: auto; height: 100%;">
                <div class="news-section-header">
                    <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/6hu4o6gj1agGCz5i.xml">Breaking</span>
                </div>
                <div class="news-content-pane" id="breaking-content-FACup" style="display: block;"></div>
                </div>
        </div>
    </div>
</div>

<div id="news-NWSL" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section nwsl-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="nwsltabs-NWSL" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/tnA7WHOi3hNDP2Wr.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/PE7NGL6ftSREkzv9.xml">Breaking</div>
        <div class="headlines-tab" data-source="reddit" data-url="https://rss.app/feeds/HL9rA42ELIkqWXJg.xml">Reddit</div>
      </div>

      <div class="news-feed-content" id="headlines-feed-NWSL" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-NWSL" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="reddit-feed-NWSL" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>

<div id="news-Ligue1" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section ligue1-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="ligue1tabs-Ligue1" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/tbxA99undrBg8j4I.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/AdN94t2aMmFNKpiW.xml">Breaking</div>
        <div class="headlines-tab" data-source="reddit" data-url="https://rss.app/feeds/UNtqy55sZPAGDxWp.xml">Reddit</div>
      </div>

      <div class="news-feed-content" id="headlines-feed-Ligue1" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-Ligue1" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="reddit-feed-Ligue1" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>

<div id="news-UEFAEuropaLeague" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section uefaeuropaleague-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="uefaeuropaleaguetabs-UEFAEuropaLeague" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/tw7ijzsLkAnmByMf.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/Y86rdhcYGEJTzVVE.xml">Breaking</div>
      </div>

      <div class="news-feed-content" id="headlines-feed-UEFAEuropaLeague" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-UEFAEuropaLeague" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>

<div id="news-UEFAConferenceLeague" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section uefaconferenceleague-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="uefaconferenceleaguetabs-UEFAConferenceLeague" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/tpoJCJ6SHNu5XMoG.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/0zeKHWCVNtBCrCro.xml">Breaking</div>
      </div>
      <div class="news-feed-content" id="headlines-feed-UEFAConferenceLeague" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-UEFAConferenceLeague" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>

<div id="news-FormulaOne" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-FormulaOne" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/JVcUSNygCvK6E5WZ.xml">F1.com</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/Pii5mbx6w0A3lFW9.xml">Racer</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/1RmEBIvrTB2Vl8wg.xml">Motorsport</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/4gKjQaVgX2DJolme.xml">The Race</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/FTRMdb2vszxBak3x.xml">Autosport</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/nkkpJtqSSgCLnGGt.xml">Planet F1</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/nhdoUlCkVjA4oXEH.xml">RaceFans</div>
				
                </div>
                <div id="headlines-content-FormulaOne" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/zRogbCPNliFNNTuM.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-FormulaOne" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-NCAAF" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-NCAAF" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/Z2rHcU1BGE8RLayI.xml">ESPN</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/Zzvx41Fx8M8WXUS1.xml">FOX Sports</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/1wcMh76GcHSPwTvk.xml">CBS Sports</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/cYgsxfZK9RmqKiOn.xml">Yahoo</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/L3knSpnVPuEqu9F3.xml">On3</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/LsKtD2ijrBKLHTPy.xml">SDS</div>
					<div class="headlines-tab" data-url="https://bleacherreport.com/college-football">B/R</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/TC8CR6Epre8sOBbW.xml">SI</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/ZX6NqXnTRPsqJl24.xml">Sporting News</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/d2PbmQcxqRMOPRvs.xml">CFN</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/SQahLIzekjAsW3lk.xml">247 Sports</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/ydzB00a4yYWWhOJE.xml">The Athletic</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/tBrt5dpIhevVbeQi.xml">Reddit</div>
                </div>
                <div id="headlines-content-NCAAF" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/O8juJbxSctWCFqdV.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-NCAAF" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-PGATour" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-PGATour" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
					<div class="headlines-tab" data-url="https://rss.app/feeds/tsB8keuq7AkVMhlt.xml">Headlines</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/Kk2DP7BQ6R63genW.xml">SI</div>
                    <div class="headlines-tab active" data-url="https://www.golfdigest.com/golf-news">Golf Digest</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/yoYhJTH3khDR6VnA.xml">Golf Monthly</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/SBEwIpFRnxpFz5yO.xml">GolfWRX</div>
 					<div class="headlines-tab" data-url="https://rss.app/feeds/tllqhjMEqKlOTnp9.xml">Golfweek</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/PGlnIglwoK57BFgx.xml">PGATour.com</div>
                </div>
                <div id="headlines-content-PGATour" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/R0LMNrxS5mPorbsV.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-PGATour" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-UFC" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-UFC" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/DZNQ6V2829Gsq89j.xml">MMA Junkie</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/6KutJNC4K8DelGwZ.xml">MMA Fighting</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/sZGhLnyeUeeeDnBs.xml">Tapology</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/C3NmUDHJr8cWHBCk.xml">UFC.com</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/X39lxMdIQOjTjP4s.xml">MMA-Core</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/2NV0LB8BpoemNq2N.xml">Sherdog</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/9HbNO7koG4FRO0EZ.xml">MMA Mania</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/52JoNIj0uJyAO8Ro.xml">SI</div>
                </div>
                <div id="headlines-content-UFC" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/II7WkAEfi65q8OMI.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-UFC" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-Boxing" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-Boxing" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/aScu4PsqcyQ1kfFt.xml">Ring</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/FpEL1AAFV73VieeD.xml">Boxing Scene</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/TBwd9L3O8cQywuxX.xml">Boxing News 24</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/xBIj1RcHaBcd7WfJ.xml">Boxing 24/7</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/i1VCLI9hScfbZjgu.xml">Bad Left Hook</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/t5VOWN5DnuNwIVYF.xml">Headlines</div>

					

                </div>
                <div id="headlines-content-Boxing" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/8UNhLRsk0v8buOUz.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-Boxing" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-NASCARCupSeries" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-NASCARCupSeries" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/xeURjeTipf28mKLG.xml">Motorsport</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/7s14Wy95VNsBu7cz.xml">Jayski</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/nVgWip8Buc8cf2Hz.xml">Racing Experts</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/tYnJ3vf80OY9CXes.xml">Headlines</div>
                </div>
                <div id="headlines-content-NASCARCupSeries" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/vOF2I7lq3n3IsV8K.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-NASCARCupSeries" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-Tennis" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-Tennis" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/77st0I3EaI2gj5hS.xml">Tennis.com</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/8G5VEs3jgZKwLro8.xml">Tennis Gazette</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/SFGaRWY1jKqWalZ5.xml">ESPN</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/svblOw3GOcN9k9yE.xml">Yahoo</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/STKyz5OXGhXnVMxr.xml">BBC</div>
                </div>
                <div id="headlines-content-Tennis" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/Nh0zQXRLhhvfmuTh.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-Tennis" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-WNBA" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-WNBA" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/SPK3iRYrr92qDN2x.xml">Yardbarker</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/nYXiP4BC0oLybtz7.xml">FOX Sports</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/ZE2N0SqE5GuqHZpU.xml">SI</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/ajdh1dv5KEX5WqD5.xml">Reddit</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/6limDrwPcbr0FTHr.xml">Yahoo</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/f5T3RefZNcbsCZa6.xml">B/R</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/9gpVpTsmLKCeYnBu.xml">The Athletic</div>
                </div>
                <div id="headlines-content-WNBA" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/Eaaaqyki6E6nnMZR.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-WNBA" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-LIVGolf" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section livgolf-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="livgolftabs-LIVGolf" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/teYHPC2ZpUGeMBx5.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/InHgRAqAOeKlilq8.xml">Breaking</div>
      </div>
      <div class="news-feed-content" id="headlines-feed-LIVGolf" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-LIVGolf" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>

<div id="news-IndyCar" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section indycar-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="indycarrtabs-IndyCar" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/tBzOR3X3d0NpmoAA.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/Zo7JsQDXIT8D0pCD.xml">Breaking</div>
        <div class="headlines-tab" data-source="reddit" data-url="https://rss.app/feeds/8qBnW4yImPpMqMDD.xml">Reddit</div>
      </div>
      <div class="news-feed-content" id="headlines-feed-IndyCar" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-IndyCar" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="reddit-feed-IndyCar" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>

<div id="news-NCAAM" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-NCAAM" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
                    <div class="headlines-tab active" data-url="https://rss.app/feeds/tZc6gJ6RpwkMyxaI.xml">Headlines</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/fUqOHZ8e4EOUcVP0.xml">ESPN</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/2JdMuTjfABmhXGEQ.xml">CBS Sports</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/vf2zYxzTRTJ0llPk.xml ">Reddit</div>
                </div>
                <div id="headlines-content-NCAAM" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/1miuV1gDF41iBCUm.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-NCAAM" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-NCAAW" class="content-section" style="display: none; height: calc(100% - 18px);"> 
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;"> 
        <div class="news-section" style="flex: 1 1 auto; min-height: 0;"> 
            <div id="news-content-NCAAW" class="news-feed-content" style="overflow-y: auto; height: 100%;"> 
                <div class="news-section-header"> 
                    <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/tOYU1riYpjBIE6yi.xml">Headlines</span> 
                </div> 
                <div class="news-content-pane" id="breaking-content-NCAAW" style="display: block;"></div> 
            </div> 
        </div> 
    </div> 
</div>

<div id="news-NCAABaseball" class="content-section" style="display: none; height: calc(100% - 18px);"> 
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;"> 
        <div class="news-section" style="flex: 1 1 auto; min-height: 0;"> 
            <div id="news-content-NCAABaseball" class="news-feed-content" style="overflow-y: auto; height: 100%;"> 
                <div class="news-section-header"> 
                    <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/t7vZR372K7n5ceeg.xml">Headlines</span> 
                </div> 
                <div class="news-content-pane" id="breaking-content-NCAABaseball" style="display: block;"></div> 
            </div> 
        </div> 
    </div> 
</div>

<div id="news-NCAASoftball" class="content-section" style="display: none; height: calc(100% - 18px);"> 
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;"> 
        <div class="news-section" style="flex: 1 1 auto; min-height: 0;"> 
            <div id="news-content-NCAASoftball" class="news-feed-content" style="overflow-y: auto; height: 100%;"> 
                <div class="news-section-header"> 
                    <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/tRKTEhHvoInenyd4.xml">Headlines</span> 
                </div> 
                <div class="news-content-pane" id="breaking-content-NCAASoftball" style="display: block;"></div> 
            </div> 
        </div> 
    </div> 
</div>

<div id="news-MotoGP" class="content-section" style="display: none; height: calc(100% - 18px);">
    <div class="news-main-container" style="display: flex; flex-direction: column; height: 100%;">
        <div class="news-section headlines-section" style="flex: 1 1 auto; min-height: 0;">
            <div class="news-section-header">Headlines</div>
            <div style="display: flex; height: calc(100% - 18px);">
                <div id="headlines-tabs-MotoGP" class="headlines-tabs-column" style="width: 20%; flex-shrink: 0;">
					<div class="headlines-tab active" data-url="https://rss.app/feeds/a5gHM6AQ6OaVlU3y.xml">MotoGP News</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/MHL7sSU4Y6MJK5gJ.xml">Autosport</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/Dw91HiLTs9sO1Ghv.xml">Motorsport</div>
                    <div class="headlines-tab" data-url="https://rss.app/feeds/WO8Gk2ceUxexrwlh.xml">Reddit</div>
					<div class="headlines-tab" data-url="https://rss.app/feeds/XvexqCjSQ9YuCKUH.xml">MotoGP.com</div>
                </div>
                <div id="headlines-content-MotoGP" class="news-feed-content" style="width: 80%; overflow-y: auto;"></div>
            </div>
        </div>
        <div class="news-section breaking-section" style="flex: 1 1 40%; min-height: 0;">
            <div class="news-section-header breaking-tabs-header">
                <span class="news-tab active" data-tab="breaking" data-url="https://rss.app/feeds/w2ntdqvo8uCoR01z.xml">Breaking</span>
            </div>
            <div class="news-content-pane" id="breaking-content-MotoGP" style="display: block;"></div>
        </div>
    </div>
</div>

<div id="news-LPGATour" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section lpgatour-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="lpgatourtabs-LPGATour" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/tqz9SwQPuclR1mSF.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/0afVGov5MVxxBF7B.xml">Breaking</div>
      </div>
      <div class="news-feed-content" id="headlines-feed-LPGATour" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-LPGATour" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>

<div id="news-TrackAndField" class="content-section" style="display:none; height:100%; overflow:hidden;">
  <div class="news-main-container" style="display:flex; flex-direction:column; height:100%; min-height:0;">
    <div class="news-section trackandfield-headlines-section" style="display:flex; flex-direction:column; flex:1 1 auto; min-height:0;">
      <div id="trackandfieldtabs-TrackAndField" class="headlines-tabs" style="display:flex; border-bottom:1px solid #374151; flex:0 0 auto;">
        <div class="headlines-tab active" data-source="headlines" data-url="https://rss.app/feeds/wR4WbSpa3kRgWcdl.xml">Headlines</div>
        <div class="headlines-tab" data-source="breaking" data-url="https://rss.app/feeds/VqavgJOoX0LKkfkb.xml">Breaking</div>
      </div>
      <div class="news-feed-content" id="headlines-feed-TrackAndField" style="display:block; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
      <div class="news-feed-content" id="breaking-feed-TrackAndField" style="display:none; flex:1 1 0; min-height:0; overflow:auto; position:relative;"></div>
    </div>
  </div>
</div>
	  </div>

      <!-- DIVIDER BETWEEN NEWS PANEL AND SOCIAL PANEL -->
      <div class="divider"></div>

      <!-- SOCIAL PANEL -->
      <div class="column social" style="padding: 0; margin: 0;">
        <div
          id="socialHeader"
          style="position: sticky; top: 0; width: 100%; height: 18px; background-color: #3c3c3c; font-family: Helvetica, Arial, sans-serif; font-size: 10px; display: flex; align-items: center; padding-left: 10px; z-index: 11;"
        ><strong>Social</strong>
        </div>
        <!-- Single dynamic container for social feeds -->
       <div id="social-feed-container"></div>
</div>

        <!-- DIVIDER -->
        <div class="divider"></div>

        <!-- VIDEOS COLUMN -->
        <div class="column videos-column" id="videos-column" style="flex: 0 0 276px; background-color: #000000;">
      <div id="videos-container" style="display: block;">
        <div id="videos-header" style="
            position: sticky; top: 0; width: 100%; height: 18px;
            background-color: #3c3c3c; font-family: Helvetica, Arial, sans-serif;
            font-size: 10px; display: flex; align-items: center;
            padding-left: 1px; z-index: 11; border-bottom: 1px solid #1f1f1f;
          ">
          <strong>Videos</strong>
        </div>

            <!-- Videos tabs (only shown for pages with two tabs) -->
            <div id="videos-tabs" style="display: none; height: 18px; background-color: #2a2a2a; position: sticky; top: 18px; z-index: 10;">
          <div class="videos-tab active" data-tab="highlights">HIGHLIGHTS</div>
          <div class="videos-tab" data-tab="all-videos">ALL VIDEOS</div>
        </div>

        <!-- Videos content -->
        <div id="videos-content" class="videos-content" style="display: block;">
          <div id="videosWrapper">
            <div id="videosLoading" class="loading-indicator hidden">
              <svg class="loading-spinner" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <p class="loading-text">Loading videos...</p>
            </div>
            <div id="videosErrorMessage" class="error-message hidden" role="alert">
              <strong>Error!</strong>
              <span id="videosErrorText"></span>
            </div>
            <div id="dynamicVideosContent"></div>
          </div>
        </div>
      </div>
</div>

 <!-- DIVIDER BETWEEN SOCIAL PANEL AND MEDIA CENTER PANEL -->
      <div class="divider"></div>

    <!-- Mobile Toolbar (hidden by default) -->
    <!-- Mobile Bottom Toolbar -->
    <div id="mobile-bottom-toolbar">
        <button class="mobile-toolbar-btn" id="mobile-league-btn">
            <span>ALL</span>
            <span style="font-size: 10px;">▲</span>
        </button>
        <button class="mobile-toolbar-btn active" id="mobile-news-btn">News</button>
        <button class="mobile-toolbar-btn" id="mobile-social-btn">Social</button>
        <button class="mobile-toolbar-btn" id="mobile-games-btn">Games</button>
        <button class="mobile-toolbar-btn" id="mobile-videos-btn">Videos</button>
    </div>

    <!-- Mobile Menu Overlay (hidden on desktop) -->
    <div id="mobile-menu-overlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.8); z-index: 2000; transform: translateX(-100%); transition: transform 0.3s ease;">
        <div id="mobile-menu-content" style="width: 100%; height: 100%; background-color: #151515; overflow-y: auto; padding: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px;">
                <h2 style="color: #00ff00; margin: 0;">Select League</h2>
                <button id="mobile-menu-close" style="background: none; border: none; color: #ccc; font-size: 24px; cursor: pointer;">&times;</button>
            </div>
            <div id="mobile-menu-list" style="color: #ccc;">
                <!-- Menu items will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Mobile League Selection Menu -->
    <div id="mobile-league-menu">
        <div class="menu-content">
            <button class="close-btn">&times;</button>
            <div class="menu-header">Select League</div>
            <ul class="league-list" id="mobile-league-list">
                <!-- Will be populated by JavaScript -->
            </ul>
        </div>
    </div>

      

        
<!-- Overlay -->
<div id="fullTableOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.95); z-index: 1000; overflow: auto;">
  <div style="max-width: 1000px; margin: 40px auto; background-color: #fff; padding: 20px; color: black; border-radius: 10px;">
    <button style="float: right; margin-top: -10px; margin-right: -10px; background: none; border: none; font-size: 20px; cursor: pointer; color: #000;" onclick="document.getElementById('fullTableOverlay').style.display = 'none';">&times;</button>
    <h2 style="text-align: center;">Full Premier League Table</h2>
    <table id="fullTable" style="width: 100%; border-collapse: collapse; font-size: 12px; background-color: #fafaf9; color: #000;">
      <thead>
        <tr>
          <th>Pos</th><th>Team</th><th>Played</th><th>Won</th><th>Drawn</th><th>Lost</th><th>GF</th><th>GA</th><th>GD</th><th>Pts</th>
        </tr>
      </thead>
      <tbody id="fullBody"></tbody>
    </table>
  </div>
</div>



<script src="https://widget.rss.app/v1/feed.js" async></script>

  <script>
 // Map of league to an array of RSS.app feed IDs (for cycling)
 const rssFeeds = {
   Home: [
     "_dQv2W26Lxax1n3sC",
     "4kPf5TwmnRhc9JOI",
"DxhOq5IvdSWmuCOQ"
     // Add more Home feeds here if needed
   ],
   MLB: ["ujM61O6ZzDQ7sOrb"],
   NBA: ["KDHaD7kKFdoZKNKv"],
   NFL: ["uvYTDMyn9nIYp068"],
   NHL: ["FkhRHZBH8WxhSWqp"],
   UFC: ["qzbgRcN4Qbr7VV0a"],
   Boxing: ["F2n8AUgzsvLsTadA"],
   NASCARCupSeries: ["AHhwgLGIFW2bn8zL"],
   Tennis: ["VeaGgNXCdeNdgl5l"],
   WNBA: ["DDsbnQvTkj4SNtgY"],
   LIVGolf: ["4lGhahA1b9JU9QZw"],
   IndyCar: ["oP6JlgisMb451EVK"],
   NCAAM: ["nSxcJn3Ke9aIPqkw"],
   NCAAW: ["8V2qb8WK1CMdeBfd"],
   NCAABaseball: ["6wO4p6CY027kWz5C"],
   NCAASoftball: ["WhV6lzzXj1FYOxln"],
   MotoGP: ["tNL3DAMLhpRv30tg"],
   LPGATour: ["MfbotBtAVnTL3I8j"],
   UEFAChampionsLeague: ["UMleWQY5zVMDG3RE"],
   PremierLeague: ["d972MWUX8N4NiXWc"],
   MLS: ["J2tGf8v6qaD6GjFC"],
   Bundesliga: ["UyGDFP6qD7OQBkAg"],
   LaLiga: ["8ZkcLZl1mdrw2loE"],
   SerieA: ["vFegYItzKVnhgmre"],
   Soccer: ["S2jMmGyBQoDlvZ4D"],
   FACup: ["Lyr6iaRy8Fq04PKN"],
   LigaMX: ["jak4RrwNxI4UyoHb"],
   NWSL: ["wL801782ohBuXGyb"],
   Ligue1: ["2yFpSRvAMKYuQUZV"],
   UEFAEuropaLeague: ["p3fm4LjBWgp1WWr1"],
   UEFAConferenceLeague: ["9ThCZix939tiPtXy"],
   FormulaOne: ["8CRDFN299eMRIrYT"],
   NCAAF: ["MgdJ7SfrtcBRmv21"],
   PGATour: ["cySoiRoRnUqrXnoa"],
   TrackAndField: ["hcIJ3xkcewSGD4Yq"]
 };

 // Track which feed is currently loaded for each section
 let currentFeedSection = null;

 // Get the next feed ID for a section, cycling through available feeds
 function getNextFeedId(section) {
   const feeds = rssFeeds[section];
   if (!feeds || feeds.length === 0) return null;
   const key = "rssapp_feed_index_" + section;
   let idx = parseInt(localStorage.getItem(key) || "0", 10);
   idx = (idx + 1) % feeds.length;
   localStorage.setItem(key, idx);
   return feeds[idx];
 }

 function loadSocialFeed(section) {
   const container = document.getElementById("social-feed-container");
   if (!container) return;
   if (currentFeedSection === section) return;
   container.innerHTML = "";
   const feedId = getNextFeedId(section);
   if (feedId) {
     const feedTag = document.createElement("rssapp-feed");
     feedTag.setAttribute("id", feedId);
     container.appendChild(feedTag);

     // Remove any previous RSS.app script
     const oldScript = container.querySelector('script[data-rssapp]');
     if (oldScript) oldScript.remove();

     // Add the RSS.app script dynamically
     const script = document.createElement("script");
     script.src = "https://widget.rss.app/v1/feed.js";
     script.async = true;
     script.setAttribute('data-rssapp', 'true');
     container.appendChild(script);
   } else {
     container.innerHTML =
       "<div style='padding: 10px; font-size: 12px;'>No social feed available for this section.</div>";
   }
   currentFeedSection = section;
 }

 document.addEventListener("DOMContentLoaded", () => {
   // Load default feed (Home) on page load
   loadSocialFeed("Home");

   // Bind lazy loading to menu item clicks
   document.querySelectorAll("#menuList li[data-section]").forEach(item => {
     item.addEventListener("click", () => {
       const section = item.dataset.section;
       currentFeedSection = null; // Reset so a new feed loads
       loadSocialFeed(section);
     });
   });
 });
</script>

      <script>
        function showDiscussionSection(section) {
 // Hide all discussion content sections
 document.querySelectorAll("#discussion-panel .content-section").forEach(el => {
   el.style.display = "none";
 });
 // Show the discussion section for the given menu item
 const target = document.getElementById("discussion-" + section);
 if (target) {
   target.style.display = "block";
 }
}
      </script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
        // --- GRAB ELEMENTS FOR COLUMN SWITCHING ---
        const gamesColumn = document.getElementById('games-column');
        const leagueSpecificColumn = document.getElementById('league-specific-column');
        const f1Content = document.getElementById('f1-column-content');
        const gamesContent = document.getElementById('tv-listings-container');
        

        // --- NEW: FALLBACK URLs FOR THE HOME PAGE ---
        const HOME_PAGE_FEEDS = {
            breaking: "https://rss.app/feeds/XcFXtVdyCBGtIC6O.xml",
            fantasy: "https://fantasynews.cbssports.com/rss/headlines/",
            transactions: "https://www.espn.com/espn/rss/mlb/news"
        };

        // Helper function to fetch and render an XML feed
        function fetchFeed(containerSelector, feedUrl) {
            const container = document.querySelector(containerSelector);
            if (!container) return;
            // Display loading message
            container.innerHTML = '<p style="padding: 10px; color: #9ca3af;">Loading feed...</p>';
            fetch(feedUrl)
                .then(res => res.text())
                .then(str => {
                    const parser = new DOMParser();
                    const xml = parser.parseFromString(str, "application/xml");
                    const items = Array.from(xml.querySelectorAll("item"));
                    if (items.length > 0) {
                        const ul = document.createElement("ul");
                        ul.style.margin = "0";
                        ul.style.padding = "0";
                        ul.style.listStyle = "none";
                        items.forEach(item => {
                            const title = item.querySelector("title")?.textContent || "No title";
                            const link = item.querySelector("link")?.textContent || "#";
                            const li = document.createElement("li");
                            li.style.marginBottom = "0.5em";
                            const a = document.createElement("a");
                            a.href = link;
                            a.target = "_blank";
                            a.textContent = title;
                            li.appendChild(a);
                            ul.appendChild(li);
                        });
                        container.innerHTML = "";
                        container.appendChild(ul);
                        ul.querySelectorAll("a").forEach(link => {
                            link.addEventListener("click", () => {
                                link.classList.add("clicked");
                            });
                        });
                    } else {
                        container.innerHTML = "<p style='padding: 10px;'>No items found in feed.</p>";
                    }
                })
                .catch(error => {
                    console.error("Error loading feed:", error);
                    container.innerHTML = "<p style='padding: 10px; color: #ef4444;'>Error loading feed.</p>";
                });
        }

        // --- Initial Feed Loads for Home Page (Headlines) ---
        const feedMap = {
            espn: "https://www.espn.com/espn/rss/news",
            cbs: "https://rss.app/feeds/qQ90C7XC0oUECOLP.xml",
            yahoo: "https://rss.app/feeds/OvSpAK6PF8gmF37d.xml",
            fox: "https://rss.app/feeds/gqwmnxZNc8bSqdto.xml"
        };
        Object.entries(feedMap).forEach(([source, url]) => {
            fetchFeed(`#${source}-feed`, url);
        });

        // --- Main Menu and Page Switching Logic ---
        let selectedSection = "Home";
        document.querySelectorAll("#menuList li").forEach(item => {
            item.addEventListener("click", e => {
                if (item.classList.contains("spacer-line") || item.classList.contains("soccer-more-toggle") || item.querySelector("strong")) {
                    e.stopPropagation();
                    return;
                }
                e.stopPropagation();
                
                // Scroll to top when navigating to a new page
                window.scrollTo(0, 0);
                
                // Scroll all columns to top
                document.querySelectorAll('.column').forEach(col => {
                    col.scrollTop = 0;
                });
                
                if (item.dataset.section) {
                    selectedSection = item.dataset.section;
                }
                document.querySelectorAll("#menuList li[data-section]").forEach(li => li.classList.remove("selected"));
                item.classList.add("selected");
                const section = item.dataset.section;

                if (section === 'Home') {
                    gamesColumn.style.display = 'block';
                    leagueSpecificColumn.style.display = 'none';
                    gamesContent.style.display = 'block';
                    f1Content.style.display = 'none';

                    // Clear LIVE filter and ensure TODAY tab is active when navigating to Home page
                    const liveFilter = document.getElementById('live-filter-toggle');
                    if (liveFilter && liveFilter.classList.contains('active')) {
                        liveFilter.classList.remove('active');
                    }
                    
                    const todayTab = document.querySelector('.games-tab[data-tab="today"]');
                    if (todayTab && !todayTab.classList.contains('active')) {
                        todayTab.click();
                    }

                    const espnTab = document.querySelector('#headlines-tabs .headlines-tab[data-source="espn"]');
                    if (espnTab) {
                        espnTab.click();
                    }
                } else if (section === 'FormulaOne') {
                    gamesColumn.style.display = 'block';
                    leagueSpecificColumn.style.display = 'none';
                    gamesContent.style.display = 'none';
                    f1Content.style.display = 'flex';
                } else {
                    gamesColumn.style.display = 'none';
                    leagueSpecificColumn.style.display = 'block';
                    loadLeagueSpecificData(section);
                }

                document.querySelectorAll(".news .content-section, #social-feed-container .content-section").forEach(s => s.style.display = "none");

                const news = document.getElementById("news-" + section);
                const social = document.getElementById("social-" + section);
                if (news) {
                    news.style.display = "block";
                    const newsSubMenu = document.getElementById("newsSubMenu");
                    if (newsSubMenu) newsSubMenu.style.display = section === "Home" ? "flex" : "none";
                    const container = document.querySelector(".news");
                    if (container) container.scrollTop = 0;
                    loadHeadlinesAndBreakingFeeds(section);
                }
                if (social) social.style.display = "block";
            });
        });

       // --- UPDATED: NEW CODE FOR MENU FILTERS ---
    document.getElementById("menuFilters").addEventListener("click", e => {
        const clickedFilter = e.target.closest(".menu-filter");
        if (!clickedFilter) return;

        // Find the currently selected league (before we change the filter)
        const currentSelectedLi = document.querySelector("#menuList li.selected");
        const selectedSection = currentSelectedLi ? currentSelectedLi.dataset.section : null;

        // Remove active class from all filters
        document.querySelectorAll("#menuFilters .menu-filter").forEach(filter => {
            filter.classList.remove("active");
        });
        // Add active class to the clicked filter
        clickedFilter.classList.add("active");

        const filterId = clickedFilter.dataset.filter;

        // Hide all menu lists and remove the 'selected' class from ALL li items
        // This is important to prevent duplicates when switching back and forth
        document.querySelectorAll("#menuList > ul").forEach(list => {
            list.style.display = "none";
            list.querySelectorAll("li").forEach(li => li.classList.remove("selected"));
        });

        // Show the list that matches the data-filter
        const targetList = document.getElementById(`menuList-${filterId}`);
        if (targetList) {
            targetList.style.display = "block";

            // If a league was previously selected, find it in the new list and select it
            if (selectedSection) {
                const newSelectedLi = targetList.querySelector(`li[data-section="${selectedSection}"]`);
                if (newSelectedLi) {
                    newSelectedLi.classList.add("selected");
                }
            }
        }
    });


        function loadHeadlinesAndBreakingFeeds(section) {
            const newsSection = document.getElementById(`news-${section}`);
            if (!newsSection) return;

            const defaultHeadlinesTab = newsSection.querySelector('.headlines-tab[data-url]');
            if (defaultHeadlinesTab) defaultHeadlinesTab.click();
            
            const defaultBreakingTab = newsSection.querySelector('.news-tab[data-tab="breaking"]');
            if (defaultBreakingTab) defaultBreakingTab.click();
        }

        // --- UNIFIED CLICK HANDLER FOR ALL NEWS TABS ---

        // Vertical Headlines Tabs (League-Specific)
        document.querySelectorAll('.headlines-tabs-column').forEach(container => {
            container.addEventListener('click', (event) => {
                const clickedTab = event.target.closest('.headlines-tab[data-url]');
                if (clickedTab) {
                    container.querySelectorAll('.headlines-tab').forEach(tab => tab.classList.remove('active'));
                    clickedTab.classList.add('active');
                    fetchFeed(`#headlines-content-${selectedSection}`, clickedTab.dataset.url);
                }
            });
        });

        // Horizontal News Tabs (Breaking, etc.) - HANDLES BOTH HOME & LEAGUE PAGES
        document.querySelectorAll(".news").forEach(newsContainer => {
            newsContainer.addEventListener('click', (event) => {
                const clickedTab = event.target.closest('.news-tab');
                if (!clickedTab) return;

                const tabType = clickedTab.dataset.tab;
                const dynamicUrl = clickedTab.dataset.url;

                clickedTab.parentElement.querySelectorAll('.news-tab').forEach(tab => tab.classList.remove('active'));
                clickedTab.classList.add('active');

                if (dynamicUrl) {
                    // Logic for League Pages
                    const newsSection = clickedTab.closest('.content-section');
                    if (!newsSection) return;
                    newsSection.querySelectorAll('.news-content-pane').forEach(pane => pane.style.display = 'none');
                    const sectionId = newsSection.id.replace('news-', '');
                    const contentPane = newsSection.querySelector(`#${tabType}-content-${sectionId}`);
                    if (contentPane) {
                        contentPane.style.display = 'block';
                        fetchFeed(`#${contentPane.id}`, dynamicUrl);
                    }
                } else {
                    // Fallback Logic for Home Page
                    document.querySelectorAll('#news-Home .news-content-pane').forEach(pane => pane.style.display = 'none');
                    const targetPaneId = `${tabType}-feed`;
                    const targetPane = document.getElementById(targetPaneId);
                    const fallbackUrl = HOME_PAGE_FEEDS[tabType];
                    if (targetPane && fallbackUrl) {
                        targetPane.style.display = 'block';
                        fetchFeed(`#${targetPaneId}`, fallbackUrl);
                    }
                }
            });
        });

        // Other original listeners (scroll, search, etc.)
        const feeds = ["feed-ESPN", "feed-CBS", "feed-FOX", "feed-Yahoo"];
        const newsPanel = document.querySelector(".news");
        newsPanel.addEventListener("scroll", () => {
            const newsSubMenu = document.getElementById("newsSubMenu");
            if (!newsSubMenu) return;
            const top = newsPanel.getBoundingClientRect().top;
            const offset = newsSubMenu.offsetHeight + 50;
            let active = 0;
            for (let i = 0; i < feeds.length; i++) {
                const el = document.getElementById(feeds[i]);
                if (!el) continue;
                const h4 = el.querySelector("h4");
                if (!h4) continue;
                if (h4.getBoundingClientRect().top > top + offset) break;
                active = i;
            }
            const feedName = feeds[active].replace("feed-", "").toLowerCase();
            document.querySelectorAll(".news-menu-item").forEach(item => {
                item.classList.toggle("active", item.dataset.feed.toLowerCase() === feedName);
            });
        });

        document.getElementById("menuSearch").addEventListener("keyup", function () {
            const query = this.value.toLowerCase();
            const activeFilterElem = document.querySelector(".menu-filter.active");
            if (!activeFilterElem) return;
            const activeFilter = activeFilterElem.dataset.filter;
            const activeList = document.getElementById("menuList-" + activeFilter);
            if (activeList) {
                activeList.querySelectorAll("li").forEach(li => {
                    li.style.display = li.textContent.toLowerCase().includes(query) ? "" : "none";
                });
            }
        });

        window.toggleSoccerMore = function () {
            const section = document.getElementById("soccer-more");
            const toggle = document.querySelector(".soccer-more-toggle");
            const expanded = section.style.display === "block";
            section.style.display = expanded ? "none" : "block";
            toggle.textContent = expanded ? "More…" : "Less…";
        };

        // --- Initial Load on Page Start ---
        const homeBreakingTab = document.querySelector('#news-Home .news-tab[data-tab="breaking"]');
        if (homeBreakingTab) {
            homeBreakingTab.click();
        }
    });
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // ── A) Grab all four tab elements and define their order ──
    const tabs    = Array.from(document.querySelectorAll(".headlines-tab"));
    const sources = ["espn", "cbs", "yahoo", "fox"];

    // ── B) Keep track of which feeds already have a scroll listener ──
    const scrollListeners = {};

    // ── C) Function to attach a "scroll to bottom" watcher on a feed ──
    function attachScrollWatcher(src) {
      const feedEl = document.getElementById(src + "-feed");
      // If there's no such element or we've already wired it, do nothing
      if (!feedEl || scrollListeners[src]) return;

      const onScroll = () => {
        // When scrolled to (or within 1px of) bottom, auto‐advance:
        if (feedEl.scrollHeight - feedEl.scrollTop - feedEl.clientHeight <= 1) {
          const idx     = sources.indexOf(src);
          const nextIdx = idx + 1;
          if (nextIdx < sources.length) {
            const nextTab = document.querySelector(
              `.headlines-tab[data-source="${sources[nextIdx]}"]`
            );
            if (nextTab) nextTab.click();
          }
        }
      };

      feedEl.addEventListener("scroll", onScroll);
      scrollListeners[src] = onScroll;
    }

    // ── D) Function to activate (highlight) exactly one tab + feed ──
    function activateSource(src) {
      // 1) Toggle "active" class on tabs
      tabs.forEach(t => t.classList.toggle(
        "active",
        t.getAttribute("data-source") === src
      ));

      // 2) Hide all four feed‐divs, then show only the chosen one
      sources.forEach(s => {
        const div = document.getElementById(s + "-feed");
        if (div) {
          div.style.display = (s === src) ? "block" : "none";
        }
      });

      // 3) After switching, (re‐)attach the scroll watcher to the newly visible feed
      attachScrollWatcher(src);
    }

    // ── E) Add click listeners to each .headlines-tab ──
    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        const src = tab.getAttribute("data-source"); // "espn" / "cbs" / etc.
        activateSource(src);
      });
    });

    // ── F) On initial load, activate ESPN by default ──
    activateSource("espn");
  });
</script>
	 

	  <script>
  /**
   * Turn a raw headline into a normalized array of words.
   * - Lowercase
   * - Remove punctuation
   * - Split on whitespace
   * - Filter out empty tokens
   */
  function headlineToWordArray(str) {
    return str
      .toLowerCase()
      .replace(/[^\w\s]/g, "")   // strip any non‐alphanumeric (keeps letters/numbers/spaces)
      .split(/\s+/)              // split on whitespace
      .filter(word => word.length > 0);
  }

  /**
   * Compute Jaccard similarity of two arrays of words:
   * |Intersection(words1, words2)| / |Union(words1, words2)|
   */
  function jaccardSimilarity(wordsA, wordsB) {
    const setA = new Set(wordsA);
    const setB = new Set(wordsB);
    let intersectionCount = 0;
    for (let w of setA) {
      if (setB.has(w)) intersectionCount++;
    }
    const unionCount = setA.size + setB.size - intersectionCount;
    if (unionCount === 0) return 0;
    return intersectionCount / unionCount;
  }

  /**
   * Remove any post element whose headline is "too similar" to one already kept.
   * We keep track of word‐sets of all headlines we've accepted, then for each new one
   * we measure its Jaccard similarity against all "seen" sets. If any overlap ≥ threshold, we remove it.
   */
  function removeNearDuplicateHeadlines() {
    const container = document.getElementById("my-rss-widget");
    if (!container) return;

    // Grab every <a> under #my-rss-widget (RSS.app normally puts each item in an <a>).
    const links = Array.from(container.querySelectorAll("a"));

    // Array of word‐sets we have accepted so far
    const seenWordSets = [];
    // Threshold of Jaccard similarity above which we consider two headlines "duplicates"
    const SIMILARITY_THRESHOLD = 0.65;

    links.forEach(link => {
      const rawText = link.textContent || "";
      const words = headlineToWordArray(rawText);
      // Compare against each seen word‐set:
      let isDuplicate = false;
      for (let seenWords of seenWordSets) {
        const similarity = jaccardSimilarity(words, seenWords);
        if (similarity >= SIMILARITY_THRESHOLD) {
          isDuplicate = true;
          break;
        }
      }

      if (isDuplicate) {
        // Remove this entire "item." Climb up until you hit a direct child of #my-rss-widget:
        let el = link;
        while (el && el.parentElement && el.parentElement.id !== "my-rss-widget") {
          el = el.parentElement;
        }
        if (el && el.parentElement === container) {
          container.removeChild(el);
        }
      } else {
        // Not a duplicate: add this word‐array to seenWordSets
        seenWordSets.push(words);
      }
    });
  }

  /**
   * Observe #my-rss-widget until at least one <a> appears, then run the fuzzy dedupe.
   * Also run a fallback after 3 seconds in case feed loads slowly.
   */
  document.addEventListener("DOMContentLoaded", () => {
    const container = document.getElementById("my-rss-widget");
    if (!container) return;

    const observer = new MutationObserver((mutations, obs) => {
      // If at least one <a> is present, RSS.app has rendered items
      if (container.querySelector("a")) {
        removeNearDuplicateHeadlines();
        obs.disconnect();
      }
    });

    observer.observe(container, { childList: true, subtree: true });

    // Fallback in case feed injection is delayed
    setTimeout(removeNearDuplicateHeadlines, 3000);
  });
</script>

	  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const breakingContainer = document.getElementById("breaking-feed");
    if (!breakingContainer) return;

    breakingContainer.addEventListener("click", async (evt) => {
      // Only proceed if a link (<a>) was clicked inside #breaking-feed
      const anchor = evt.target.closest("a");
      if (!anchor || !breakingContainer.contains(anchor)) return;
      evt.preventDefault();

      const newsNowUrl = anchor.href;
      try {
        // 1) Fetch the NewsNow page HTML
        const resp = await fetch(newsNowUrl, { redirect: "follow" });
        const html = await resp.text();
        const doc = new DOMParser().parseFromString(html, "text/html");

        // 2) Look for a <meta http-equiv="refresh"> redirect
        const metaRefresh = doc.querySelector('meta[http-equiv="refresh"]');
        if (metaRefresh) {
          const content = metaRefresh.getAttribute("content") || "";
          // "content" is often like "0; URL=https://…"
          const match = content.match(/URL=(.*)/i);
          if (match && match[1]) {
            window.open(match[1], "_blank");
            return;
          }
        }

        // 3) Fallback: check for <link rel="canonical">
        const linkCanonical = doc.querySelector('link[rel="canonical"]');
        if (linkCanonical && linkCanonical.href) {
          window.open(linkCanonical.href, "_blank");
          return;
        }

        // 4) Fallback: inspect any <script> blocks for a JS redirect
        const scripts = Array.from(doc.querySelectorAll("script"));
        for (const s of scripts) {
          const txt = s.textContent || "";
          // look for window.location.href = "…";
          let m = txt.match(/window\.location\.href\s*=\s*['"](.*?)['"]/);
          if (m && m[1]) {
            window.open(m[1], "_blank");
            return;
          }
          // look for location.replace("…");
          m = txt.match(/location\.replace\s*\(\s*['"](.*?)['"]/);
          if (m && m[1]) {
            window.open(m[1], "_blank");
            return;
          }
        }

        // 5) If none of the above, just open the NewsNow URL as a last resort
        window.open(newsNowUrl, "_blank");
      } catch (err) {
        // On fetch/parse error, open the original link
        window.open(newsNowUrl, "_blank");
      }
    });
  });
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    
    // --- PART 1: Logic to switch between Games and F1 column content ---
    const leftMenu = document.getElementById('menuList');
    const gamesContent = document.getElementById('tv-listings-container');
    const f1Content = document.getElementById('f1-column-content');

    if (leftMenu && gamesContent && f1Content) {
        leftMenu.addEventListener('click', function(event) {
            const clickedItem = event.target.closest('li[data-section]');
            if (!clickedItem) return;

            const section = clickedItem.dataset.section;

            if (section === 'FormulaOne') {
                gamesContent.style.display = 'none';
                f1Content.style.display = 'flex'; // Use flex to restore layout
            } else {
                gamesContent.style.display = 'block';
                f1Content.style.display = 'none';
            }
        });
    }

    // --- PART 2: Logic for the F1 Driver/Constructor tabs ---
    const f1TabButtonsContainer = document.getElementById('f1-tab-buttons');
    const f1ContentPanes = document.querySelectorAll('.f1-content-pane');
    
    let driverStandingsLoaded = false;
    let constructorStandingsLoaded = false;
    
    // Load the default tab's data immediately when the F1 panel is shown
    // This assumes you want to load it when FormulaOne is clicked.
    // We can also trigger this on the first click of the tab.
    const f1MenuItem = document.querySelector('li[data-section="FormulaOne"]');
    if (f1MenuItem) {
        f1MenuItem.addEventListener('click', () => {
            if (!driverStandingsLoaded) {
                loadDriverStandings();
                driverStandingsLoaded = true;
            }
        }, { once: true }); // Use { once: true } so it only fires the first time
    }

    if (f1TabButtonsContainer) {
        f1TabButtonsContainer.addEventListener('click', function(event) {
            const clickedButton = event.target.closest('.f1-tab-button');
            if (!clickedButton) return;

            const targetTabId = clickedButton.dataset.tab;
            
            // Deactivate all buttons
            f1TabButtonsContainer.querySelectorAll('.f1-tab-button').forEach(btn => {
                btn.style.borderBottomColor = 'transparent';
                btn.style.color = '#9ca3af';
            });

            // Hide all panes
            f1ContentPanes.forEach(pane => {
                pane.style.display = 'none';
            });

            // Activate the clicked button and its pane
            clickedButton.style.borderBottomColor = '#DC143C';
            clickedButton.style.color = '#fff';
            
            const targetPane = document.getElementById(targetTabId);
            if (targetPane) {
                targetPane.style.display = 'block';
            }
            
            // Load data if it hasn't been loaded yet
            if (targetTabId === 'driver-standings' && !driverStandingsLoaded) {
                loadDriverStandings();
                driverStandingsLoaded = true; 
            } else if (targetTabId === 'constructor-standings' && !constructorStandingsLoaded) {
                loadConstructorStandings();
                constructorStandingsLoaded = true;
            }
        });
    }
});
</script>

<script>
// Google Sheets Configuration - Using published CSV URLs (no API key needed)
const GOOGLE_SHEETS_CONFIG = {
    DRIVER_STANDINGS_URL: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS6rs6yvXAh-KktOOVGGY6knFMjR11W75yfcq7iReQCjl-uc9hHwT3yMpZ01GqAlYwsY0VYVTADrPiR/pub?output=csv',
    CONSTRUCTOR_STANDINGS_URL: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQcpOkjKy5bcEPAZRofXpGGyf0_VkfIBIDDrlgUIiSuznqdUfDRAqmy_EAcVN3K1-y_F6wr78TbH6U8/pub?output=csv'
};

// Function to fetch data from published Google Sheets CSV
async function fetchFromGoogleSheetsCSV(url) {
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const csvText = await response.text();
        // Parse CSV data using a regular expression for newlines
        const rows = csvText.split(/\r?\n/).map(row => row.split(',').map(cell => cell.trim().replace(/^\"|\"$/g, '')));
        return rows.filter(row => row.length > 1 && row[0] !== ''); // Ensure row has content
    } catch (error) {
        console.error('Error fetching from Google Sheets CSV:', error);
        throw error;
    }
}

// Function to load driver standings
async function loadDriverStandings() {
    const loadingDiv = document.getElementById('driver-loading');
    const errorDiv = document.getElementById('driver-error');
    const table = document.getElementById('driver-table');
    const tbody = document.getElementById('driver-tbody');
    try {
        loadingDiv.style.display = 'block';
        errorDiv.style.display = 'none';
        table.style.display = 'none';
        const data = await fetchFromGoogleSheetsCSV(GOOGLE_SHEETS_CONFIG.DRIVER_STANDINGS_URL);
        if (data.length === 0) throw new Error('No data found in sheet');
        tbody.innerHTML = '';
        for (let i = 1; i < data.length; i++) {
            const row = data[i];
            if (row.length >= 4) {
                const tr = document.createElement('tr');
                tr.style.borderTop = '1px solid #374151';
                tr.innerHTML = `
                        <td style="padding: 6px 4px;">${row[0]}</td>
                        <td style="padding: 6px 4px;">${row[1]}</td>
                        <td style="padding: 6px 4px;">${row[3]}</td>
                        <td style="padding: 6px 4px; text-align: right; font-weight: bold;">${row[2]}</td>
                `;
                tbody.appendChild(tr);
            }
        }
        loadingDiv.style.display = 'none';
        table.style.display = 'table';
    } catch (error) {
        loadingDiv.style.display = 'none';
        errorDiv.style.display = 'block';
        errorDiv.textContent = `Error loading driver standings: ${error.message}`;
        console.error('Error loading driver standings:', error);
    }
}

// Function to load constructor standings
async function loadConstructorStandings() {
    const loadingDiv = document.getElementById('constructor-loading');
    const errorDiv = document.getElementById('constructor-error');
    const table = document.getElementById('constructor-table');
    const tbody = document.getElementById('constructor-tbody');
    try {
        loadingDiv.style.display = 'block';
        errorDiv.style.display = 'none';
        table.style.display = 'none';
        const data = await fetchFromGoogleSheetsCSV(GOOGLE_SHEETS_CONFIG.CONSTRUCTOR_STANDINGS_URL);
        if (data.length === 0) throw new Error('No data found in sheet');
        tbody.innerHTML = '';
        for (let i = 1; i < data.length; i++) {
            const row = data[i];
            if (row.length >= 3) {
                const tr = document.createElement('tr');
                tr.style.borderTop = '1px solid #374151';
                tr.innerHTML = `
                        <td style="padding: 6px 4px;">${row[0]}</td>
                        <td style="padding: 6px 4px;">${row[1]}</td>
                        <td style="padding: 6px 4px; text-align: right; font-weight: bold;">${row[2]}</td>
                `;
                tbody.appendChild(tr);
            }
        }
        loadingDiv.style.display = 'none';
        table.style.display = 'table';
    } catch (error) {
        loadingDiv.style.display = 'none';
        errorDiv.style.display = 'block';
        errorDiv.textContent = `Error loading constructor standings: ${error.message}`;
        console.error('Error loading constructor standings:', error);
    }
}

// Initial load when F1 section is shown
document.addEventListener('DOMContentLoaded', function () {
    // You may want to call loadDriverStandings() here if F1 is the default tab
});
</script>

	  <script>
document.addEventListener('DOMContentLoaded', function () {
    const F1_SCHEDULE_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRZ9MyNW-7sVotdUg-L3rBWegNuPhhYek7C367krB8PfVRrRNBTE57AXTGPcxOXc192MqS_toeVrWER/pub?output=csv';
    const scheduleContainer = document.getElementById('f1-schedule-container');

    // Fetches and parses the F1 schedule CSV data.
    async function fetchF1ScheduleData() {
        try {
            const response = await fetch(F1_SCHEDULE_URL);
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            const csvText = await response.text();
            
            const rows = csvText.split(/\r?\n/).slice(1); // Split and remove header row
            const timeZone = 'America/Chicago'; // Times in the sheet are Central U.S. Time
            const { DateTime } = luxon;

            return rows.map(row => {
                const columns = row.split(',');
                if (columns.length < 6) return null; // Skip malformed rows

                const date = columns[0].trim();
                const startTimeStr = columns[1].trim();
                const endTimeStr = columns[2].trim();

                // Combine date and time to create a valid Luxon DateTime object with the correct time zone
                const startDateTime = DateTime.fromFormat(`${date} ${startTimeStr}`, 'M/d/yyyy h:mm a', { zone: timeZone });
                const endDateTime = DateTime.fromFormat(`${date} ${endTimeStr}`, 'M/d/yyyy h:mm a', { zone: timeZone });

                return {
                    start: startDateTime,
                    end: endDateTime,
                    eventHead: columns[3].trim(),
                    eventSub: columns[4].trim(),
                    channel: columns[5].trim()
                };
            }).filter(event => event && event.start.isValid); // Filter out null or invalid date rows
        } catch (error) {
            console.error('Error fetching or parsing F1 schedule:', error);
            scheduleContainer.innerHTML = `<p style="color: #ef4444;">Error loading schedule.</p>`;
            return [];
        }
    }

    // Renders the schedule based on the current time.
    function renderSchedule(allEvents) {
        if (!allEvents || allEvents.length === 0) {
            scheduleContainer.innerHTML = `<p style="color: #9ca3af;">No upcoming schedule found.</p>`;
            return;
        }

        const now = luxon.DateTime.now();

        // 1. Find the current or next race weekend to display
        const nextEvent = allEvents.find(event => event.end > now);
        if (!nextEvent) {
            scheduleContainer.innerHTML = `<p style="color: #9ca3af;">The season may have concluded.</p>`;
            return;
        }
        const currentRaceHead = nextEvent.eventHead;

        // 2. Filter for events for that specific weekend whose end time hasn't passed
        const eventsToDisplay = allEvents.filter(event => 
            event.eventHead === currentRaceHead && event.end > now
        );

        // 3. Group events by date for display
        const groupedByDate = eventsToDisplay.reduce((acc, event) => {
            const dateKey = event.start.toFormat('yyyy-MM-dd');
            if (!acc[dateKey]) {
                acc[dateKey] = [];
            }
            acc[dateKey].push(event);
            return acc;
        }, {});
        
        // 4. Generate and inject the HTML
        let html = '';
        const today = now.toFormat('yyyy-MM-dd');
        
        for (const dateKey in groupedByDate) {
            const dateObj = luxon.DateTime.fromISO(dateKey);
            const dateHeader = (dateKey === today) ? 'Today' : dateObj.toFormat('MMMM d');
            
            html += `<h3 style="font-weight: 600; margin-bottom: 0.5rem; margin-top: 1rem;">${dateHeader}</h3>`;

            groupedByDate[dateKey].forEach(event => {
                const isLive = now >= event.start && now < event.end;
                const timeDisplay = isLive 
                    ? `<span style="color: #ef4444; font-weight: bold;">Live</span>`
                    : event.start.toFormat('h:mm a');

                html += `
                        <div style="display: flex; justify-content: space-between; align-items: top; margin-bottom: 0.75rem;">
                            <div style="flex: 0 0 70px; color: #e0e0e0;">${timeDisplay}</div>
                            <div style="flex: 1 1 auto;">
                                <p style="margin: 0; padding: 0; font-weight: 500;">${event.eventHead}</p>
                                <p style="margin: 0; padding: 0; color: #9ca3af;">${event.eventSub}</p>
                            </div>
                            <div style="flex: 0 0 60px; text-align: right; color: #e0e0e0;">${event.channel}</div>
                        </div>
                `;
            });
        }

        scheduleContainer.innerHTML = html || `<p style="color: #9ca3af;">No upcoming events for this race.</p>`;
    }

    // Main function to update the schedule
    async function updateSchedule() {
        const events = await fetchF1ScheduleData();
        renderSchedule(events);
    }

    // Initial load and then update every 60 seconds to catch "Live" status changes
    updateSchedule();
    setInterval(updateSchedule, 60000); 
});
</script>
	 
<script>
// --- FINAL UNIFIED SCRIPT for ALL Game, Schedule, and Standings Logic ---
document.addEventListener('DOMContentLoaded', function () {

    // --- 1. CONFIGURATION ---
  const LEAGUE_DATA_CONFIG = {
  'NFL': { leagueId: 'USA: NFL', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSoXI911JBowIVpsOtYo7Jk0WwwNlujQ76rR4lgDAqxGWLa_q67gOXI0DyKsC4YkKIfbSYqerHp17-m/pub?gid=1628205730&single=true&output=csv', upcomingCollectionName: 'NFL' },
  'NBA': { leagueId: 'USA: NBA', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vStADlwOOQG4uJvUPl8bpUdShU2aoO7oCyOFBxWScG5KUYe-pkrh4fqiuVVExGjCdFhl1ZBjsjtg7e-/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'NBA' },
  'MLB': { leagueId: 'USA: MLB', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRQHOSDTxfJ554E0MhgZPfmnarCUunnYmxDBSZ78APQ3QfvPWBnn1i68JPSuNCNByd1IzYEbj-6AVAZ/pub?gid=1312763847&single=true&output=csv', upcomingCollectionName: 'MLB' },
  'NHL': { leagueId: 'USA: NHL', standingsUrl: 'YOUR_NHL_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'NHL' },
  'MLS': { leagueId: 'USA: MLS', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSQ-fXiJCsMWxpSzu9x_vE7DhdtHBBpL54Ue3vnPnk21OeTsGwZoQnJK7FNAZkT9Nfj8Ox8tuV21pwp/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'MLS' },
  'PremierLeague': { leagueId: 'England: Premier League', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT8lEnnlz6Uhb47U4yOnsSUOcsfBS3TrpEXri3g6S2Yj2FUkq1rSSgE4SveKPoAJQsu6U2kkfdGtmhO/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'PremierLeague' },
  'LaLiga': { leagueId: 'Spain: LaLiga', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS8ZGW33Hc9fDIq8mJZZqVj8GJdm3p08Jug6e5fTP0-KBtGpFB6BIXgDKkvHqyHnJRKZ9Ba24I3hekV/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'LaLiga' },
  'SerieA': { leagueId: 'Italy: Serie A', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRaaFrDXpcgY4EiGwkYfT0zodrVA1GJU2A6qcrc1GcLxkPjHh43ksM3T4c4p5nFdqKJoj96eEpUKST3/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'SerieA' },
  'Bundesliga': { leagueId: 'Germany: Bundesliga', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTwpzErtNqiT5mq4kII0P1OxnY41WAgyY4fi7kiThIgNSgf6lr3kslZ9OBAP3-I2YJ4_aA0p0LNjsaH/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'Bundesliga' },
  'Ligue1': { leagueId: 'France: Ligue 1', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRD-758CxWtSSl1PCJRdVREjXqhrxTBjYBtnxx4ot8wUdEGfw7ONCzQNfTIdvntZoi1Kme0F7Nkt4Wa/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'Ligue1' },
  'NCAAF': { leagueId: 'USA: NCAA', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRiThcO5BjAuw3818zbgA9WxlLQFK8T3n5LCPxAihwjANmnxme5ynsLG2EyD2RyPvACe4wGlY36ekF7/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'NCAAF' },
  'WNBA': { leagueId: 'USA: WNBA', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSMWPTh0lOh89-qkXYbx63Vs8FQ7gUoT0333Pa9ZgPg4WWBMgB-xERDMM_U2yIUgS3TSPOXOD5M7sVl/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'WNBA' },
  'Soccer': { leagueId: 'WORLD: SOCCER', standingsUrl: 'YOUR_SOCCER_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'Soccer' },
  'UEFAChampionsLeague': { leagueId: 'Europe: Champions League - League phase', standingsUrl: 'YOUR_UEFACHAMPIONSLEAGUE_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'UEFAChampionsLeague' },
  'FACup': { leagueId: 'ENGLAND: FA CUP', standingsUrl: 'YOUR_FACUP_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'FACup' },
  'LigaMX': { leagueId: 'MEXICO: LIGA MX', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSL_7HJC0jqhF1jy4tiIrrh5RLewsiH9RezMKDx6TpZtz2JHB8D7Dlx7yyZRWZ7rU5txoTasyiHk7M4/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'LigaMX' },
  'NWSL': { leagueId: 'USA: NWSL Women', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQJn_hnVeNfnXsDpeer_hgh6dxOcL2VOJzHKsE8cv-OTaX8EzWRYIGNLqLztvuAeuJbM4oEElA-LoiU/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'NWSL' },
  'UEFAEuropaLeague': { leagueId: 'Europe: Europa League', standingsUrl: 'YOUR_UEFAEUROPALEAGUE_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'UEFAEuropaLeague' },
  'UEFAConferenceLeague': { leagueId: 'Europe: Conference League', standingsUrl: 'YOUR_UEFACONFERENCELEAGUE_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'UEFAConferenceLeague' },
  'FormulaOne': { leagueId: 'WORLD: FORMULA ONE', standingsUrl: 'YOUR_FORMULAONE_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'FormulaOne' },
  'PGATour': { leagueId: 'WORLD: PGA TOUR', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRh72gyQFguMGj0RkHvy-WrAH3EBpOMdikyKIjrOfSs5aAYYlE7NjbRJsBa7gkkJ4gV_nUUYSbCje2L/pub?gid=786471151&single=true&output=csv', upcomingCollectionName: 'PGATour' },
  'UFC': { leagueId: 'WORLD: UFC', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS2Z0QfXw34ib6V0gmcdqVvu6gwy8vHnD6cF3xMhJGZJHpU_s0vwC0h7phvbV0joe4tdVDGHiJ1kBfX/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'UFC' },
  'Boxing': { leagueId: 'WORLD: BOXING', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRthmvN_N-bKFQdsc5V_Otx92FF5qwjYkI9YXHoKgKyV5jvfmb6skABo0Ncbh1x0ehEU-4Je3w_KPmb/pub?gid=1100984840&single=true&output=csv', upcomingCollectionName: 'Boxing' },
  'NASCARCupSeries': { leagueId: 'USA: NASCAR CUP SERIES', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRzMLdfLfGydr1dpjhS8hr1PLCBod_Jm-J9ABvGaeyhttkAep5HAtWfB5hGeCaLHteZBapJMhNExe0l/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'NASCARCupSeries' },
  'Tennis': { leagueId: 'WORLD: TENNIS', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ74Qw3ZgBqRAKd_HVAnGLI9zDqk_JILTBTtlrFKI8oCosRHnLQZ9Nu8BIAVYdLq932wzE8oz3UNCIP/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'Tennis' },
  'LIVGolf': { leagueId: 'WORLD: LIV GOLF', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTZ7zf4PAme33oOeQ5NFNVE3W1OXJDJ2-qN0_TKLYaditRtpsa7yfxGY3lsGJQxZLQxhIKGzAH7NgBo/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'LIVGolf' },
  'IndyCar': { leagueId: 'USA: INDYCAR', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQWqPs7Krfm7U1_bU2MShMSgAGF5RIXqIVUZ6vQO2XWz0waDHd48eiawVeOwXwAkeZBdoNA1X4Mkzs3/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'IndyCar' },
  'NCAAM': { leagueId: 'USA: NCAAM', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRWwuY4T7aQXTeW_8WDncuzDZUAIr9JDhV2MjP4ZFAM0EjuUWgpKBb2sWjI9gZxvqCxnON9JTN7lo2i/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'NCAAM' },
  'NCAAW': { leagueId: 'USA: NCAAW', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRDKX76cBl2tx7s_rW20e2TzKX-uvA6UsPBjsv_UXhhoE8zVmUFJvDaopCxEhaDWyaOtL4wDWSVE6H7/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'NCAAW' },
  'NCAABaseball': { leagueId: 'USA: NCAA BASEBALL', standingsUrl: 'YOUR_NCAABASEBALL_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'NCAABaseball' },
  'NCAASoftball': { leagueId: 'USA: NCAA SOFTBALL', standingsUrl: 'YOUR_NCAASOFTBALL_STANDINGS_CSV_URL_HERE', upcomingCollectionName: 'NCAASoftball' },
  'MotoGP': { leagueId: 'WORLD: MOTOGP', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSqOmundPRaLEu2Jcgt3KBdTRX6jy-Nmkb89fuJC_SfntbZVF_Y-tNehFSnZwqdmK2O3GJR3UlHFXms/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'MotoGP' },
  'LPGATour': { leagueId: 'WORLD: LPGA TOUR', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSgv4aRqL4dKgbADnZNH1e_oR8rgnbGOY9roEzXNVas0C6nlkx3RggqK7RCq0Cl148yFD0DfxAxtK4q/pub?gid=0&single=true&output=csv', upcomingCollectionName: 'LPGATour' },
  'TrackAndField': { leagueId: 'WORLD: TRACK AND FIELD', standingsUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRbnsEETRJkJlYNokKws_nlk6-OfyJKg8aoq8AldZZgRcdV5YtuQ1kdINCKvR2H-XQZJVxRxcZaKOq2/pub?gid=2060167316&single=true&output=csv', upcomingCollectionName: 'TrackAndField' }
};
    const LEAGUE_DISPLAY_ORDER = ["FEATURED", "NFL", "Ryder Cup", "U.S. Open - Men's", "U.S. Open - Women's", "NBA", "MLB", "NHL", "Premier League", "NCAAF", "UEFA Champions League", "ATP", "WTA", "MLS", "LaLiga", "Bundesliga", "Serie A", "Ligue 1", "WNBA", "NBA Preseason", "UEFA Europa League", "UEFA Conference League", "NWSL", "UEFA European Qualifiers", "CONCACAF Qualifiers", "Campeones Cup", "EFL Cup", "Leagues Cup", "FIBA AmeriCup", "Liga MX", "Coppa Italia", "Copa Libertadores", "Copa Sudamericana", "DFB-Pokal", "Saudi Pro League", "CFL", "EFL Championship", "Argentine Primera División", "Liga Portugal", "Brasileirão", "Super Lig", "Scottish Premiership","Scottish Cup", "Eredivisie", "UEFA W Champions League", "Women's Cricket World Cup", "FIFA U-20 World Cup", "AFC Qualifiers", "CAF Qualifiers", "NHL Preseason", "Women's Super League", "ICC Test Series", "T20 International", "USL Championship", "OHL", "NCAA Men's Hockey", "International Friendly", "Club Friendly"]; 
    
    // Leagues that should be collapsed by default on the home page
    const COLLAPSED_LEAGUES = [
    "AFC Qualifiers", 
    "AFC Asian Cup Qualifiers",
    "CAF Qualifiers", 
    "NHL Preseason", 
    "Women's Super League", 
    "ICC Test Series", 
    "T20 International", 
    "USL Championship", 
    "OHL", 
    "NCAA Men's Hockey", 
    "Club Friendly",
    "International Friendly"
    ];

    // --- 2. FIREBASE INITIALIZATION (SINGLETON) + CACHING ---
    if (!firebase.apps.length) {
        const firebaseConfig = {
            apiKey: "AIzaSyD3bw8d4q2oO2qpbgGiUG6Qnlf4aABK3Bc",
            authDomain: "flashlive-daily-scraper.firebaseapp.com",
            projectId: "flashlive-daily-scraper",
            storageBucket: "flashlive-daily-scraper.appspot.com",
            messagingSenderId: "124291936014",
            appId: "1:124291936014:web:acadcaa791d6046849315f"
        };
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();
    const gamesCollectionRef = db.collection("artifacts/flashlive-daily-scraper/public/data/sportsGames");

    // --- CACHING SYSTEM ---
    const cache = {
        data: new Map(),
        timestamps: new Map(),
        CACHE_DURATION: 5 * 60 * 1000, // 5 minutes cache
        
        set(key, data) {
            this.data.set(key, data);
            this.timestamps.set(key, Date.now());
        },
        
        get(key) {
            const timestamp = this.timestamps.get(key);
            if (!timestamp || Date.now() - timestamp > this.CACHE_DURATION) {
                this.data.delete(key);
                this.timestamps.delete(key);
                return null;
            }
            return this.data.get(key);
        },
        
        clear() {
            this.data.clear();
            this.timestamps.clear();
        }
    };

    // --- PERIODIC REFRESH SYSTEM ---
    // Refresh data every 3 minutes instead of real-time listeners
    let refreshInterval;
    
    function startPeriodicRefresh() {
        // Clear existing interval if any
        if (refreshInterval) clearInterval(refreshInterval);
        
        refreshInterval = setInterval(() => {
            cache.clear(); // Clear cache to force fresh data on next request
            
            // Only refresh if user is actively viewing the page
            if (!document.hidden) {
                // Refresh current league data if on a league page
                const currentLeague = document.querySelector('.main-menu li.selected')?.dataset.section;
                if (currentLeague && currentLeague !== 'Home') {
                    const leagueInfo = LEAGUE_DATA_CONFIG[currentLeague];
                    if (leagueInfo) {
                        const { DateTime } = luxon;
                        const todayStr = DateTime.now().setZone('America/Denver').toISODate();
                        getCachedGames(leagueInfo.leagueId, todayStr); // Pre-cache fresh data
                    }
                }
            }
        }, 3 * 60 * 1000); // 3 minutes
    }
    
    // Stop refresh when user leaves page
    document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
            if (refreshInterval) {
                clearInterval(refreshInterval);
                refreshInterval = null;
            }
        } else {
            startPeriodicRefresh();
        }
    });
    
    // Start periodic refresh
    startPeriodicRefresh();

    // --- 3. ELEMENT REFERENCES ---
    const leagueHeader = document.getElementById('league-specific-header');
    const scheduleContent = document.getElementById('league-schedule-content');
    const standingsContent = document.getElementById('league-standings-content');
    
    // --- 4. OPTIMIZED FIRESTORE FUNCTIONS ---
    
    // Cached version of Firestore queries to reduce costs
    async function getCachedGames(leagueId, gameDate) {
        const cacheKey = `games_${leagueId}_${gameDate}`;
        let cachedData = cache.get(cacheKey);
        
        if (cachedData) {
            return cachedData;
        }
        
        try {
            // Try exact match first
            let snapshot = await gamesCollectionRef
                .where('League', '==', leagueId)
                .where('gameDate', '==', gameDate)
                .get();
            
            // If no exact match, try case-insensitive search
            if (snapshot.empty) {
                console.log(`No exact match for leagueId: ${leagueId}, trying case-insensitive search...`);
                const allGamesSnapshot = await gamesCollectionRef
                    .where('gameDate', '==', gameDate)
                    .get();
                
                const gamesData = allGamesSnapshot.docs
                    .map(doc => doc.data())
                    .filter(game => {
                        const gameLeague = game.League || '';
                        return gameLeague.toLowerCase().includes(leagueId.toLowerCase()) || 
                               leagueId.toLowerCase().includes(gameLeague.toLowerCase());
                    });
                
                cache.set(cacheKey, gamesData);
                return gamesData;
            }
            
            const gamesData = snapshot.docs.map(doc => doc.data());
            cache.set(cacheKey, gamesData);
            return gamesData;
        } catch (error) {
            console.error('Error fetching games:', error);
            return [];
        }
    }

    // Cached version for upcoming games
    async function getCachedUpcomingGames(collectionName) {
        const cacheKey = `upcoming_${collectionName}`;
        let cachedData = cache.get(cacheKey);
        
        if (cachedData) {
            return cachedData;
        }
        
        try {
            const snapshot = await db.collection(collectionName).get();
            const upcomingData = snapshot.docs.map(doc => doc.data());
            cache.set(cacheKey, upcomingData);
            return upcomingData;
        } catch (error) {
            console.error('Error fetching upcoming games:', error);
            return [];
        }
    }

    // Batch function to reduce multiple queries
    async function getBatchedLeagueData(leagueId, gameDate, upcomingCollection) {
        const promises = [];
        
        // Batch today's games and upcoming games together
        promises.push(getCachedGames(leagueId, gameDate));
        if (upcomingCollection) {
            promises.push(getCachedUpcomingGames(upcomingCollection));
        }
        
        try {
            const results = await Promise.all(promises);
            return {
                todayGames: results[0] || [],
                upcomingGames: results[1] || []
            };
        } catch (error) {
            console.error('Error in batch request:', error);
            return { todayGames: [], upcomingGames: [] };
        }
    }

    // --- 5. HELPER FUNCTIONS ---
    function getLeagueDisplayName(name, sport) {
        // Special handling for USA: NCAA - check sport to determine if it's football or hockey
        if (name === "USA: NCAA") {
            if (sport === "Hockey") {
                return "NCAA Men's Hockey";
            } else if (sport === "American Football") {
                return "NCAAF";
            }
        }
        
        const map = { "USA: WNBA": "WNBA", "USA: MLB": "MLB", "USA: NFL": "NFL", "Europe: Champions League - League phase": "UEFA Champions League", "USA: MLS": "MLS", "USA: NHL": "NHL", "USA: NHL - Pre-season": "NHL Preseason", "USA: NCAA": "NCAAF", "USA: US Open ATP, hard": "U.S. Open - Men's", "USA: US Open WTA, hard": "U.S. Open - Women's", "ENGLAND: PREMIER LEAGUE": "Premier League", "USA: NWSL Women": "NWSL", "World: Club Friendly": "Club Friendly", "USA: Cleveland WTA, hard": "WTA", "Germany: DFB Pokal": "DFB-Pokal", "Italy: Coppa Italia": "Coppa Italia", "Italy: Serie A": "Serie A", "Turkey: Super Lig": "Super Lig", "Spain: LaLiga": "LaLiga", "Mexico: Liga MX - Apertura": "Liga MX", "Mexico: Liga MX - Clausura": "Liga MX", "England: EFL Cup": "EFL Cup","England: Premier League": "Premier League", "Europe: Champions League - Qualification": "UEFA Champions League", "Brazil: Serie A Betano": "Brasileirão", "South America: Copa Libertadores - Play Offs": "Copa Libertadores", "Asia: AFC Asian Cup - Qualification - Third round": "AFC Asian Cup Qualifiers", "North & Central America: Leagues Cup - Play Offs": "Leagues Cup", "South America: Copa Sudamericana - Play Offs": "Copa Sudamericana", "World: AmeriCup": "FIBA AmeriCup", "Europe: Champions League Women - Qualification - Second stage": "UEFA W Champions League", "Europe: Europa League - Qualification": "UEFA Europa League", "Europe: Europa League - League phase": "UEFA Europa League", "Europe: Conference League - Qualification": "UEFA Conference League", "Europe: Conference League - League phase": "UEFA Conference League", "Germany: Bundesliga": "Bundesliga", "Saudi Arabia: Saudi Professional League": "Saudi Pro League", "France: Ligue 1": "Ligue 1", "Canada: CFL": "CFL", "USA: WNBA - Play Offs": "WNBA", "England: Championship": "EFL Championship", "World: Ryder Cup": "Ryder Cup", "Netherlands: Eredivisie": "Eredivisie", "England: WSL": "Women's Super League", "Argentina: Torneo Betano - Clausura": "Argentine Primera División", "Argentina: Torneo Betano - Apertura": "Argentine Primera División", "Scotland: Scottish Cup": "Scottish Cup", "Portugal: Liga Portugal": "Liga Portugal", "Scotland: Premiership": "Scottish Premiership", "World: World Cup U20": "FIFA U-20 World Cup", "North & Central America: Campeones Cup": "Campeones Cup", "World: ICC World Cup Women": "Women's Cricket World Cup", "World: Test Series": "ICC Test Series", "World: Twenty20 International": "T20 International", "USA: NBA - Pre-season": "NBA Preseason", "Europe: Champions League Women - League phase": "UEFA W Champions League", "USA: USL Championship": "USL Championship", "World: World Cup U20 - Play Offs": "FIFA U-20 World Cup", "USA: MLB - Play Offs": "MLB", "Africa: World Cup - Qualification": "CAF Qualifiers", "Europe: World Cup - Qualification": "UEFA European Qualifiers", "Asia: Asian Cup - Qualification - Third round": "AFC Asian Cup Qualifiers", "Asia: World Cup - Qualification - Fourth stage": "AFC Qualifiers", "North & Central America: World Cup - Qualification - Third stage": "CONCACAF Qualifiers", "Canada: OHL": "OHL", "USA: NCAA Hockey": "NCAA Men's Hockey", "World: Friendly International": "International Friendly" };
        return map[name] || name;
    }

    // Function to match league names based on partial matches
    function getLeagueKeyFromDatabaseName(databaseLeagueName) {
        const leagueMatches = {
            // UEFA Champions League variations
            'UEFAChampionsLeague': ['Europe: Champions League', 'Champions League'],
            // UEFA Europa League variations  
            'UEFAEuropaLeague': ['Europe: Europa League', 'Europa League'],
            // UEFA Conference League variations
            'UEFAConferenceLeague': ['Europe: Conference League', 'Conference League'],
            // Premier League variations
            'PremierLeague': ['England: Premier League', 'Premier League'],
            // LaLiga variations
            'LaLiga': ['Spain: LaLiga', 'LaLiga'],
            // Serie A variations
            'SerieA': ['Italy: Serie A', 'Serie A'],
            // Bundesliga variations
            'Bundesliga': ['Germany: Bundesliga', 'Bundesliga'],
            // Ligue 1 variations
            'Ligue1': ['France: Ligue 1', 'Ligue 1'],
            // MLS variations
            'MLS': ['USA: MLS', 'MLS'],
            // NFL variations
            'NFL': ['USA: NFL', 'NFL'],
            // NBA variations
            'NBA': ['USA: NBA', 'NBA'],
            // MLB variations
            'MLB': ['USA: MLB', 'MLB'],
            // NHL variations
            'NHL': ['USA: NHL', 'NHL'],
            // WNBA variations
            'WNBA': ['USA: WNBA', 'WNBA'],
            // NCAAF variations
            'NCAAF': ['USA: NCAA', 'NCAA'],
            // NWSL variations
            'NWSL': ['USA: NWSL Women', 'NWSL'],
            // Liga MX variations
            'LigaMX': ['Mexico: Liga MX', 'Liga MX'],
            // Saudi Pro League variations
            'SaudiProLeague': ['Saudi Arabia: Saudi Professional League', 'Saudi Pro League'],
            // Brasileirão variations
            'Brasileirao': ['Brazil: Serie A Betano', 'Serie A Betano'],
            // Copa Libertadores variations
            'CopaLibertadores': ['South America: Copa Libertadores', 'Copa Libertadores'],
            // Copa Sudamericana variations
            'CopaSudamericana': ['South America: Copa Sudamericana', 'Copa Sudamericana'],
            // Leagues Cup variations
            'LeaguesCup': ['North & Central America: Leagues Cup', 'Leagues Cup'],
            // DFB-Pokal variations
            'DFBPokal': ['Germany: DFB Pokal', 'DFB Pokal'],
            // Coppa Italia variations
            'CoppaItalia': ['Italy: Coppa Italia', 'Coppa Italia'],
            // EFL Cup variations
            'EFLCup': ['England: EFL Cup', 'EFL Cup'],
            // Super Lig variations
            'SuperLig': ['Turkey: Super Lig', 'Super Lig'],
            // Eredivisie variations
            'Eredivisie': ['Netherlands: Eredivisie', 'Eredivisie'],
            // Liga Portugal variations
            'LigaPortugal': ['Portugal: Liga Portugal', 'Liga Portugal'],
            // Scottish Premiership variations
            'ScottishPremiership': ['Scotland: Premiership', 'Scottish Premiership'],
            // Scottish Cup variations
            'ScottishCup': ['Scotland: Scottish Cup', 'Scottish Cup'],
            // Women's Super League variations
            'WomensSuperLeague': ['England: WSL', 'WSL', 'Women\'s Super League'],
            // Argentine Primera División variations
            'ArgentinePrimeraDivision': ['Argentina: Torneo Betano', 'Argentine Primera División'],
            // EFL Championship variations
            'EFLChampionship': ['England: Championship', 'EFL Championship']
        };

        // Check for exact matches first
        for (const [leagueKey, patterns] of Object.entries(leagueMatches)) {
            for (const pattern of patterns) {
                if (databaseLeagueName === pattern) {
                    return leagueKey;
                }
            }
        }

        // Check for partial matches (but avoid overlaps like NBA vs WNBA)
        for (const [leagueKey, patterns] of Object.entries(leagueMatches)) {
            for (const pattern of patterns) {
                // More specific matching to avoid NBA vs WNBA overlap
                if (pattern === 'NBA' && databaseLeagueName === 'USA: NBA') {
                    return leagueKey;
                } else if (pattern === 'WNBA' && databaseLeagueName === 'USA: WNBA') {
                    return leagueKey;
                } else if (pattern !== 'NBA' && pattern !== 'WNBA' && databaseLeagueName.includes(pattern)) {
                    return leagueKey;
                }
            }
        }

        return null;
    }
    
    function getTeamDisplayName(name) {
        let p = name.endsWith(" W") ? name.slice(0, -2) : name;
        const map = { "Arizona Diamondbacks": "Diamondbacks", "Atlanta Braves": "Braves", "Baltimore Orioles": "Orioles", "Boston Red Sox": "Red Sox", "Chicago Cubs": "Cubs", "Chicago White Sox": "White Sox", "Cincinnati Reds": "Reds", "Cleveland Guardians": "Guardians", "Colorado Rockies": "Rockies", "Detroit Tigers": "Tigers", "Houston Astros": "Astros", "Kansas City Royals": "Royals", "Los Angeles Angels": "Angels", "Los Angeles Dodgers": "Dodgers", "Miami Marlins": "Marlins", "Milwaukee Brewers": "Brewers", "Minnesota Twins": "Twins", "New York Mets": "Mets", "New York Yankees": "Yankees", "Athletics": "Athletics", "Philadelphia Phillies": "Phillies", "Pittsburgh Pirates": "Pirates", "San Diego Padres": "Padres", "San Francisco Giants": "Giants", "Seattle Mariners": "Mariners", "St. Louis Cardinals": "Cardinals", "Tampa Bay Rays": "Rays", "Texas Rangers": "Rangers", "Toronto Blue Jays": "Blue Jays", "Washington Nationals": "Nationals", "Atlanta Dream": "Dream", "Chicago Sky": "Sky", "Connecticut Sun": "Sun", "Dallas Wings": "Wings", "Indiana Fever": "Fever", "Las Vegas Aces": "Aces", "Los Angeles Sparks": "Sparks", "Minnesota Lynx": "Lynx", "New York Liberty": "Liberty", "Phoenix Mercury": "Mercury", "Seattle Storm": "Storm", "Washington Mystics": "Mystics", "Arizona Cardinals": "Cardinals", "Atlanta Falcons": "Falcons", "Baltimore Ravens": "Ravens", "Buffalo Bills": "Bills", "Carolina Panthers": "Panthers", "Chicago Bears": "Bears", "Cincinnati Bengals": "Bengals", "Cleveland Browns": "Browns", "Dallas Cowboys": "Cowboys", "Denver Broncos": "Broncos", "Detroit Lions": "Lions", "Green Bay Packers": "Packers", "Houston Texans": "Texans", "Indianapolis Colts": "Colts", "Jacksonville Jaguars": "Jaguars", "Kansas City Chiefs": "Chiefs", "Las Vegas Raiders": "Raiders", "Los Angeles Chargers": "Chargers", "Los Angeles Rams": "Rams", "Miami Dolphins": "Dolphins", "Minnesota Vikings": "Vikings", "New England Patriots": "Patriots", "New Orleans Saints": "Saints", "New York Giants": "Giants", "New York Jets": "Jets", "Philadelphia Eagles": "Eagles", "Pittsburgh Steelers": "Steelers", "San Francisco 49ers": "49ers", "Seattle Seahawks": "Seahawks", "Tampa Bay Buccaneers": "Buccaneers", "Tennessee Titans": "Titans", "Washington Commanders": "Commanders", "Anaheim Ducks": "Ducks", "Arizona Coyotes": "Coyotes", "Boston Bruins": "Bruins", "Buffalo Sabres": "Sabres", "Calgary Flames": "Flames", "Carolina Hurricanes": "Hurricanes", "Chicago Blackhawks": "Blackhawks", "Colorado Avalanche": "Avalanche", "Columbus Blue Jackets": "Blue Jackets", "Dallas Stars": "Stars", "Detroit Red Wings": "Red Wings", "Edmonton Oilers": "Oilers", "Florida Panthers": "Panthers", "Los Angeles Kings": "Kings", "Minnesota Wild": "Wild", "Montreal Canadiens": "Canadiens", "Nashville Predators": "Predators", "New Jersey Devils": "Devils", "New York Islanders": "Islanders", "New York Rangers": "Rangers", "Ottawa Senators": "Senators", "Philadelphia Flyers": "Flyers", "Pittsburgh Penguins": "Penguins", "San Jose Sharks": "Sharks", "Seattle Kraken": "Kraken", "St. Louis Blues": "Blues", "Tampa Bay Lightning": "Lightning", "Toronto Maple Leafs": "Maple Leafs", "Vancouver Canucks": "Canucks", "Vegas Golden Knights": "Golden Knights", "Washington Capitals": "Capitals", "Winnipeg Jets": "Jets", "Atlanta Hawks": "Hawks", "Boston Celtics": "Celtics", "Brooklyn Nets": "Nets", "Charlotte Hornets": "Hornets", "Chicago Bulls": "Bulls", "Cleveland Cavaliers": "Cavaliers", "Dallas Mavericks": "Mavericks", "Denver Nuggets": "Nuggets", "Detroit Pistons": "Pistons", "Golden State Warriors": "Warriors", "Houston Rockets": "Rockets", "Indiana Pacers": "Pacers", "Los Angeles Clippers": "Clippers", "Los Angeles Lakers": "Lakers", "Memphis Grizzlies": "Grizzlies", "Miami Heat": "Heat", "Milwaukee Bucks": "Bucks", "Minnesota Timberwolves": "Timberwolves", "New Orleans Pelicans": "Pelicans", "New York Knicks": "Knicks", "Oklahoma City Thunder": "Thunder", "Orlando Magic": "Magic", "Philadelphia 76ers": "76ers", "Phoenix Suns": "Suns", "Portland Trail Blazers": "Trail Blazers", "Sacramento Kings": "Kings", "San Antonio Spurs": "Spurs", "Toronto Raptors": "Raptors", "Utah Jazz": "Jazz", "Washington Wizards": "Wizards", "Atlanta Dream": "Dream", "Chicago Sky": "Sky", "Connecticut Sun": "Sun", "Dallas Wings": "Wings", "Indiana Fever": "Fever", "Las Vegas Aces": "Aces", "Los Angeles Sparks": "Sparks", "Minnesota Lynx": "Lynx", "New York Liberty": "Liberty", "Phoenix Mercury": "Mercury", "Seattle Storm": "Storm", "Washington Mystics": "Mystics", "BC Lions": "Lions", "Calgary Stampeders": "Stampeders", "Edmonton Elks": "Elks", "Hamilton Tiger-Cats": "Tiger-Cats", "Montreal Alouettes": "Alouettes", "Ottawa Redblacks": "Redblacks", "Saskatchewan Roughriders": "Roughriders", "Toronto Argonauts": "Argonauts", "Winnipeg Blue Bombers": "Blue Bombers" };
        return map[p] || p;
    }
    
    // Granular Live Status Display Function
    function getGranularLiveStatus(game) {
        if (game.StageType !== "LIVE") return game.StageType;
        
        // Handle halftime/intermission for all sports
        if (game.Stage === "HALF_TIME" || game.Stage === "HALF") {
            return "Half";
        }
        if (game.Stage === "1ST_INTERMISSION" || game.Stage === "2ND_INTERMISSION") {
            return "Int";
        }
        
        // For sports with GAME_TIME (hockey, basketball, football)
        if (game.GameTime && game.GameTime !== "" && game.GameTime !== "-1") {
            return `${game.Stage} ${game.GameTime}`;
        }
        
        // For soccer - calculate minute from timestamps
        if (game.Sport === 'Soccer') {
            const minute = calculateSoccerMinute(game.StartTime, game.StageStartTime, game.Stage);
            if (minute !== "LIVE") {
                return `${minute}'`;
            }
        }
        
        // For other sports - just show stage
        return game.Stage;
    }
    
    // Calculate soccer minute from timestamps
    function calculateSoccerMinute(startTime, stageStartTime, stage) {
        if (!startTime) return "LIVE";
        
        const now = Math.floor(Date.now() / 1000); // Current time in seconds
        
        // If we have StageStartTime, use it for accurate calculation
        if (stageStartTime) {
            const halfStartTime = stageStartTime; // When current half started
            const minutesElapsed = Math.floor((now - halfStartTime) / 60);
            
            // Add 45 minutes for second half
            if (stage === "SECOND_HALF") {
                return Math.min(minutesElapsed + 45, 90); // Cap at 90 minutes
            }
            
            return Math.min(minutesElapsed, 45); // Cap at 45 minutes for first half
        }
        
        // Fallback: estimate minute from game start time
        const gameStartTime = startTime;
        const minutesElapsed = Math.floor((now - gameStartTime) / 60);
        
        // Add 45 minutes for second half
        if (stage === "SECOND_HALF") {
            return Math.min(minutesElapsed + 45, 90); // Cap at 90 minutes
        }
        
        return Math.min(minutesElapsed, 45); // Cap at 45 minutes for first half
    }
    
    // --- 5. CORE RENDERING FUNCTION ---
    function renderGames(container, gamesData, isGroupedByLeague) {
        container.innerHTML = "";
        const leagueGroups = {};

        if (isGroupedByLeague) {
            gamesData.forEach(game => {
                // Check if this is a featured game (has a special property or is in featured games list)
                const isFeatured = game.isFeatured || false;
                
                if (isFeatured) {
                    // Group featured games under "FEATURED"
                    if (!leagueGroups['FEATURED']) leagueGroups['FEATURED'] = [];
                    leagueGroups['FEATURED'].push(game);
                } else {
                    // Group regular games by their league
                    const leagueDisplayName = getLeagueDisplayName(game.League, game.Sport) || "Other";
                    if (!leagueGroups[leagueDisplayName]) leagueGroups[leagueDisplayName] = [];
                    leagueGroups[leagueDisplayName].push(game);
                }
            });
        } else {
            leagueGroups['singleLeague'] = gamesData;
        }

        const sortedLeagueNames = isGroupedByLeague 
            ? Object.keys(leagueGroups).sort((a, b) => (LEAGUE_DISPLAY_ORDER.indexOf(a) === -1 ? 99 : LEAGUE_DISPLAY_ORDER.indexOf(a)) - (LEAGUE_DISPLAY_ORDER.indexOf(b) === -1 ? 99 : LEAGUE_DISPLAY_ORDER.indexOf(b)))
            : ['singleLeague'];

        sortedLeagueNames.forEach(leagueNameKey => {
            const games = leagueGroups[leagueNameKey];
            const leagueSection = document.createElement("div");
            if(isGroupedByLeague) {
                leagueSection.className = "league-section";
                const title = document.createElement("div");
                title.className = "league-title";
                
                // Add left padding to FEATURED title to match logo spacing
                if (leagueNameKey === 'FEATURED') {
                    title.style.paddingLeft = '5px';
                }
                
                // Add league logo if applicable
                if (leagueNameKey === "NFL") {
                    const logo = document.createElement("img");
                    logo.src = "https://www.flashscore.com/res/image/data/W6t8omXI-prCDKdX1.png";
                    logo.alt = "NFL Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Ligue 1") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/tOAXV6hU-QJIQNuDK.png";
                    logo.alt = "Ligue 1 Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "CFL") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/CFL.png?raw=true";
                    logo.alt = "CFL Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Super Lig") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/Super%20lig.png?raw=true";
                    logo.alt = "Super Lig Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "UEFA Europa League") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/lxUusmmd-nyYh4pi6.png";
                    logo.alt = "UEFA Europa League Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "UEFA Conference League") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/6a9THkA7-fmGCnzrf.png";
                    logo.alt = "UEFA Conference League Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Formula One") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/f1.png?raw=true";
                    logo.alt = "Formula One Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "NCAAF") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/ncaaf.png?raw=true";
                    logo.alt = "NCAAF Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "ATP" || leagueNameKey === "WTA") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/atp.png?raw=true";
                    logo.alt = "Tennis Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "WNBA") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/WNBA.png?raw=true";
                    logo.alt = "WNBA Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "LIV Golf") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/LIVGolf.png?raw=true";
                    logo.alt = "LIV Golf Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "IndyCar") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/indycar.png?raw=true";
                    logo.alt = "IndyCar Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "NCAAM" || leagueNameKey === "NCAAW" || leagueNameKey === "NCAA Baseball" || leagueNameKey === "NCAA Softball") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/UN5z4YU1-423yojZa.png";
                    logo.alt = "NCAA Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "MotoGP") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/motogp.png?raw=true";
                    logo.alt = "MotoGP Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "LPGA Tour") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/LPGATour.png?raw=true";
                    logo.alt = "LPGA Tour Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "NBA" || leagueNameKey === "NBA Preseason") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/OhgQNlXI-nyYPIw0n.png";
                    logo.alt = "NBA Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "MLB") {
                    const logo = document.createElement("img");
                    logo.src = "https://www.flashscore.com/res/image/data/QPJ3alWI-pS3BMXxt.png";
                    logo.alt = "MLB Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "MLS") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/82tQHwgU-r9l5Je0r.png";
                    logo.alt = "MLS Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "LaLiga") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/6aNYx0jD-A3tOPy9B.png";
                    logo.alt = "LaLiga Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Serie A") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/rFHMayEO-2exwJQks.png";
                    logo.alt = "Serie A Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Premier League") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/premierleague.png?raw=true";
                    logo.alt = "Premier League Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Bundesliga") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/fqltz6CO-4ATnefbq.png";
                    logo.alt = "Bundesliga Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Women's Cricket World Cup") {
                    const logo = document.createElement("img");
                    logo.src = "https://upload.wikimedia.org/wikipedia/en/thumb/b/b5/2025_Women%27s_Cricket_World_Cup_logo.svg/500px-2025_Women%27s_Cricket_World_Cup_logo.svg.png";
                    logo.alt = "Women's Cricket World Cup Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "ICC Test Series") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/png-icc.png?raw=true";
                    logo.alt = "ICC Test Series Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "T20 International") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/png-t20.png?raw=true";
                    logo.alt = "T20 International Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "UEFA W Champions League") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/URiA2CjD-tGWdkkzC.png";
                    logo.alt = "UEFA Women's Champions League Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "USL Championship") {
                    const logo = document.createElement("img");
                    logo.src = "https://static.flashscore.com/res/image/data/rHzeKoXI-nN00V7HJ.png";
                    logo.alt = "USL Championship Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "NCAA Men's Hockey") {
                    const logo = document.createElement("img");
                    logo.src = "https://www.ncaa.com/modules/custom/casablanca_core/img/sportbanners/icehockey-men.png";
                    logo.alt = "NCAA Men's Hockey Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "OHL") {
                    const logo = document.createElement("img");
                    logo.src = "https://upload.wikimedia.org/wikipedia/en/thumb/8/8f/OHL_Logo.svg/500px-OHL_Logo.svg.png";
                    logo.alt = "OHL Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "CAF Qualifiers") {
                    const logo = document.createElement("img");
                    logo.src = "https://upload.wikimedia.org/wikipedia/en/thumb/7/72/Confederation_of_African_Football_logo.svg/410px-Confederation_of_African_Football_logo.svg.png";
                    logo.alt = "CAF Qualifiers Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "UEFA European Qualifiers") {
                    const logo = document.createElement("img");
                    logo.src = "https://a4.espncdn.com/combiner/i?img=%2Fi%2Fleaguelogos%2Fsoccer%2F500%2F67.png";
                    logo.alt = "UEFA European Qualifiers Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "AFC Asian Cup Qualifiers" || leagueNameKey === "AFC Qualifiers") {
                    const logo = document.createElement("img");
                    logo.src = "https://upload.wikimedia.org/wikipedia/en/thumb/2/28/Asian_Football_Confederation_logo_2025.svg/500px-Asian_Football_Confederation_logo_2025.svg.png";
                    logo.alt = leagueNameKey + " Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "CONCACAF Qualifiers") {
                    const logo = document.createElement("img");
                    logo.src = "https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Concacaf_logo.svg/500px-Concacaf_logo.svg.png";
                    logo.alt = "CONCACAF Qualifiers Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Club Friendly") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/Soccer.png?raw=true";
                    logo.alt = "Club Friendly Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "International Friendly") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/Soccer.png?raw=true";
                    logo.alt = "International Friendly Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "NHL" || leagueNameKey === "NHL Preseason") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/nhl.png?raw=true";
                    logo.alt = "NHL Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "NWSL") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/nwsl.png?raw=true";
                    logo.alt = "NWSL Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "NASCAR Cup Series") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/nascar.png?raw=true";
                    logo.alt = "NASCAR Cup Series Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "UFC") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/ufc.png?raw=true";
                    logo.alt = "UFC Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "MLS") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/mls.png?raw=true";
                    logo.alt = "MLS Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Copa Sudamericana") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/CopaSudamericana.png?raw=true";
                    logo.alt = "Copa Sudamericana Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "FA Cup") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/FACup.png?raw=true";
                    logo.alt = "FA Cup Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "UEFA Champions League") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/UCL.png?raw=true";
                    logo.alt = "UEFA Champions League Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Coppa Italia") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/CoppaItalia.png?raw=true";
                    logo.alt = "Coppa Italia Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Copa Libertadores") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/CopaLibertadores.png?raw=true";
                    logo.alt = "Copa Libertadores Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Saudi Pro League") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/RSL.png?raw=true";
                    logo.alt = "Saudi Pro League Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Liga MX") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/ligamx.png?raw=true";
                    logo.alt = "Liga MX Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Ryder Cup") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/Ryder%20Cup.png?raw=true";
                    logo.alt = "Ryder Cup Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Eredivisie") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/Eredivisie.png?raw=true";
                    logo.alt = "Eredivisie Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "EFL Championship") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/EFL%20Championship.png?raw=true";
                    logo.alt = "EFL Championship Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Brasileirão") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/Brasileirao.png?raw=true";
                    logo.alt = "Brasileirão Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Argentine Primera División") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/png-Argentina%20Torneo%20Betano.png?raw=true";
                    logo.alt = "Argentine Primera División Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Scottish Cup") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/png-ScottishCup.png?raw=true";
                    logo.alt = "Scottish Cup Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Women's Super League") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/png-WSL.png?raw=true";
                    logo.alt = "Women's Super League Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Liga Portugal") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/png-Liga%20Portugal.png?raw=true";
                    logo.alt = "Liga Portugal Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Scottish Premiership") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/png-SPFL.png?raw=true";
                    logo.alt = "Scottish Premiership Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "Campeones Cup") {
                    const logo = document.createElement("img");
                    logo.src = "https://github.com/kyle4news/thporth/blob/main/CampeonesCup.png?raw=true";
                    logo.alt = "Campeones Cup Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                } else if (leagueNameKey === "FIFA U-20 World Cup") {
                    const logo = document.createElement("img");
                    logo.src = "https://upload.wikimedia.org/wikipedia/en/thumb/4/43/2025_FIFA_U-20_World_Cup_logo.svg/315px-2025_FIFA_U-20_World_Cup_logo.svg.png";
                    logo.alt = "FIFA U-20 World Cup Logo";
                    logo.style.width = "14px";
                    logo.style.height = "14px";
                    logo.style.objectFit = "contain";
                    logo.style.marginLeft = "5px";
                    logo.style.marginRight = "8px";
                    logo.style.verticalAlign = "middle";
                    logo.style.display = "inline-block";
                    logo.style.marginTop = "-2px";
                    title.appendChild(logo);
                }
                
                const textNode = document.createTextNode(leagueNameKey);
                title.appendChild(textNode);
                
                leagueSection.appendChild(title);
            }
            
            // Special handling for FEATURED section - group by title or league
            if (leagueNameKey === 'FEATURED' && isGroupedByLeague) {
                // Group featured games by title (if present) or by their actual league
                const featuredByTitle = {};
                games.forEach(game => {
                    // Use title if present, otherwise fall back to league name
                    const groupingKey = game.title || getLeagueDisplayName(game.League, game.Sport) || "Other";
                    if (!featuredByTitle[groupingKey]) featuredByTitle[groupingKey] = [];
                    featuredByTitle[groupingKey].push(game);
                });
                
                // Sort groups by the order field from Google Sheets
                // Create a map of titles to their minimum order value
                const titleOrderMap = {};
                games.forEach((game) => {
                    const groupingKey = game.title || getLeagueDisplayName(game.League, game.Sport) || "Other";
                    const gameOrder = game.order || 999;
                    if (!titleOrderMap.hasOwnProperty(groupingKey) || gameOrder < titleOrderMap[groupingKey]) {
                        titleOrderMap[groupingKey] = gameOrder;
                    }
                });
                
                const sortedTitles = Object.keys(featuredByTitle).sort((a, b) => 
                    (titleOrderMap[a] || 999) - (titleOrderMap[b] || 999)
                );
                
                // Render each title group within FEATURED
                sortedTitles.forEach(titleText => {
                    const titleGames = featuredByTitle[titleText];
                    
                    // Sort games within this title group by their order field
                    titleGames.sort((a, b) => (a.order || 999) - (b.order || 999));
                    
                    // Create sub-header (normal weight, preserve case, black box background)
                    const subHeader = document.createElement("div");
                    subHeader.style.fontWeight = "normal";
                    subHeader.style.textTransform = "none";
                    subHeader.style.fontSize = "11px";
                    subHeader.style.color = "#e5e7eb";
                    subHeader.style.padding = "8px 5px 4px 5px";
                    subHeader.style.marginTop = "0px";
                    subHeader.style.textAlign = "left";
                    subHeader.style.display = "flex";
                    subHeader.style.alignItems = "center";
                    subHeader.style.backgroundColor = "#000000";
                    subHeader.style.width = "100%";
                    subHeader.style.boxSizing = "border-box";
                    subHeader.textContent = titleText;
                    leagueSection.appendChild(subHeader);
                    
                    // Now render games for this sub-league
                    const subTable = document.createElement("table");
                    subTable.className = "game-table";
                    subTable.style.width = "100%";
                    subTable.style.maxWidth = "100%";
                    subTable.style.borderCollapse = "collapse";
                    subTable.style.tableLayout = "fixed";
                    
                    const subColgroup = document.createElement("colgroup");
                    subColgroup.innerHTML = `
                        <col style="width: 23%;">
                        <col style="width: 44%;">
                        <col style="width: 15%;">
                        <col style="width: 18%;">
                    `;
                    subTable.appendChild(subColgroup);
                    
                    let lastDisplayedTimeLabel = null;
                    
                    const spacerRow = subTable.insertRow();
                    spacerRow.innerHTML = '<td colspan="4" style="height: 5px; padding: 0; border: none;"></td>';
                    
                    titleGames.forEach(data => {
                        const home = getTeamDisplayName(data["Home Team"] || "");
                        const away = getTeamDisplayName(data["Away Team"] || "");
                        const homeScore = data["Home Score"], awayScore = data["Away Score"];
                        const matchStatus = (data["Match Status"] || "").toUpperCase();
                        const rawStart = data["Start Time"];
                        
                        const isLive = matchStatus.includes("IN PROGRESS") || matchStatus.includes("LIVE");
                        const isFinal = matchStatus.includes("FINISHED") || matchStatus.includes("FINAL") || matchStatus.includes("GAME OVER");
                        let currentTimeLabel = "";

                        if (isLive) {
                            let parsedStatus = '';
                            const displayLeague = getLeagueDisplayName(data.League, data.Sport);
                            if (displayLeague === "MLB") {
                                const inningHalf = data.inningHalf || "";
                                const currentInning = data.currentInning || "";
                                if (inningHalf && currentInning) parsedStatus = `${inningHalf.slice(0,3)} ${currentInning}`;
                            } else {
                                parsedStatus = getGranularLiveStatus(data);
                            }
                            currentTimeLabel = parsedStatus ? `<span style="color: red;">${parsedStatus}</span>` : '<span style="color: red;">Live</span>';
                        } else if (isFinal) {
                            currentTimeLabel = "F";
                        } else if (rawStart && rawStart.toDate) {
                            currentTimeLabel = luxon.DateTime.fromJSDate(rawStart.toDate()).toFormat('h:mm a');
                        } else {
                            currentTimeLabel = "TBD";
                        }

                        let displayTimeLabel = currentTimeLabel;
                        if (!isLive && !isFinal && currentTimeLabel !== "TBD") {
                            if (currentTimeLabel === lastDisplayedTimeLabel) displayTimeLabel = "";
                            else lastDisplayedTimeLabel = currentTimeLabel;
                        }
                        
                        let displayAwayScore = awayScore ?? '';
                        let displayHomeScore = homeScore ?? '';
                        
                        if (!isLive && !isFinal) {
                           displayAwayScore = '';
                           displayHomeScore = '';
                        }

                        const row1 = subTable.insertRow();
                        row1.className = "game-row";
                        const row2 = subTable.insertRow();
                        row2.className = "game-row game-separator";
                        
                        const displayLeagueForCheck = getLeagueDisplayName(data.League, data.Sport);
                        const isSoccerLeague = ['Premier League', 'LaLiga', 'Serie A', 'Bundesliga', 'Ligue 1', 'MLS', 'UEFA Champions League', 'UEFA Europa League', 'UEFA Conference League', 'NWSL', 'FA Cup', 'Coppa Italia', 'DFB-Pokal', 'Carabao Cup', 'Super Cup', 'Eredivisie', 'Liga Portugal', 'EFL Championship', 'Brasileirão', "Women's Super League", 'Argentine Primera División', 'Scottish Cup', 'Liga MX', 'Saudi Pro League', 'Scottish Premiership', 'EFL Cup', 'Super Lig', 'FIFA U-20 World Cup', 'Campeones Cup', 'USL Championship', 'UEFA W Champions League', 'CAF Qualifiers', 'UEFA European Qualifiers', 'AFC Asian Cup Qualifiers', 'AFC Qualifiers', 'CONCACAF Qualifiers', 'Club Friendly', 'International Friendly'].includes(displayLeagueForCheck);
                        
                        if (isSoccerLeague) {
                            row1.innerHTML = `<td rowspan="2" style="text-align: left; font-size: 11px; vertical-align: top; padding: 2px 1px; box-sizing: border-box;">${displayTimeLabel}</td><td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${home}</td><td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;">${displayHomeScore}</td><td rowspan="2" style="position: relative; text-align: center; font-size: 10px; color: #9ca3af; padding: 2px 1px; box-sizing: border-box;"><div style="position: absolute; top: 35%; left: 50%; transform: translate(-50%, -50%);">${data.channel || ''}</div></td>`;
                            row2.innerHTML = `<td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${away}</td><td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;">${displayAwayScore}</td>`;
                        } else {
                            row1.innerHTML = `<td rowspan="2" style="text-align: left; font-size: 11px; vertical-align: top; padding: 2px 1px; box-sizing: border-box;">${displayTimeLabel}</td><td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${away}</td><td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;">${displayAwayScore}</td><td rowspan="2" style="position: relative; text-align: center; font-size: 10px; color: #9ca3af; padding: 2px 1px; box-sizing: border-box;"><div style="position: absolute; top: 35%; left: 50%; transform: translate(-50%, -50%);">${data.channel || ''}</div></td>`;
                            row2.innerHTML = `<td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${home}</td><td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;">${displayHomeScore}</td>`;
                        }

                        let gameStatusClass = 'scheduled-game';
                        if (isLive) gameStatusClass = 'live-game';
                        if (isFinal) gameStatusClass = 'final-game';
                        row1.classList.add(gameStatusClass);
                        row2.classList.add(gameStatusClass);
                    });
                    
                    leagueSection.appendChild(subTable);
                });
                
                container.appendChild(leagueSection);
                return; // Skip normal rendering for FEATURED
            }

            const table = document.createElement("table");
            table.className = "game-table";
            table.style.width = "100%";
            table.style.maxWidth = "100%";
            table.style.borderCollapse = "collapse";
            table.style.tableLayout = "fixed";
            
            // Add colgroup with percentage widths to work in both contexts
            const colgroup = document.createElement("colgroup");
            colgroup.innerHTML = `
                <col style="width: 23%;">   <!-- time -->
                <col style="width: 44%;">  <!-- team -->
                <col style="width: 15%;">   <!-- score -->
                <col style="width: 18%;">   <!-- channel -->
            `;
            table.appendChild(colgroup);
            
            let lastDisplayedTimeLabel = null;

            // Add spacer row for 5px top padding
            const spacerRow = table.insertRow();
            spacerRow.innerHTML = '<td colspan="4" style="height: 5px; padding: 0; border: none;"></td>';

            games.forEach(data => {
                const home = getTeamDisplayName(data["Home Team"] || "");
                const away = getTeamDisplayName(data["Away Team"] || "");
                const homeScore = data["Home Score"], awayScore = data["Away Score"];
                const matchStatus = (data["Match Status"] || "").toUpperCase();
                const rawStart = data["Start Time"];
                
                const isLive = matchStatus.includes("IN PROGRESS") || matchStatus.includes("LIVE");
                const isFinal = matchStatus.includes("FINISHED") || matchStatus.includes("FINAL") || matchStatus.includes("GAME OVER");
                let currentTimeLabel = "";

                if (isLive) {
                    let parsedStatus = '';
                    const displayLeague = getLeagueDisplayName(data.League, data.Sport);
                    if (displayLeague === "MLB") {
                        const inningHalf = data.inningHalf || "";
                        const currentInning = data.currentInning || "";
                        if (inningHalf && currentInning) parsedStatus = `${inningHalf.slice(0,3)} ${currentInning}`;
                    } else {
                        // Use granular live status for ALL sports (including EFL Cup, Coppa Italia, etc.)
                        parsedStatus = getGranularLiveStatus(data);
                    }
                    currentTimeLabel = parsedStatus ? `<span style="color: red;">${parsedStatus}</span>` : '<span style="color: red;">Live</span>';
                } else if (isFinal) {
                    currentTimeLabel = "F";
                } else if (rawStart && rawStart.toDate) {
                    currentTimeLabel = luxon.DateTime.fromJSDate(rawStart.toDate()).toFormat('h:mm a');
                } else {
                    currentTimeLabel = "TBD";
                }

                let displayTimeLabel = currentTimeLabel;
                if (!isLive && !isFinal && currentTimeLabel !== "TBD") {
                    if (currentTimeLabel === lastDisplayedTimeLabel) displayTimeLabel = "";
                    else lastDisplayedTimeLabel = currentTimeLabel;
                }
                
                let displayAwayScore = awayScore ?? '';
                let displayHomeScore = homeScore ?? '';
                
                if (!isLive && !isFinal) {
                   displayAwayScore = '';
                   displayHomeScore = '';
                }

                const row1 = table.insertRow();
                row1.className = "game-row";
                const row2 = table.insertRow();
                row2.className = "game-row game-separator";
                
                // Check if this is a soccer league - soccer leagues show home on top, away on bottom
                const displayLeague = getLeagueDisplayName(data.League, data.Sport);
                const isSoccerLeague = ['Premier League', 'LaLiga', 'Serie A', 'Bundesliga', 'Ligue 1', 'MLS', 'UEFA Champions League', 'UEFA Europa League', 'UEFA Conference League', 'NWSL', 'FA Cup', 'Coppa Italia', 'DFB-Pokal', 'Carabao Cup', 'Super Cup', 'Eredivisie', 'Liga Portugal', 'EFL Championship', 'Brasileirão', "Women's Super League", 'Argentine Primera División', 'Scottish Cup', 'Liga MX', 'Saudi Pro League', 'Scottish Premiership', 'EFL Cup', 'Super Lig', 'FIFA U-20 World Cup', 'Campeones Cup', 'USL Championship', 'UEFA W Champions League', 'CAF Qualifiers', 'UEFA European Qualifiers', 'AFC Asian Cup Qualifiers', 'AFC Qualifiers', 'CONCACAF Qualifiers', 'Club Friendly'].includes(displayLeague);
                
                const channelDisplay = data.channel ? `<td rowspan="2" style="width: 50px; text-align: center; font-size: 10px; color: #9ca3af; vertical-align: top; padding-left: 2px; padding-right: 2px;">${data.channel}</td>` : '<td rowspan="2" style="width: 50px; padding-left: 2px; padding-right: 2px;"></td>';
                
                if (isSoccerLeague) {
                    // Soccer: home team on top, away team on bottom
                    row1.innerHTML = `<td rowspan="2" style="text-align: left; font-size: 11px; vertical-align: top; padding: 2px 1px; box-sizing: border-box;">${displayTimeLabel}</td><td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${home}</td><td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;">${displayHomeScore}</td><td rowspan="2" style="position: relative; text-align: center; font-size: 10px; color: #9ca3af; padding: 2px 1px; box-sizing: border-box;"><div style="position: absolute; top: 35%; left: 50%; transform: translate(-50%, -50%);">${data.channel || ''}</div></td>`;
                    row2.innerHTML = `<td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${away}</td><td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;">${displayAwayScore}</td>`;
                } else {
                    // All other leagues: away team on top, home team on bottom
                row1.innerHTML = `<td rowspan="2" style="text-align: left; font-size: 11px; vertical-align: top; padding: 2px 1px; box-sizing: border-box;">${displayTimeLabel}</td><td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${away}</td><td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;">${displayAwayScore}</td><td rowspan="2" style="position: relative; text-align: center; font-size: 10px; color: #9ca3af; padding: 2px 1px; box-sizing: border-box;"><div style="position: absolute; top: 35%; left: 50%; transform: translate(-50%, -50%);">${data.channel || ''}</div></td>`;
                row2.innerHTML = `<td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${home}</td><td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;">${displayHomeScore}</td>`;
                }

                let gameStatusClass = 'scheduled-game';
                if (isLive) gameStatusClass = 'live-game';
                if (isFinal) gameStatusClass = 'final-game';
                row1.classList.add(gameStatusClass);
                row2.classList.add(gameStatusClass);
            });
            
            // Add collapse functionality for grouped leagues
            if (isGroupedByLeague) {
                const isCollapsed = COLLAPSED_LEAGUES.includes(leagueNameKey);
                const title = leagueSection.querySelector('.league-title');
                
                // Only add arrow and two-column layout for leagues that can be collapsed
                if (isCollapsed) {
                    // Create two-column layout for collapsed leagues
                    const titleContainer = document.createElement("div");
                    titleContainer.style.display = "flex";
                    titleContainer.style.alignItems = "center";
                    titleContainer.style.width = "100%";
                    
                    // Create left column for league name (90%)
                    const nameColumn = document.createElement("div");
                    nameColumn.style.flex = "0 0 90%";
                    nameColumn.style.overflow = "hidden";
                    nameColumn.style.wordWrap = "break-word";
                    
                    // Create right column for arrow (10%)
                    const arrowColumn = document.createElement("div");
                    arrowColumn.style.flex = "0 0 10%";
                    arrowColumn.style.textAlign = "center";
                    arrowColumn.style.display = "flex";
                    arrowColumn.style.alignItems = "center";
                    arrowColumn.style.justifyContent = "center";
                    
                    // Move existing content to name column
                    nameColumn.innerHTML = title.innerHTML;
                    
                    // Add collapse/expand arrow
                    const arrow = document.createElement("span");
                    arrow.className = "collapse-arrow";
                    arrow.innerHTML = "▶"; // Right arrow (collapsed state)
                    arrow.style.cursor = "pointer";
                    arrow.style.fontSize = "10px";
                    arrow.style.transition = "transform 0.2s ease";
                    arrow.style.userSelect = "none";
                    arrowColumn.appendChild(arrow);
                    
                    // Add columns to container
                    titleContainer.appendChild(nameColumn);
                    titleContainer.appendChild(arrowColumn);
                    
                    // Replace title content with container
                    title.innerHTML = "";
                    title.appendChild(titleContainer);
                    
                    // Initially hide table if league is in collapsed list
                    table.style.display = "none";
                }
                
                // Add click handler to title for toggling (only for leagues that can collapse)
                if (isCollapsed && title) {
                    title.style.cursor = "pointer";
                    title.addEventListener('click', function() {
                        const arrow = this.querySelector('.collapse-arrow');
                        if (table.style.display === "none") {
                            // Expand
                            table.style.display = "";
                            if (arrow) {
                                arrow.innerHTML = "▼";
                            }
                        } else {
                            // Collapse
                            table.style.display = "none";
                            if (arrow) {
                                arrow.innerHTML = "▶";
                            }
                        }
                    });
                }
            }
            
            leagueSection.appendChild(table);
            container.appendChild(leagueSection);
        });
    }

    // --- 6. DATA FETCHING AND LOGIC FUNCTIONS ---
    function sortGames(a, b) {
        const statusA = (a["Match Status"] || "").toUpperCase();
        const statusB = (b["Match Status"] || "").toUpperCase();
        const isFinalA = statusA.includes("FINISHED") || statusA.includes("FINAL");
        const isFinalB = statusB.includes("FINISHED") || statusB.includes("FINAL");
        if (isFinalA && !isFinalB) return 1;
        if (!isFinalA && isFinalB) return -1;
        return a["Start Time"] - b["Start Time"];
    }

     function fetchLeagueSchedule(leagueId, leagueName) {
        scheduleContent.innerHTML = '<p style="color: #9ca3af;">Loading schedule...</p>';
        const { DateTime } = luxon;
        const todayStr = DateTime.now().setZone('America/Denver').toISODate();
        
        // Find the league config to get the collection name
        const leagueConfig = Object.values(LEAGUE_DATA_CONFIG).find(config => config.leagueId === leagueId);
        if (!leagueConfig || !leagueConfig.upcomingCollectionName) {
            scheduleContent.innerHTML = `<p>No ${leagueName} games found for today.</p>`;
            return;
        }
        
        // All leagues use FlashLiveAPI (gamesCollectionRef)
        // For NCAAF, also filter by Sport to exclude hockey games
        let query = gamesCollectionRef.where('League', '==', leagueId).where('gameDate', '==', todayStr);
        if (leagueId === 'USA: NCAA') {
            query = query.where('Sport', '==', 'American Football');
        }
        
        query.onSnapshot(snapshot => {
                if (snapshot.empty) {
                    scheduleContent.innerHTML = `<p>No ${leagueName} games found for today.</p>`;
                    return;
                }
                const gamesData = snapshot.docs.map(doc => doc.data()).sort(sortGames);
                renderGames(scheduleContent, gamesData, false);
            }, err => { scheduleContent.innerHTML = '<p style="color: #ef4444;">Error loading schedule.</p>'; });
    }

    function fetchYesterdayScoresForLeague(leagueId, leagueName) {
        const yesterdayScheduleContent = document.getElementById('league-schedule-yesterday-content');
        if (!yesterdayScheduleContent) return;

        yesterdayScheduleContent.innerHTML = '<p style="color: #9ca3af;">Loading yesterday\'s scores...</p>';

        // Use the same logic as the working home page fetchYesterdayScores function
        const yesterdayScoresRef = db.collection("artifacts/flashlive-daily-scraper/public/data/yesterdayScores");
        
        yesterdayScoresRef.get()
            .then(snapshot => {
                if (snapshot.empty) {
                    yesterdayScheduleContent.innerHTML = `<p>No completed games found for yesterday.</p>`;
                    return;
                }
                
                // Filter games by league using flexible matching
                const allGames = snapshot.docs.map(doc => doc.data());
                const leagueGames = allGames.filter(game => {
                    // First try exact match
                    if (game.League === leagueId) {
                        return true;
                    }
                    
                    // Then try flexible matching based on league key
                    const gameLeagueKey = getLeagueKeyFromDatabaseName(game.League);
                    const currentLeagueKey = getLeagueKeyFromDatabaseName(leagueId);
                    
                    // If both have matching league keys, include the game
                    if (gameLeagueKey && currentLeagueKey && gameLeagueKey === currentLeagueKey) {
                        return true;
                    }
                    
                    // Fallback: check if the database league name contains the target league name
                    const targetLeagueName = leagueName.toLowerCase();
                    const gameLeagueName = game.League.toLowerCase();
                    
                    // For UEFA Champions League, check for "champions league" in the name
                    if (targetLeagueName.includes('uefa champions league') && gameLeagueName.includes('champions league')) {
                        return true;
                    }
                    // For other leagues, check for partial matches
                    if (gameLeagueName.includes(targetLeagueName) || targetLeagueName.includes(gameLeagueName)) {
                        return true;
                    }
                    
                    return false;
                });
                
                // For NCAAF, filter out hockey games from yesterday's scores
                const filteredLeagueGames = leagueGames.filter(game => {
                    if (leagueId === 'USA: NCAA') {
                        return game.Sport === 'American Football';
                    }
                    return true;
                });
                
                if (filteredLeagueGames.length === 0) {
                    yesterdayScheduleContent.innerHTML = `<p>No completed games found for yesterday.</p>`;
                    return;
                }
                
                const gamesData = filteredLeagueGames.sort(sortGames);
                renderGames(yesterdayScheduleContent, gamesData, false);
            }, err => { 
                console.error('Error fetching yesterday scores for', leagueId, ':', err);
                yesterdayScheduleContent.innerHTML = '<p style="color: #ef4444;">Error loading yesterday\'s scores.</p>'; 
            });
    }

    // New function to load standings from Firestore (FlashLive API data)
    async function fetchLeagueStandingsFromFirestore(leagueKey) {
        console.log('fetchLeagueStandingsFromFirestore called with leagueKey:', leagueKey);
        const standingsContent = document.getElementById('league-standings-content');
        if (!standingsContent) return;
        
        standingsContent.innerHTML = '<p style="color: #9ca3af;">Loading standings...</p>';
        
        // Map league keys to Firestore document names
        const firestoreKeyMap = {
            'PremierLeague': 'Premier League',
            'LaLiga': 'LaLiga',
            'SerieA': 'Serie A',
            'Bundesliga': 'Bundesliga',
            'Ligue1': 'Ligue 1',
            'MLS': 'MLS',
            'NFL': 'NFL',
            'MLB': 'MLB',
            'NBA': 'NBA',
            'NHL': 'NHL',
            'WNBA': 'WNBA'
        };
        
        const firestoreKey = firestoreKeyMap[leagueKey] || leagueKey;
        console.log(`Looking for standings in Firestore: ${firestoreKey} (from leagueKey: ${leagueKey})`);
        
        try {
            const standingsDoc = await db.collection('standings').doc(firestoreKey).get();
            
            if (!standingsDoc.exists) {
                // Fallback to CSV if no Firestore data
                return false;
            }
            
            const standingsData = standingsDoc.data();
            console.log('Raw Firestore data:', standingsData);
            const teams = standingsData.data || [];
            console.log('Teams array:', teams);
            
            if (teams.length === 0) {
                standingsContent.innerHTML = '<p>No standings data available.</p>';
                return true;
            }
            
            console.log(`Standings for ${firestoreKey}:`, teams.length, 'teams');
            console.log('Sample team data:', teams[0]);
            console.log('Has Conference?', teams[0].Conference);
            console.log('Has Division?', teams[0].Division);
            console.log('All teams:', teams);
            
            // Build standings table
            let html = '<table class="standings-table" style="width: 100%; border-collapse: collapse; color: #ffffff;">';
            
            // Determine if this is a soccer league (uses Points) or US sports (uses Wins/Losses)
            const isSoccerLeague = teams[0].Points !== undefined && teams[0].Points !== 0;
            
            console.log('Is soccer league?', isSoccerLeague);
            
            if (isSoccerLeague) {
                // Soccer standings: Rank, Team, MP, W, D, L, GF-GA, Pts
                html += '<thead><tr style="background-color: #4a4a4a; font-size: 11px; font-weight: 600;">';
                html += '<th style="padding: 8px; text-align: left; width: 40px;">Rank</th>';
                html += '<th style="padding: 8px; text-align: left;">Team</th>';
                html += '<th style="padding: 8px; text-align: center; width: 40px;">MP</th>';
                html += '<th style="padding: 8px; text-align: center; width: 40px;">W</th>';
                html += '<th style="padding: 8px; text-align: center; width: 40px;">D</th>';
                html += '<th style="padding: 8px; text-align: center; width: 40px;">L</th>';
                html += '<th style="padding: 8px; text-align: center; width: 70px;">GF-GA</th>';
                html += '<th style="padding: 8px; text-align: center; width: 50px;">Pts</th>';
                html += '</tr></thead><tbody>';
                
                teams.forEach((team, index) => {
                    const rowStyle = index % 2 === 0 ? 'background-color: #2a2a2a;' : 'background-color: #1f1f1f;';
                    html += `<tr style="${rowStyle}">`;
                    html += `<td style="padding: 8px; text-align: left; font-size: 12px;">${team.Rank}</td>`;
                    html += `<td style="padding: 8px; text-align: left; font-size: 12px; font-weight: 500;">${team.Team}</td>`;
                    html += `<td style="padding: 8px; text-align: center; font-size: 12px;">${team.MatchesPlayed}</td>`;
                    html += `<td style="padding: 8px; text-align: center; font-size: 12px;">${team.Wins}</td>`;
                    html += `<td style="padding: 8px; text-align: center; font-size: 12px;">${team.Draws || 0}</td>`;
                    html += `<td style="padding: 8px; text-align: center; font-size: 12px;">${team.Losses || 0}</td>`;
                    html += `<td style="padding: 8px; text-align: center; font-size: 12px;">${team.Goals}</td>`;
                    html += `<td style="padding: 8px; text-align: center; font-size: 12px; font-weight: bold;">${Math.round(team.Points)}</td>`;
                    html += '</tr>';
                });
            } else {
                // US Sports standings: Use specific tabbed layouts for each league
                console.log('Processing US Sports standings for leagueKey:', leagueKey);
                if (leagueKey === 'NFL') {
                    console.log('Calling createNFLStandings with teams:', teams);
                    html = createNFLStandings(teams);
                } else if (leagueKey === 'MLB') {
                    html = createMLBStandings(teams);
                } else if (leagueKey === 'NBA') {
                    html = createNBAStandings(teams);
                } else if (leagueKey === 'NHL') {
                    html = createNHLStandings(teams);
                } else if (leagueKey === 'WNBA') {
                    html = createWNBAStandings(teams);
                } else {
                    // Fallback to simple list for other leagues
                    html += '<thead><tr style="background-color: #4a4a4a; font-size: 11px; font-weight: 600;">';
                    html += '<th style="padding: 8px; text-align: left; width: 40px;">Rank</th>';
                    html += '<th style="padding: 8px; text-align: left;">Team</th>';
                    html += '<th style="padding: 8px; text-align: center; width: 40px;">W</th>';
                    html += '<th style="padding: 8px; text-align: center; width: 40px;">L</th>';
                    html += '<th style="padding: 8px; text-align: center; width: 60px;">PCT</th>';
                    html += '</tr></thead><tbody>';
                    
                    teams.forEach((team, index) => {
                        const rowStyle = index % 2 === 0 ? 'background-color: #2a2a2a;' : 'background-color: #1f1f1f;';
                        const pct = team.Wins && team.Losses !== undefined ? 
                            (team.Wins / (team.Wins + team.Losses)).toFixed(3) : '0.000';
                        
                        html += `<tr style="${rowStyle}">`;
                        html += `<td style="padding: 8px; text-align: left; font-size: 12px;">${team.Rank}</td>`;
                        html += `<td style="padding: 8px; text-align: left; font-size: 12px; font-weight: 500;">${team.Team}</td>`;
                        html += `<td style="padding: 8px; text-align: center; font-size: 12px;">${team.Wins}</td>`;
                        html += `<td style="padding: 8px; text-align: center; font-size: 12px;">${team.Losses || 0}</td>`;
                        html += `<td style="padding: 8px; text-align: center; font-size: 12px;">${pct}</td>`;
                        html += '</tr>';
                    });
                    html += '</tbody></table>';
                }
            }
            
            html += '</table>';
            console.log('Final HTML being inserted:', html);
            standingsContent.innerHTML = html;
            console.log('Content inserted into DOM. Element content:', standingsContent.innerHTML.substring(0, 200) + '...');
            return true;
            
        } catch (error) {
            console.error(`Error loading Firestore standings for ${leagueKey}:`, error);
            return false;
        }
    }

    // NFL Standings: AFC/NFC tabs with divisions
    function createNFLStandings(teams) {
        console.log('createNFLStandings received teams:', teams);
        console.log('Sample team:', teams[0]);
        console.log('All team conferences:', teams.map(t => t.Conference));
        console.log('Sample team properties:', Object.keys(teams[0] || {}));
        console.log('Sample team values:', teams[0]);
        const afcTeams = teams.filter(team => team.Conference === 'AFC');
        const nfcTeams = teams.filter(team => team.Conference === 'NFC');
        console.log('AFC teams:', afcTeams.length);
        console.log('NFC teams:', nfcTeams.length);
        console.log('AFC sample team:', afcTeams[0]);
        
        let html = '<div class="standings-tabs">';
        html += '<button class="tab-button active" onclick="showNFLTab(\'afc\')" id="nfl-afc-tab">AFC</button>';
        html += '<button class="tab-button" onclick="showNFLTab(\'nfc\')" id="nfl-nfc-tab">NFC</button>';
        html += '</div>';
        html += '<div id="nfl-afc-content" class="tab-content active">';
        html += createNFLConferenceStandings(afcTeams, 'AFC');
        html += '</div>';
        html += '<div id="nfl-nfc-content" class="tab-content">';
        html += createNFLConferenceStandings(nfcTeams, 'NFC');
        html += '</div>';
        // JavaScript functions will be defined elsewhere
        
        console.log('Generated NFL HTML:', html);
        return html;
    }
    
    function createNFLConferenceStandings(teams, conference) {
        const divisions = ['East', 'West', 'North', 'South'];
        let html = '';
        
        console.log('createNFLConferenceStandings called with teams:', teams.length, 'conference:', conference);
        console.log('Sample team division:', teams[0]?.Division);
        
        divisions.forEach(division => {
            const divisionTeams = teams.filter(team => team.Division === conference + ' ' + division);
            console.log(conference + ' ' + division + ' teams:', divisionTeams.length);
            console.log('All divisions in this conference:', teams.map(t => t.Division));
            console.log('Sample division team:', divisionTeams[0]);
            if (divisionTeams.length === 0) return;
            
            html += '<div class="division-section">';
            html += '<h3 class="division-header">' + conference + ' ' + division + '</h3>';
            html += '<table class="standings-table" style="width: 100%; border-collapse: collapse; color: #ffffff; margin-bottom: 15px;">';
            html += '<thead>';
            html += '<tr style="background-color: #4a4a4a; font-size: 11px; font-weight: 600;">';
            html += '<th style="padding: 8px; text-align: left; border-bottom: 1px solid #666;">Team</th>';
            html += '<th style="padding: 8px; text-align: center; border-bottom: 1px solid #666;">W</th>';
            html += '<th style="padding: 8px; text-align: center; border-bottom: 1px solid #666;">L</th>';
            html += '<th style="padding: 8px; text-align: center; border-bottom: 1px solid #666;">T</th>';
            html += '</tr>';
            html += '</thead>';
            html += '<tbody>';
            
            divisionTeams.forEach((team, index) => {
                console.log('Processing team:', team.Team, 'Wins:', team.Wins, 'Losses:', team.Losses, 'Ties:', team.Ties);
                const rowStyle = index % 2 === 0 ? 'background-color: #2a2a2a;' : 'background-color: #1f1f1f;';
                html += '<tr style="' + rowStyle + '">';
                html += '<td style="padding: 8px; text-align: left; font-size: 12px; font-weight: 500; color: #ffffff;">' + team.Team + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px; color: #ffffff;">' + team.Wins + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px; color: #ffffff;">' + team.Losses + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px; color: #ffffff;">' + (team.Ties || 0) + '</td>';
                html += '</tr>';
            });
            
            html += '</tbody></table></div>';
        });
        
        return html;
    }

    // MLB Standings: AL/NL tabs with divisions
    function createMLBStandings(teams) {
        const alTeams = teams.filter(team => team.League === 'AL');
        const nlTeams = teams.filter(team => team.League === 'NL');
        
        let html = '<div class="standings-tabs">';
        html += '<button class="tab-button active" onclick="showMLBTab(\'al\')" id="mlb-al-tab">AL</button>';
        html += '<button class="tab-button" onclick="showMLBTab(\'nl\')" id="mlb-nl-tab">NL</button>';
        html += '</div>';
        html += '<div id="mlb-al-content" class="tab-content active">';
        html += createMLBLeagueStandings(alTeams, 'AL');
        html += '</div>';
        html += '<div id="mlb-nl-content" class="tab-content">';
        html += createMLBLeagueStandings(nlTeams, 'NL');
        html += '</div>';
        // JavaScript functions will be defined elsewhere
        
        return html;
    }
    
    function createMLBLeagueStandings(teams, league) {
        const divisions = ['East', 'Central', 'West'];
        let html = '';
        
        divisions.forEach(division => {
            const divisionTeams = teams.filter(team => team.Division === division);
            if (divisionTeams.length === 0) return;
            
            html += '<div class="division-section">';
            html += '<h3 class="division-header">' + league + ' ' + division + '</h3>';
            html += '<table class="standings-table" style="width: 100%; border-collapse: collapse; color: #ffffff; margin-bottom: 20px;">';
            html += '<thead>';
            html += '<tr style="background-color: #4a4a4a; font-size: 11px; font-weight: 600;">';
            html += '<th style="padding: 8px; text-align: left; width: 40px; border-bottom: 1px solid #666;">Team</th>';
            html += '<th style="padding: 8px; text-align: center; width: 40px; border-bottom: 1px solid #666;">W</th>';
            html += '<th style="padding: 8px; text-align: center; width: 40px; border-bottom: 1px solid #666;">L</th>';
            html += '</tr>';
            html += '</thead>';
            html += '<tbody>';
            
            divisionTeams.forEach((team, index) => {
                const rowStyle = index % 2 === 0 ? 'background-color: #2a2a2a;' : 'background-color: #1f1f1f;';
                html += '<tr style="' + rowStyle + '">';
                html += '<td style="padding: 8px; text-align: left; font-size: 12px; font-weight: 500; color: #ffffff;">' + team.Team + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px; color: #ffffff;">' + team.Wins + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px; color: #ffffff;">' + team.Losses + '</td>';
                html += '</tr>';
            });
            
            html += '</tbody></table></div>';
        });
        
        return html;
    }

    // NBA Standings: East/West tabs
    function createNBAStandings(teams) {
        const eastTeams = teams.filter(team => team.Conference === 'Eastern Conference');
        const westTeams = teams.filter(team => team.Conference === 'Western Conference');
        
        let html = '<div class="standings-tabs">';
        html += '<button class="tab-button active" onclick="showNBATab(\'east\')" id="nba-east-tab">Eastern Conference</button>';
        html += '<button class="tab-button" onclick="showNBATab(\'west\')" id="nba-west-tab">Western Conference</button>';
        html += '</div>';
        html += '<div id="nba-east-content" class="tab-content active">';
        html += createNBAConferenceStandings(eastTeams, 'Eastern Conference');
        html += '</div>';
        html += '<div id="nba-west-content" class="tab-content">';
        html += createNBAConferenceStandings(westTeams, 'Western Conference');
        html += '</div>';
        
        return html;
    }
    
    function createNBAConferenceStandings(teams, conference) {
        let html = '<div class="conference-section">';
        html += '<table class="standings-table" style="width: 100%; border-collapse: collapse; color: #ffffff;">';
        html += '<thead>';
        html += '<tr style="background-color: #4a4a4a; font-size: 11px; font-weight: 600;">';
        html += '<th style="padding: 8px; text-align: left; width: 40px;">Team</th>';
        html += '<th style="padding: 8px; text-align: center; width: 40px;">W</th>';
        html += '<th style="padding: 8px; text-align: center; width: 40px;">L</th>';
        html += '</tr>';
        html += '</thead>';
        html += '<tbody>';
        
        teams.forEach((team, index) => {
            const rowStyle = index % 2 === 0 ? 'background-color: #2a2a2a;' : 'background-color: #1f1f1f;';
            html += '<tr style="' + rowStyle + '">';
            html += '<td style="padding: 8px; text-align: left; font-size: 12px; font-weight: 500;">' + team.Team + '</td>';
            html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Wins + '</td>';
            html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Losses + '</td>';
            html += '</tr>';
        });
        
        html += '</tbody></table></div>';
        return html;
    }

    // NHL Standings: East/West tabs with divisions
    function createNHLStandings(teams) {
        const eastTeams = teams.filter(team => team.Conference === 'Eastern Conference');
        const westTeams = teams.filter(team => team.Conference === 'Western Conference');
        
        let html = '<div class="standings-tabs">';
        html += '<button class="tab-button active" onclick="showNHLTab(\'east\')" id="nhl-east-tab">Eastern Conference</button>';
        html += '<button class="tab-button" onclick="showNHLTab(\'west\')" id="nhl-west-tab">Western Conference</button>';
        html += '</div>';
        html += '<div id="nhl-east-content" class="tab-content active">';
        html += createNHLConferenceStandings(eastTeams, 'Eastern Conference');
        html += '</div>';
        html += '<div id="nhl-west-content" class="tab-content">';
        html += createNHLConferenceStandings(westTeams, 'Western Conference');
        html += '</div>';
        
        return html;
    }
    
    function createNHLConferenceStandings(teams, conference) {
        const divisions = conference === 'Eastern Conference' ? ['Atlantic Division', 'Metropolitan Division'] : ['Central Division', 'Pacific Division'];
        let html = '';
        
        divisions.forEach(division => {
            const divisionTeams = teams.filter(team => team.Division === division);
            if (divisionTeams.length === 0) return;
            
            html += '<div class="division-section">';
            html += '<h3 class="division-header">' + division + '</h3>';
            html += '<table class="standings-table" style="width: 100%; border-collapse: collapse; color: #ffffff; margin-bottom: 20px;">';
            html += '<thead>';
            html += '<tr style="background-color: #4a4a4a; font-size: 11px; font-weight: 600;">';
            html += '<th style="padding: 8px; text-align: left; width: 40px;">Team</th>';
            html += '<th style="padding: 8px; text-align: center; width: 40px;">Pts</th>';
            html += '<th style="padding: 8px; text-align: center; width: 40px;">GP</th>';
            html += '<th style="padding: 8px; text-align: center; width: 40px;">W</th>';
            html += '<th style="padding: 8px; text-align: center; width: 40px;">L</th>';
            html += '<th style="padding: 8px; text-align: center; width: 40px;">OTL</th>';
            html += '</tr>';
            html += '</thead>';
            html += '<tbody>';
            
            divisionTeams.forEach((team, index) => {
                const rowStyle = index % 2 === 0 ? 'background-color: #2a2a2a;' : 'background-color: #1f1f1f;';
                html += '<tr style="' + rowStyle + '">';
                html += '<td style="padding: 8px; text-align: left; font-size: 12px; font-weight: 500;">' + team.Team + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Points + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.GamesPlayed + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Wins + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Losses + '</td>';
                html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + (team.OvertimeLosses || 0) + '</td>';
                html += '</tr>';
            });
            
            html += '</tbody></table></div>';
        });
        
        return html;
    }

    // WNBA Standings: Conference headers (no tabs)
    function createWNBAStandings(teams) {
        console.log('createWNBAStandings received teams:', teams);
        console.log('Sample WNBA team:', teams[0]);
        const eastTeams = teams.filter(team => team.Conference === 'Eastern Conference');
        const westTeams = teams.filter(team => team.Conference === 'Western Conference');
        console.log('East teams:', eastTeams.length);
        console.log('West teams:', westTeams.length);
        
        let html = '<div class="wnba-standings">';
        html += '<div class="conference-section">';
        html += '<h3 class="conference-header">Eastern Conference</h3>';
        html += '<table class="standings-table" style="width: 100%; border-collapse: collapse; color: #ffffff; margin-bottom: 30px;">';
        html += '<thead>';
        html += '<tr style="background-color: #4a4a4a; font-size: 11px; font-weight: 600;">';
        html += '<th style="padding: 8px; text-align: left; width: 40px;">Team</th>';
        html += '<th style="padding: 8px; text-align: center; width: 40px;">W</th>';
        html += '<th style="padding: 8px; text-align: center; width: 40px;">L</th>';
        html += '</tr>';
        html += '</thead>';
        html += '<tbody>';
        
        eastTeams.forEach((team, index) => {
            const rowStyle = index % 2 === 0 ? 'background-color: #2a2a2a;' : 'background-color: #1f1f1f;';
            html += '<tr style="' + rowStyle + '">';
            html += '<td style="padding: 8px; text-align: left; font-size: 12px; font-weight: 500;">' + team.Team + '</td>';
            html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Wins + '</td>';
            html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Losses + '</td>';
            html += '</tr>';
        });
        
        html += '</tbody>';
        html += '</table>';
        html += '</div>';
        html += '<div class="conference-section">';
        html += '<h3 class="conference-header">Western Conference</h3>';
        html += '<table class="standings-table" style="width: 100%; border-collapse: collapse; color: #ffffff;">';
        html += '<thead>';
        html += '<tr style="background-color: #4a4a4a; font-size: 11px; font-weight: 600;">';
        html += '<th style="padding: 8px; text-align: left; width: 40px;">Team</th>';
        html += '<th style="padding: 8px; text-align: center; width: 40px;">W</th>';
        html += '<th style="padding: 8px; text-align: center; width: 40px;">L</th>';
        html += '</tr>';
        html += '</thead>';
        html += '<tbody>';
        
        westTeams.forEach((team, index) => {
            const rowStyle = index % 2 === 0 ? 'background-color: #2a2a2a;' : 'background-color: #1f1f1f;';
            html += '<tr style="' + rowStyle + '">';
            html += '<td style="padding: 8px; text-align: left; font-size: 12px; font-weight: 500;">' + team.Team + '</td>';
            html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Wins + '</td>';
            html += '<td style="padding: 8px; text-align: center; font-size: 12px;">' + team.Losses + '</td>';
            html += '</tr>';
        });
        
        html += '</tbody></table></div></div>';
        return html;
    }

    // REPLACE THE OLD FUNCTION WITH THIS ONE
    async function fetchLeagueStandings(url, leagueKey) {
        const standingsContent = document.getElementById('league-standings-content');
        if (!standingsContent) return;
        
        // First try to load from Firestore (FlashLive API data)
        const loadedFromFirestore = await fetchLeagueStandingsFromFirestore(leagueKey);
        if (loadedFromFirestore) {
            return; // Successfully loaded from Firestore
        }
        
        // Fallback to CSV if not in Firestore
        standingsContent.innerHTML = '<p style="color: #9ca3af;">Loading standings...</p>';
        try {
            if (!url || !url.startsWith('http')) {
                standingsContent.innerHTML = '<p>Standings not available.</p>';
                return;
            }
            const response = await fetch(url);
            if (!response.ok) throw new Error('Network response was not ok');
            const csvText = await response.text();
            const rows = csvText.split(/\r?\n/).map(row => row.split(','));
            if (rows.length < 2) {
                standingsContent.innerHTML = '<p>No standings data available.</p>';
                return;
            }
            
            // Special handling for UFC/Boxing - group by classification (detect from URL)
            const isUFC = url.includes('2PACX-1vS2Z0QfXw34ib6V0gmcdqVvu6gwy8vHnD6cF3xMhJGZJHpU_s0vwC0h7phvbV0joe4tdVDGHiJ1kBfX');
            const isBoxing = url.includes('2PACX-1vRthmvN_N-bKFQdsc5V_Otx92FF5qwjYkI9YXHoKgKyV5jvfmb6skABo0Ncbh1x0ehEU-4Je3w_KPmb');
            if (isUFC || isBoxing) {
                const headers = rows[0].map(h => h.trim().replace(/^"|"$/g, ''));
                const classificationIndex = headers.findIndex(h => h.toLowerCase().includes('classification'));
                
                if (classificationIndex !== -1) {
                    // Group data by classification
                    const groupedData = {};
                    for (let i = 1; i < rows.length; i++) {
                        if (rows[i].length < 2) continue;
                        const classification = rows[i][classificationIndex]?.trim().replace(/^"|"$/g, '');
                        if (!classification) continue;
                        
                        if (!groupedData[classification]) {
                            groupedData[classification] = [];
                        }
                        groupedData[classification].push(rows[i]);
                    }
                    
                    // Build grouped HTML
                    let groupedHtml = '';
                    Object.keys(groupedData).forEach(classification => {
                        groupedHtml += `<div style="margin-bottom: 25px;">`;
                        groupedHtml += `<h3 style="color: white; font-size: 14px; margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #4a4a4a; font-weight: bold;">${classification}</h3>`;
                        groupedHtml += `<table style="width: 100%; border-collapse: collapse; font-size: 11px;">`;
                        groupedHtml += `<thead><tr>`;
                        // Only show Rank, Fighter, Record columns (skip Classification)
                        headers.forEach((header, index) => {
                            if (index !== classificationIndex) {
                                groupedHtml += `<th style="padding: 6px 4px; text-align: left; border-bottom: 1px solid #4a4a4a; color: #ccc;">${header}</th>`;
                            }
                        });
                        groupedHtml += `</tr></thead><tbody>`;
                        
                        groupedData[classification].forEach(row => {
                            groupedHtml += `<tr style="border-bottom: 1px solid #333;">`;
                            row.forEach((cell, index) => {
                                if (index !== classificationIndex) {
                                    groupedHtml += `<td style="padding: 6px 4px; color: white;">${cell.trim().replace(/^"|"$/g, '')}</td>`;
                                }
                            });
                            groupedHtml += `</tr>`;
                        });
                        groupedHtml += `</tbody></table></div>`;
                    });
                    
                    standingsContent.innerHTML = groupedHtml;
                    return;
                }
            }
            
            // Default table display for other leagues
            let tableHtml = '<table style="width: 100%; border-collapse: collapse; font-size: 11px;"><thead><tr>';
            rows[0].forEach(header => tableHtml += `<th style="padding: 4px; text-align: left; border-bottom: 1px solid #4a4a4a;">${header.trim().replace(/^"|"$/g, '')}</th>`);
            tableHtml += '</tr></thead><tbody>';
            for (let i = 1; i < rows.length; i++) {
                if (rows[i].length < 2) continue;
                tableHtml += `<tr style="border-top: 1px solid #374151;">`;
                rows[i].forEach(cell => tableHtml += `<td style="padding: 4px;">${cell.trim().replace(/^"|"$/g, '')}</td>`);
                tableHtml += '</tr>';
            }
            tableHtml += '</tbody></table>';
            standingsContent.innerHTML = tableHtml;
        } catch (error) { standingsContent.innerHTML = `<p style="color: #ef4444;">Error loading standings.</p>`; }
    }
    
// Cache for featured games
let featuredGamesCache = {
    data: [],
    timestamp: 0,
    date: null
};

async function fetchFeaturedGames() {
    try {
        const { DateTime } = luxon;
        const todayStr = DateTime.now().setZone('America/Denver').toISODate();
        const now = Date.now();
        
        // Cache for 5 minutes to match live game update frequency
        if (featuredGamesCache.date === todayStr && 
            featuredGamesCache.timestamp > 0 && 
            (now - featuredGamesCache.timestamp) < 300000) {
            console.log('Using cached featured games');
            return featuredGamesCache.data;
        }
        
        console.log('Fetching featured games from Firestore...');
        const games = await fetchFeaturedGamesForDate(todayStr);
        
        // Update cache
        featuredGamesCache = {
            data: games,
            timestamp: now,
            date: todayStr
        };
        
        return games;
    } catch (error) {
        console.error('Error fetching featured games:', error);
        return [];
    }
}

    async function fetchFeaturedGamesForDate(dateStr) {
        try {
            const db = firebase.firestore();
            const featuredRef = db.collection("artifacts/flashlive-daily-scraper/public/data/Featured");
            
            // Query only featured games for the specific date
            const snapshot = await featuredRef.where('gameDate', '==', dateStr).get();
            
            if (snapshot.empty) {
                return [];
            }
            
            const featuredGamesForDate = snapshot.docs.map(doc => doc.data());
            
            // Now fetch the LIVE data for these game IDs from sportsGames or yesterdayScores
            const { DateTime } = luxon;
            const todayStr = DateTime.now().setZone('America/Denver').toISODate();
            const isToday = dateStr === todayStr;
            
            const collectionName = isToday 
                ? 'artifacts/flashlive-daily-scraper/public/data/sportsGames'
                : 'artifacts/flashlive-daily-scraper/public/data/yesterdayScores';
            
            const gamesRef = db.collection(collectionName);
            
            // Separate MLB games from other games
            const mlbFeaturedGames = featuredGamesForDate.filter(game => game.Sport === 'Baseball');
            const nonMlbFeaturedGames = featuredGamesForDate.filter(game => game.Sport !== 'Baseball');
            
            // Only fetch MLB games from the collection if we have MLB featured games
            let mlbGamesFromCollection = [];
            if (mlbFeaturedGames.length > 0) {
                const mlbSnapshot = await gamesRef.where('Sport', '==', 'Baseball').get();
                mlbGamesFromCollection = mlbSnapshot.docs.map(doc => doc.data());
            }
            
            let liveFeaturedGames = [];
            
            // Create a map of game IDs to their title and order from Featured collection
            const gameIdToTitleMap = {};
            const gameIdToOrderMap = {};
            featuredGamesForDate.forEach(game => {
                if (game['Game ID']) {
                    if (game.title) {
                        gameIdToTitleMap[game['Game ID']] = game.title;
                    }
                    if (game.order !== undefined) {
                        gameIdToOrderMap[game['Game ID']] = game.order;
                    }
                }
            });
            
            // Handle non-MLB games by Game ID matching
            const nonMlbGameIds = nonMlbFeaturedGames.map(g => g['Game ID']);
            if (nonMlbGameIds.length > 0) {
                if (nonMlbGameIds.length <= 10) {
                    const gamesSnapshot = await gamesRef.where('Game ID', 'in', nonMlbGameIds).get();
                    liveFeaturedGames = gamesSnapshot.docs.map(doc => {
                        const gameData = doc.data();
                        // Add title and order from Featured collection
                        gameData.title = gameIdToTitleMap[gameData['Game ID']] || '';
                        gameData.order = gameIdToOrderMap[gameData['Game ID']];
                        return gameData;
                    });
                } else {
                    // Batch queries if more than 10 game IDs
                    for (let i = 0; i < nonMlbGameIds.length; i += 10) {
                        const batch = nonMlbGameIds.slice(i, i + 10);
                        const gamesSnapshot = await gamesRef.where('Game ID', 'in', batch).get();
                        const batchGames = gamesSnapshot.docs.map(doc => {
                            const gameData = doc.data();
                            // Add title and order from Featured collection
                            gameData.title = gameIdToTitleMap[gameData['Game ID']] || '';
                            gameData.order = gameIdToOrderMap[gameData['Game ID']];
                            return gameData;
                        });
                        liveFeaturedGames = liveFeaturedGames.concat(batchGames);
                    }
                }
            }
            
            // Handle MLB games by fuzzy matching team names
            for (const featuredGame of mlbFeaturedGames) {
                const featuredHome = (featuredGame['Home Team'] || '').toLowerCase().trim();
                const featuredAway = (featuredGame['Away Team'] || '').toLowerCase().trim();
                
                // Find matching game in live data
                const matchingGame = mlbGamesFromCollection.find(game => {
                    const gameHome = (game['Home Team'] || '').toLowerCase().trim();
                    const gameAway = (game['Away Team'] || '').toLowerCase().trim();
                    
                    // Check if teams match (either home/away or away/home since order might differ)
                    return (gameHome === featuredHome && gameAway === featuredAway) ||
                           (gameHome === featuredAway && gameAway === featuredHome);
                });
                
                if (matchingGame) {
                    // Add title and order from Featured collection
                    matchingGame.title = featuredGame.title || '';
                    matchingGame.order = featuredGame.order;
                    liveFeaturedGames.push(matchingGame);
                } else {
                    // Fall back to static data if no match found
                    liveFeaturedGames.push(featuredGame);
                }
            }
            
            return liveFeaturedGames;
        } catch (error) {
            console.error(`Error fetching featured games for ${dateStr}:`, error);
            return [];
        }
    }


    function fetchTodayGames(callback) {
        const todayContainer = document.getElementById('games');
        const errorDiv = document.getElementById('error');
        if (!todayContainer || !errorDiv) return () => {};

        errorDiv.textContent = "";
        const { DateTime } = luxon;
        const todayStr = DateTime.now().setZone('America/Denver').toISODate();

        return gamesCollectionRef.where('gameDate', '==', todayStr)
            .onSnapshot(async snapshot => {
                if (snapshot.empty) {
                    todayContainer.innerHTML = `<p style="padding: 10px;">No games found for today.</p>`;
                    return;
                }
                
                // Get regular games
                const gamesData = snapshot.docs.map(doc => doc.data()).sort(sortGames);
                
                // Try to get featured games, but don't fail if it doesn't work
                let featuredGames = [];
                try {
                    featuredGames = await fetchFeaturedGames();
                    
                    // Mark featured games
                    featuredGames.forEach(game => {
                        game.isFeatured = true;
                    });
                } catch (error) {
                    console.error('Error fetching featured games:', error);
                    // Continue without featured games if there's an error
                }
                
                // Combine games with featured games first
                const allGames = [...featuredGames, ...gamesData];
                
                renderGames(todayContainer, allGames, true);
                
                if (callback) {
                    callback();
                }
            }, err => { 
                console.error("Error fetching today's games: ", err);
                errorDiv.textContent = "Failed to load real-time data.";
            });
    }

    function fetchYesterdayScores() {
        const scoresContainer = document.getElementById('dynamicScoresContent');
        const scoresLoading = document.getElementById('scoresLoading');
        const scoresError = document.getElementById('scoresErrorMessage');
        const scoresErrorText = document.getElementById('scoresErrorText');

        if (!scoresContainer || !scoresLoading || !scoresError) return;

        scoresLoading.style.display = 'flex';
        scoresError.style.display = 'none';
        scoresContainer.innerHTML = '';

        // Read from yesterdayScores collection (completed games from all leagues)
        const yesterdayScoresRef = db.collection("artifacts/flashlive-daily-scraper/public/data/yesterdayScores");
        console.log('Attempting to read from collection:', "artifacts/flashlive-daily-scraper/public/data/yesterdayScores");

        yesterdayScoresRef.get()
            .then(async snapshot => {
            scoresLoading.style.display = 'none';
                console.log('Yesterday scores snapshot:', snapshot);
                console.log('Snapshot size:', snapshot.size);
                if (snapshot.empty) {
                    scoresContainer.innerHTML = '<p style="padding: 10px;">No completed games found. Check back after games finish.</p>';
                    return;
                }
                
                // Get yesterday's games
                const gamesData = snapshot.docs.map(doc => doc.data()).sort(sortGames);
                
                // Try to get yesterday's featured games, but don't fail if it doesn't work
                let yesterdayFeaturedGames = [];
                try {
                    const { DateTime } = luxon;
                    const yesterdayStr = DateTime.now().setZone('America/Denver').minus({ days: 1 }).toISODate();
                    yesterdayFeaturedGames = await fetchFeaturedGamesForDate(yesterdayStr);
                    console.log(`Found ${yesterdayFeaturedGames.length} featured games for yesterday`);
                    
                    // Mark yesterday's featured games
                    yesterdayFeaturedGames.forEach(game => {
                        game.isFeatured = true;
                    });
                } catch (error) {
                    console.error('Error fetching yesterday\'s featured games:', error);
                    // Continue without featured games if there's an error
                }
                
                // Combine games with yesterday's featured games first
                const allGames = [...yesterdayFeaturedGames, ...gamesData];
                
                console.log('Yesterday games data:', gamesData);
                renderGames(scoresContainer, allGames, true);
            })
            .catch(error => {
            scoresLoading.style.display = 'none';
            scoresError.style.display = 'block';
            if(scoresErrorText) scoresErrorText.textContent = "An error occurred while loading scores.";
            console.error("Error fetching yesterday's scores:", error);
        });
    }
    
    
    // START OF CORRECTED SECTION
    window.loadLeagueSpecificData = function(leagueKey) {
        const leagueInfo = LEAGUE_DATA_CONFIG[leagueKey];
        if (!leagueInfo) return;
        if (leagueHeader) leagueHeader.innerText = leagueKey;
        
        // Hide yesterday content when loading new league
        const yesterdayContent = document.getElementById('league-schedule-yesterday-content');
        if (yesterdayContent) yesterdayContent.style.display = 'none';
        const todayScheduleContent = document.getElementById('league-schedule-today-content');
        const upcomingScheduleContent = document.getElementById('league-schedule-upcoming-content');
        const standingsContent = document.getElementById('league-standings-content');
        
        // Special handling for Soccer page - consolidated view
        if (leagueKey === 'Soccer') {
            loadConsolidatedSoccerData();
            return;
        }
        
        // Restore tab system for non-soccer pages
        const scheduleTabsContainer = document.getElementById('schedule-tabs');
        if (scheduleTabsContainer) {
            scheduleTabsContainer.style.display = 'flex';
        }
        
        // --- RESET TAB STATE WHEN SWITCHING LEAGUES ---
        // Always reset to Schedule main tab and Today sub-tab when switching leagues
        
        // Reset main tabs (Schedule/Standings/Stats) - Schedule should always be active
        const mainTabsContainer = document.getElementById('main-tabs');
        if (mainTabsContainer) {
            mainTabsContainer.querySelectorAll('.main-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.style.backgroundColor = '#2a2a2a';
                tab.style.color = '#ccc';
                tab.style.fontWeight = 'normal';
            });
            
            // Activate Schedule tab
            const scheduleMainTab = mainTabsContainer.querySelector('.main-tab[data-main-tab="schedule"]');
            if (scheduleMainTab) {
                scheduleMainTab.classList.add('active');
                scheduleMainTab.style.backgroundColor = '#fff';
                scheduleMainTab.style.color = '#000';
                scheduleMainTab.style.fontWeight = 'bold';
            }
            
            // Show Schedule content, hide others
            document.querySelectorAll('.main-tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById('schedule-tab-content').style.display = 'block';
        }
        
        // Reset schedule sub-tabs (Today/Yesterday/Upcoming) - reset ALL tabs to inactive state
        if (scheduleTabsContainer) {
            const todayScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="today"]');
            const yesterdayScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="yesterday"]');
            const upcomingScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="upcoming"]');
            
            // Reset ALL tabs to inactive state (both classes and inline styles)
            scheduleTabsContainer.querySelectorAll('.schedule-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.style.backgroundColor = '#2a2a2a';
                tab.style.color = '#ccc';
                tab.style.borderBottom = 'none';
            });
            
            // The existing logic in the data loading will determine which tab becomes active
            // based on whether there are games today or not
        }

        // Load TODAY schedule - use FlashLiveAPI for MLB, individual collections for others
        todayScheduleContent.innerHTML = '<p style="color: #9ca3af;">Loading today\'s schedule...</p>';
        const { DateTime } = luxon;
        const todayStr = DateTime.now().setZone('America/Denver').toISODate();
        
        // Use the same approach as home page - get all games for today, then filter by league
        (async () => {
            try {
                // Get all games for today (same as home page)
                const allGamesSnapshot = await gamesCollectionRef
                    .where('gameDate', '==', todayStr)
                    .get();
                
                if (allGamesSnapshot.empty) {
                    todayScheduleContent.innerHTML = `<p>No games found for today.</p>`;
                    // Switch to Upcoming tab if no games today
                    const todayScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="today"]');
                    const upcomingScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="upcoming"]');
                    if (todayScheduleTab) {
                        todayScheduleTab.classList.remove('active');
                        todayScheduleTab.style.backgroundColor = '#2a2a2a';
                        todayScheduleTab.style.color = '#ccc';
                        todayScheduleTab.style.borderBottom = 'none';
                    }
                    if (upcomingScheduleTab) {
                        upcomingScheduleTab.classList.add('active');
                        upcomingScheduleTab.style.backgroundColor = '#2a2a2a';
                        upcomingScheduleTab.style.color = '#fff';
                        upcomingScheduleTab.style.borderBottom = '2px solid #fff';
                    }
                    document.getElementById('league-schedule-today-content').style.display = 'none';
                    document.getElementById('league-schedule-upcoming-content').style.display = 'block';
                    loadUpcomingSchedule(leagueKey); // Load upcoming when no today games
                    return;
                }
                
                // Filter games by league using flexible matching
                const allGames = allGamesSnapshot.docs.map(doc => doc.data());
                const gamesData = allGames.filter(game => {
                    const gameLeague = game.League || '';
                    
                    // First try exact match
                    if (gameLeague === leagueInfo.leagueId) {
                        return true;
                    }
                    
                    // Then try flexible matching based on league key
                    const gameLeagueKey = getLeagueKeyFromDatabaseName(gameLeague);
                    const currentLeagueKey = getLeagueKeyFromDatabaseName(leagueInfo.leagueId);
                    
                    // If both have matching league keys, include the game
                    if (gameLeagueKey && currentLeagueKey && gameLeagueKey === currentLeagueKey) {
                        return true;
                    }
                    
                    // Fallback: check if the database league name contains the target league name
                    const targetLeagueName = leagueInfo.leagueId.toLowerCase();
                    const gameLeagueName = gameLeague.toLowerCase();
                    
                    // For UEFA Champions League, check for "champions league" in the name
                    if (targetLeagueName.includes('champions league') && gameLeagueName.includes('champions league')) {
                        return true;
                    }
                    // For other leagues, check for partial matches
                    if (gameLeagueName.includes(targetLeagueName) || targetLeagueName.includes(gameLeagueName)) {
                        return true;
                    }
                    
                    return false;
                });
                
                // For NCAAF, filter out hockey games
                const filteredGamesData = gamesData.filter(game => {
                    if (leagueKey === 'NCAAF' && game.League === 'USA: NCAA') {
                        return game.Sport === 'American Football';
                    }
                    return true;
                });
                
                if (filteredGamesData.length === 0) {
                    todayScheduleContent.innerHTML = `<p>No games found for today.</p>`;
                    // Switch to Upcoming tab if no games today
                    const todayScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="today"]');
                    const upcomingScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="upcoming"]');
                    if (todayScheduleTab) {
                        todayScheduleTab.classList.remove('active');
                        todayScheduleTab.style.backgroundColor = '#2a2a2a';
                        todayScheduleTab.style.color = '#ccc';
                        todayScheduleTab.style.borderBottom = 'none';
                    }
                    if (upcomingScheduleTab) {
                        upcomingScheduleTab.classList.add('active');
                        upcomingScheduleTab.style.backgroundColor = '#2a2a2a';
                        upcomingScheduleTab.style.color = '#fff';
                        upcomingScheduleTab.style.borderBottom = '2px solid #fff';
                    }
                    document.getElementById('league-schedule-today-content').style.display = 'none';
                    document.getElementById('league-schedule-upcoming-content').style.display = 'block';
                    loadUpcomingSchedule(leagueKey); // Load upcoming when no today games
                    return;
                }
                
                // If there ARE games today, activate Today tab with proper styling
                const todayScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="today"]');
                const upcomingScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="upcoming"]');
                if (todayScheduleTab) {
            todayScheduleTab.classList.add('active');
                    todayScheduleTab.style.backgroundColor = '#2a2a2a';
                    todayScheduleTab.style.color = '#fff';
                    todayScheduleTab.style.borderBottom = '2px solid #fff';
                }
                if (upcomingScheduleTab) {
            upcomingScheduleTab.classList.remove('active');
                    upcomingScheduleTab.style.backgroundColor = '#2a2a2a';
                    upcomingScheduleTab.style.color = '#ccc';
                    upcomingScheduleTab.style.borderBottom = 'none';
                }
            document.getElementById('league-schedule-today-content').style.display = 'block';
            document.getElementById('league-schedule-upcoming-content').style.display = 'none';
                
                const sortedGames = filteredGamesData.sort(sortGames);
                renderGames(todayScheduleContent, sortedGames, false);
            } catch (error) {
                console.error('Error loading today\'s schedule:', error);
                todayScheduleContent.innerHTML = '<p style="color: #ef4444;">Error loading today\'s schedule.</p>';
            }
        })();

        // Load UPCOMING schedule
        loadUpcomingSchedule(leagueKey);
        
        // Reusing the standings fetcher - pass leagueKey for Firestore lookup
        fetchLeagueStandings(leagueInfo.standingsUrl, leagueKey);
        
    };

    // Consolidated Soccer Data Loading Function
    function loadConsolidatedSoccerData() {
        const todayScheduleContent = document.getElementById('league-schedule-today-content');
        const upcomingScheduleContent = document.getElementById('league-schedule-upcoming-content');
        const standingsContent = document.getElementById('league-standings-content');
        
        // Hide the tab system for soccer page
        const scheduleTabsContainer = document.getElementById('schedule-tabs');
        if (scheduleTabsContainer) {
            scheduleTabsContainer.style.display = 'none';
        }
        
        // Show only the today content area (we'll use it for consolidated view)
        if (todayScheduleContent) {
            todayScheduleContent.style.display = 'block';
            todayScheduleContent.innerHTML = '<p style="color: #9ca3af;">Loading all soccer games...</p>';
        }
        if (upcomingScheduleContent) {
            upcomingScheduleContent.style.display = 'none';
        }
        
        // Get only today's soccer games using the consolidated approach
        const { DateTime } = luxon;
        const today = DateTime.now().setZone('America/Denver');
        const todayStr = today.toISODate();
        
        // Get only today's games
        console.log('Fetching soccer games for date =', todayStr);
        gamesCollectionRef.where('gameDate', '==', todayStr).get()
            .then(snapshot => {
                if (snapshot.empty) {
                    todayScheduleContent.innerHTML = '<p>No soccer games found.</p>';
                    return;
                }
                
                // Filter for soccer games only and format them for consolidated display
                const allGames = snapshot.docs.map(doc => doc.data());
                const soccerGames = allGames.filter(game => {
                    const displayLeague = getLeagueDisplayName(game.League, game.Sport);
                    // Check if it's a soccer league
                    return ['Premier League', 'LaLiga', 'Serie A', 'Bundesliga', 'Ligue 1', 'MLS', 'UEFA Champions League', 'UEFA Europa League', 'UEFA Conference League', 'NWSL', 'FA Cup', 'Coppa Italia', 'DFB-Pokal', 'Carabao Cup', 'Super Cup', 'Eredivisie', 'Liga Portugal', 'EFL Championship', 'Brasileirão', "Women's Super League", 'Argentine Primera División', 'Scottish Cup', 'Liga MX', 'Saudi Pro League', 'Scottish Premiership', 'EFL Cup', 'Super Lig', 'FIFA U-20 World Cup', 'Campeones Cup', 'USL Championship', 'UEFA W Champions League'].includes(displayLeague);
                });
                
                if (soccerGames.length === 0) {
                    todayScheduleContent.innerHTML = '<p>No soccer games found.</p>';
                    return;
                }
                
                // Format games for consolidated display (add league display name)
                const formattedGames = soccerGames.map(game => ({
                    ...game,
                    leagueDisplayName: getLeagueDisplayName(game.League, game.Sport),
                    isToday: game.gameDate === todayStr
                }));
                
                // Use the consolidated rendering function that shows league titles
                renderConsolidatedSoccerGames(todayScheduleContent, formattedGames, today);
            })
            .catch(error => {
                console.error('Error loading soccer games:', error);
                todayScheduleContent.innerHTML = '<p style="color: #ef4444;">Error loading soccer games.</p>';
            });
        
        // Load standings (use a generic soccer standings or hide it)
        if (standingsContent) {
            standingsContent.innerHTML = '<p style="color: #9ca3af;">Standings available on individual league pages.</p>';
        }
    }

    function loadAllSoccerGames(soccerLeagues, container) {
        const { DateTime } = luxon;
        const today = DateTime.now().setZone('America/Denver');
        const todayStr = today.toISODate();
        
        
        let allGames = [];
        let completedRequests = 0;
        const totalRequests = soccerLeagues.length * 2; // 2 requests per league (today + upcoming)
        
        if (totalRequests === 0) {
            container.innerHTML = '<p style="color: #9ca3af;">No soccer leagues configured.</p>';
            return;
        }
        
        soccerLeagues.forEach(leagueKey => {
            const leagueInfo = LEAGUE_DATA_CONFIG[leagueKey];
            if (!leagueInfo) {
                completedRequests += 2; // Skip both today and upcoming
                if (completedRequests === totalRequests) {
                    renderConsolidatedSoccerGames(container, allGames, today);
                }
                return;
            }
            
            
            // 1. Get TODAY'S games from FlashLiveAPI
            // For NCAAF, also filter by Sport to exclude hockey games
            let todayQuery = gamesCollectionRef.where('League', '==', leagueInfo.leagueId).where('gameDate', '==', todayStr);
            if (leagueKey === 'NCAAF') {
                todayQuery = todayQuery.where('Sport', '==', 'American Football');
            }
            
            todayQuery.get()
                .then(snapshot => {
                    snapshot.forEach(doc => {
                        const data = doc.data();
                        allGames.push({
                            ...data,
                            leagueKey: leagueKey,
                            leagueDisplayName: getLeagueDisplayName(data.League, data.Sport),
                            isToday: true,
                            source: 'flashlive'
                        });
                    });
                    
                    completedRequests++;
                    if (completedRequests === totalRequests) {
                        console.log(`Total games found: ${allGames.length}`);
                        renderConsolidatedSoccerGames(container, allGames, today);
                    }
                })
                .catch(error => {
                    console.error(`Error loading today's games for ${leagueKey}:`, error);
                    completedRequests++;
                    if (completedRequests === totalRequests) {
                        renderConsolidatedSoccerGames(container, allGames, today);
                    }
                });
            
            // 2. Get UPCOMING games from individual Firestore collections
            if (leagueInfo.upcomingCollectionName) {
                const upcomingCollectionRef = db.collection(leagueInfo.upcomingCollectionName);
                upcomingCollectionRef.get()
                    .then(snapshot => {
                        
                        snapshot.forEach(doc => {
                            const data = doc.data();
                            
                            const away = data['away'] || '';
                            const home = data['home'] || '';
                            const timeStr = data['time'] || '';
                            const dateStr = data['date'] || '';
                            
                            // Simple check: if date is not today, include it
                            const today = new Date().toISOString().split('T')[0];
                            if (dateStr && dateStr !== today) {
                                allGames.push({
                                    'Home Team': home,
                                    'Away Team': away,
                                    'Start Time': timeStr,
                                    'Match Status': 'SCHEDULED',
                                    'Home Score': '',
                                    'Away Score': '',
                                    'League': leagueInfo.leagueId,
                                    'Sport': 'Soccer',
                                    leagueKey: leagueKey,
                                    leagueDisplayName: getLeagueDisplayName(leagueInfo.leagueId, 'Soccer'),
                                    isToday: false,
                                    source: 'upcoming',
                                    gameDate: dateStr
                                });
                            }
                        });
                        
                        completedRequests++;
                        if (completedRequests === totalRequests) {
                            renderConsolidatedSoccerGames(container, allGames, today);
                        }
                    })
                    .catch(error => {
                        console.error(`Error loading upcoming games for ${leagueKey}:`, error);
                        completedRequests++;
                        if (completedRequests === totalRequests) {
                            renderConsolidatedSoccerGames(container, allGames, today);
                        }
                    });
            } else {
                completedRequests++;
                if (completedRequests === totalRequests) {
                    renderConsolidatedSoccerGames(container, allGames, today);
                }
            }
        });
    }

    function renderConsolidatedSoccerGames(container, allGames, today) {
        if (!container) return;
        
        
        if (allGames.length === 0) {
            container.innerHTML = '<p style="color: #9ca3af;">No soccer games found.</p>';
            return;
        }
        
        // Group games by date
        const gamesByDate = {};
        allGames.forEach(game => {
            const gameDate = game.gameDate;
            if (!gamesByDate[gameDate]) {
                gamesByDate[gameDate] = {};
            }
            if (!gamesByDate[gameDate][game.leagueDisplayName]) {
                gamesByDate[gameDate][game.leagueDisplayName] = [];
            }
            gamesByDate[gameDate][game.leagueDisplayName].push(game);
        });
        
        // Sort dates
        const sortedDates = Object.keys(gamesByDate).sort();
        
        let html = '';
        sortedDates.forEach(dateStr => {
            const isToday = dateStr === today.toISODate();
            let dateHeader;
            if (isToday) {
                dateHeader = 'Today';
            } else {
                // Format date as "September 13" in user's local timezone
                const { DateTime } = luxon;
                const dateObj = DateTime.fromISO(dateStr).setZone('local');
                dateHeader = dateObj.toFormat('MMMM d');
            }
            
            // Add date header - match the large TODAY tab styling from the image
            html += `<div class="date-section" style="margin-bottom: 20px;">`;
            html += `<div class="date-header" style="background-color: #d1d5db; color: black; padding: 2px 16px; font-weight: bold; font-size: 12px; margin-bottom: 8px; text-transform: uppercase; border: none;">${dateHeader}</div>`;
            
            // Sort leagues within each date using LEAGUE_DISPLAY_ORDER
            const leagues = Object.keys(gamesByDate[dateStr]).sort((a, b) => {
                const indexA = LEAGUE_DISPLAY_ORDER.indexOf(a);
                const indexB = LEAGUE_DISPLAY_ORDER.indexOf(b);
                // If both leagues are in the order, sort by their position
                if (indexA !== -1 && indexB !== -1) {
                    return indexA - indexB;
                }
                // If only one is in the order, prioritize it
                if (indexA !== -1) return -1;
                if (indexB !== -1) return 1;
                // If neither is in the order, sort alphabetically
                return a.localeCompare(b);
            });
            leagues.forEach(leagueName => {
                const games = gamesByDate[dateStr][leagueName];
                
                // Use the same league-section and league-title styling as other pages
                html += `<div class="league-section">`;
                html += `<div class="league-title" style="font-size: 12px; padding: 2px 16px; border: none;">${leagueName}</div>`;
                
                // Use the same game-table styling as other pages
                html += `<table class="game-table">`;
                
                // Sort games by time chronologically (handle both timestamp and string formats)
                games.sort((a, b) => {
                    let timeA = 0;
                    let timeB = 0;
                    
                    // Convert to comparable timestamps
                    if (typeof a['Start Time'] === 'number') {
                        timeA = a['Start Time'];
                    } else if (a['Start Time'] && typeof a['Start Time'] === 'object' && a['Start Time'].seconds) {
                        timeA = a['Start Time'].seconds * 1000;
                    } else if (typeof a['Start Time'] === 'string' && a['Start Time']) {
                        // Handle string times like "9:30 AM" - convert to comparable timestamp
                        const { DateTime } = luxon;
                        try {
                            // Parse string time and convert to timestamp for comparison
                            let timeStr = a['Start Time'].replace(/:\d{2}(?=\s*[AP]M)/, ''); // Remove seconds if present
                            const gameDate = a.gameDate || new Date().toISOString().split('T')[0];
                            
                            // Convert 12-hour format to 24-hour format for proper parsing
                            let hour = parseInt(timeStr.split(':')[0]);
                            const minute = timeStr.split(':')[1].split(' ')[0];
                            const ampm = timeStr.split(' ')[1];
                            
                            if (ampm === 'PM' && hour !== 12) hour += 12;
                            if (ampm === 'AM' && hour === 12) hour = 0;
                            
                            const dateTime = DateTime.fromISO(`${gameDate}T${hour.toString().padStart(2, '0')}:${minute}`).setZone('local');
                            timeA = dateTime.toMillis();
                        } catch (e) {
                            timeA = 0; // Fallback if parsing fails
                        }
                    }
                    
                    if (typeof b['Start Time'] === 'number') {
                        timeB = b['Start Time'];
                    } else if (b['Start Time'] && typeof b['Start Time'] === 'object' && b['Start Time'].seconds) {
                        timeB = b['Start Time'].seconds * 1000;
                    } else if (typeof b['Start Time'] === 'string' && b['Start Time']) {
                        // Handle string times like "9:30 AM" - convert to comparable timestamp
                        const { DateTime } = luxon;
                        try {
                            // Parse string time and convert to timestamp for comparison
                            let timeStr = b['Start Time'].replace(/:\d{2}(?=\s*[AP]M)/, ''); // Remove seconds if present
                            const gameDate = b.gameDate || new Date().toISOString().split('T')[0];
                            
                            // Convert 12-hour format to 24-hour format for proper parsing
                            let hour = parseInt(timeStr.split(':')[0]);
                            const minute = timeStr.split(':')[1].split(' ')[0];
                            const ampm = timeStr.split(' ')[1];
                            
                            if (ampm === 'PM' && hour !== 12) hour += 12;
                            if (ampm === 'AM' && hour === 12) hour = 0;
                            
                            const dateTime = DateTime.fromISO(`${gameDate}T${hour.toString().padStart(2, '0')}:${minute}`).setZone('local');
                            timeB = dateTime.toMillis();
                        } catch (e) {
                            timeB = 0; // Fallback if parsing fails
                        }
                    }
                    
                    return timeA - timeB;
                });
                
                let lastDisplayedTimeLabel = null;
                
                games.forEach(game => {
                    const homeTeam = getTeamDisplayName(game['Home Team'] || '');
                    const awayTeam = getTeamDisplayName(game['Away Team'] || '');
                    const homeScore = game['Home Score'] || '';
                    const awayScore = game['Away Score'] || '';
                    const status = game['Match Status'] || '';
                    
                    // Format time/status display (same logic as home page)
                    let timeDisplay = '';
                    const isLive = status.includes("IN PROGRESS") || status.includes("LIVE");
                    const isFinal = status.includes("FINISHED") || status.includes("FINAL") || status.includes("GAME OVER");
                    
                    if (isLive) {
                        // Show live status instead of start time
                        let parsedStatus = '';
                        const displayLeague = getLeagueDisplayName(game.League, game.Sport);
                        if (displayLeague === "MLB") {
                            const inningHalf = game.inningHalf || "";
                            const currentInning = game.currentInning || "";
                            parsedStatus = `${inningHalf} ${currentInning}`.trim();
                        } else {
                            // Use granular live status for ALL sports (including soccer)
                            parsedStatus = getGranularLiveStatus(game);
                        }
                        timeDisplay = parsedStatus ? `<span style="color: red;">${parsedStatus}</span>` : '<span style="color: red;">Live</span>';
                    } else if (isFinal) {
                        timeDisplay = "F";
                    } else {
                        // Show start time for scheduled games
                        if (typeof game['Start Time'] === 'number') {
                            // Handle timestamp from FlashLiveAPI - convert to user's local time
                            const { DateTime } = luxon;
                            const gameTime = DateTime.fromMillis(game['Start Time']).setZone('local');
                            timeDisplay = gameTime.toFormat('h:mm a');
                        } else if (game['Start Time'] && typeof game['Start Time'] === 'object' && game['Start Time'].seconds) {
                            // Handle Firestore Timestamp object - convert to user's local time
                            const { DateTime } = luxon;
                            const gameTime = DateTime.fromSeconds(game['Start Time'].seconds).setZone('local');
                            timeDisplay = gameTime.toFormat('h:mm a');
                        } else {
                            // Handle string time from upcoming collections - use same logic as LigaMX league page
                            const timeStr = game['Start Time'] || '';
                            if (timeStr && timeStr.includes(':')) {
                                const { DateTime } = luxon;
                                try {
                                    // Parse as Eastern time with seconds format, then convert to local (same as LigaMX)
                                    let easternTime = DateTime.fromFormat(timeStr, 'h:mm:ss a', { zone: 'America/New_York' });
                                    
                                    // If that doesn't work, try without seconds
                                    if (!easternTime.isValid) {
                                        easternTime = DateTime.fromFormat(timeStr, 'h:mm a', { zone: 'America/New_York' });
                                    }
                                    
                                    if (easternTime.isValid) {
                                        const localTime = easternTime.toLocal();
                                        timeDisplay = localTime.toFormat('h:mm a');
                                    } else {
                                        timeDisplay = timeStr.replace(/:\d{2}(?=\s*[AP]M)/, ''); // fallback
                                    }
                                } catch (e) {
                                    // Fallback to original string if parsing fails
                                    timeDisplay = timeStr.replace(/:\d{2}(?=\s*[AP]M)/, '');
                                }
                            } else {
                                timeDisplay = timeStr || 'TBD';
                            }
                        }
                    }
                    
                    // Prevent duplicate time display (same logic as renderGames function)
                    let displayTimeLabel = timeDisplay;
                    if (!isLive && !isFinal && timeDisplay !== "TBD") {
                        if (timeDisplay === lastDisplayedTimeLabel) displayTimeLabel = "";
                        else lastDisplayedTimeLabel = timeDisplay;
                    }
                    
                    // Determine if it's today or upcoming for formatting
                    const isGameToday = game.isToday;
                    
                    // Use the exact same structure as home page renderGames function
                    const homeScoreDisplay = (isLive || isFinal) ? (homeScore !== '' ? homeScore : '') : '';
                    const awayScoreDisplay = (isLive || isFinal) ? (awayScore !== '' ? awayScore : '') : '';
                    
                    // Soccer: home team on top, away team on bottom (same as home page)
                    html += `<tr class="game-row">`;
                    html += `<td rowspan="2" style="width: 75px; text-align: left; font-size: 12px; vertical-align: top; padding-right: 5px;">${displayTimeLabel}</td>`;
                    html += `<td class="team-cell">${homeTeam}</td>`;
                    html += `<td style="width: 30px; text-align: right; padding-right: 0;">${homeScoreDisplay}</td>`;
                    html += `</tr>`;
                    
                    html += `<tr class="game-row game-separator">`;
                    html += `<td class="team-cell">${awayTeam}</td>`;
                    html += `<td style="width: 30px; text-align: right; padding-right: 0;">${awayScoreDisplay}</td>`;
                    html += `</tr>`;
                });
                
                html += `</table></div>`;
            });
            
            html += `</div>`; // Close date-section
        });
        
        container.innerHTML = html;
    }

    function loadUpcomingSchedule(leagueKey) {
        const upcomingScheduleContent = document.getElementById('league-schedule-upcoming-content');
        if (!upcomingScheduleContent) return;

        const leagueInfo = LEAGUE_DATA_CONFIG[leagueKey];
        if (!leagueInfo || !leagueInfo.upcomingCollectionName) {
            upcomingScheduleContent.innerHTML = '<p style="color: #9ca3af;">Upcoming schedule is not available for this league.</p>';
            return;
        }

        upcomingScheduleContent.innerHTML = '<p style="color: #9ca3af;">Loading upcoming schedule...</p>';
        const upcomingCollectionRef = db.collection(leagueInfo.upcomingCollectionName);

        upcomingCollectionRef.get().then(snapshot => {
            const now = luxon.DateTime.now().toMillis();
            const games = [];
        
            snapshot.forEach(doc => {
                const data = doc.data();
            
            // Get field names based on league type
            let awayField, homeField, timeField, dateField;
            
            if (leagueKey === 'PremierLeague') {
                awayField = 'away';
                homeField = 'home';
                timeField = 'time';
                dateField = 'date';
            } else if (['Bundesliga', 'LaLiga', 'LigaMX', 'MLB', 'NBA', 'NCAAM', 'NCAAW', 'NCAABaseball', 'NCAASoftball', 'NFL', 'NHL', 'NWSL', 'SerieA', 'UEFAChampionsLeague', 'UEFAConferenceLeague', 'UEFAEuropaLeague', 'WNBA'].includes(leagueKey)) {
                awayField = 'away';
                homeField = 'home';
                timeField = 'time';
                dateField = 'date';
            } else if (leagueKey === 'MLS') {
                awayField = 'away';
                homeField = 'home';
                timeField = 'time';
                dateField = 'date';
            } else if (['Boxing'].includes(leagueKey)) {
                awayField = 'event';
                homeField = 'boxers';
                timeField = 'time';
                dateField = 'date';
            } else if (['LIVGolf', 'MotoGP', 'UFC'].includes(leagueKey)) {
                awayField = 'event';
                homeField = 'event';
                timeField = 'time';
                dateField = 'date';
            } else if (['LPGATour', 'PGATour'].includes(leagueKey)) {
                awayField = 'tournament';
                homeField = 'tournament';
                timeField = 'time';
                dateField = 'date';
            } else if (leagueKey === 'NASCARCupSeries') {
                awayField = 'race';
                homeField = 'location';
                timeField = 'time';
                dateField = 'date';
            } else if (leagueKey === 'Tennis') {
                awayField = 'tournament';
                homeField = 'tour';
                timeField = 'time';
                dateField = 'date';
            } else if (leagueKey === 'TrackAndField') {
                awayField = 'meet';
                homeField = 'meet';
                timeField = 'time';
                dateField = 'date';
            } else {
                // Default fallback
                awayField = 'away';
                homeField = 'home';
                timeField = 'time';
                dateField = 'date';
            }

            const away = data[awayField] || "";
            const home = data[homeField] || "";
            let timeStr = "";

            if (data[timeField]) {
                if (typeof data[timeField] === "object" && typeof data[timeField].toDate === "function") {
                    // Firestore Timestamp - treat as Eastern time and convert to local
                    const jsDate = data[timeField].toDate();
                    const easternTime = luxon.DateTime.fromJSDate(jsDate, { zone: 'America/New_York' });
                    const localTime = easternTime.toLocal();
                    timeStr = localTime.toFormat('h:mm a');
                    
                } else {
                    // String time - treat as Eastern time and convert to local
                    const timeString = String(data[timeField]).replace(/"/g, "");
                    if (timeString) {
                        // Parse as Eastern time with seconds format, then convert to local
                        let easternTime = luxon.DateTime.fromFormat(timeString, 'h:mm:ss a', { zone: 'America/New_York' });
                        
                        // If that doesn't work, try without seconds
                        if (!easternTime.isValid) {
                            easternTime = luxon.DateTime.fromFormat(timeString, 'h:mm a', { zone: 'America/New_York' });
                        }
                        
                        if (easternTime.isValid) {
                            const localTime = easternTime.toLocal();
                            timeStr = localTime.toFormat('h:mm a');
                        } else {
                            timeStr = timeString; // fallback
                        }
                    }
                }
            }

                let gameDate;

            if (typeof data[dateField] === "object" && typeof data[dateField].toDate === "function") {
                // Handle Firestore Timestamp (legacy)
                gameDate = luxon.DateTime.fromJSDate(data[dateField].toDate());
            } else if (typeof data[dateField] === "string") {
                // Handle new YYYY-MM-DD format
                if (data[dateField].match(/^\d{4}-\d{2}-\d{2}$/)) {
                    gameDate = luxon.DateTime.fromISO(data[dateField]);
                } else {
                    // Handle legacy formats
                    let cleaned = data[dateField].replace(" at ", " ").replace(/ UTC[-+]\d+/, "");
                    gameDate = luxon.DateTime.fromFormat(cleaned, "LLLL d, yyyy h:mm:ss.SSS a", { zone: 'America/New_York' });
                    if (!gameDate.isValid) {
                        let dateOnly = data[dateField].split(" at ")[0];
                        gameDate = luxon.DateTime.fromFormat(dateOnly, "LLLL d, yyyy", { zone: 'America/New_York' });
                        if (!gameDate.isValid) {
                            // Try parsing just month and day (assume current year)
                            gameDate = luxon.DateTime.fromFormat(dateOnly, "LLLL d", { zone: 'America/New_York' });
                            if (gameDate.isValid) {
                                // Set to current year if not specified
                                gameDate = gameDate.set({ year: luxon.DateTime.now().year });
                            }
                        }
                    }
                }
            }

            if (!gameDate || !gameDate.isValid) {
                return;
            }
            
            // Show games from today onwards (not just future games)
            const today = luxon.DateTime.now().startOf('day');
            if (gameDate < today) {
                return;
            }

                games.push({
                    dateHeader: gameDate.toFormat('MMMM d, yyyy'),
                    time: timeStr || gameDate.toFormat('h:mm a'),
                    away,
                    home,
                    gameDate,
                    channel: data.channel || ''
                });
            });
        
            console.log(`NHL: Processed ${games.length} games after filtering`);
            if (games.length === 0) {
                upcomingScheduleContent.innerHTML = "<p>No upcoming games found.</p>";
                console.log('NHL: No games after processing - check date filtering logic');
                return;
            }
        
            games.sort((a, b) => a.gameDate - b.gameDate);
            const gamesByDate = {};
            games.forEach(g => {
                if (!gamesByDate[g.dateHeader]) gamesByDate[g.dateHeader] = [];
                gamesByDate[g.dateHeader].push(g);
            });
        
        
            let html = "";
        
        // Sort date headers chronologically
        const sortedDateHeaders = Object.keys(gamesByDate).sort((a, b) => {
            const dateA = luxon.DateTime.fromFormat(a, 'MMMM d, yyyy');
            const dateB = luxon.DateTime.fromFormat(b, 'MMMM d, yyyy');
            return dateA - dateB;
        });
        
        // Filter out today's date from upcoming games
        const today = luxon.DateTime.now().toFormat('MMMM d, yyyy');
        const filteredDateHeaders = sortedDateHeaders.filter(dateHeader => dateHeader !== today);
        
        filteredDateHeaders.forEach(dateHeader => {
            // Format date header to match screenshot (e.g., "September 4")
            const dateObj = luxon.DateTime.fromFormat(dateHeader, 'MMMM d, yyyy');
            const formattedDate = dateObj.isValid ? dateObj.toFormat('MMMM d') : dateHeader;
            
            // Always show the date header
            html += `<div class="date-header" style="background-color: #d1d5db; color: #000; padding: 0px 12px; margin: 8px 0 4px 0; font-weight: normal; font-size: 11px; line-height: 18px;">${formattedDate}</div>`;
            
            // Create table for this date's games (same structure as renderGames)
            html += '<table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">';
            
            // Add colgroup with percentage widths to match renderGames
            html += `
                <colgroup>
                    <col style="width: 23%;">   <!-- time -->
                    <col style="width: 44%;">  <!-- team -->
                    <col style="width: 15%;">   <!-- score -->
                    <col style="width: 18%;">   <!-- channel -->
                </colgroup>
            `;
            
            // Sort games by time within each date for ALL leagues
            const sortedGames = gamesByDate[dateHeader].sort((a, b) => {
                // Special sorting for Boxing: group by event first, then by time
                if (leagueKey === 'Boxing') {
                    const eventA = a.away || ''; // awayField = 'event'
                    const eventB = b.away || '';
                    
                    // First sort by event name
                    if (eventA !== eventB) {
                        return eventA.localeCompare(eventB);
                    }
                }
                
                // Parse time strings to compare them
                const timeA = a.time || '';
                const timeB = b.time || '';
                
                // Convert time to 24-hour format for comparison
                const parseTime = (timeStr) => {
                    if (!timeStr) return 9999; // Put games without times at the end
                    const match = timeStr.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);
                    if (!match) return 9999; // Put invalid times at the end
                    
                    let hours = parseInt(match[1]);
                    const minutes = parseInt(match[2]);
                    const ampm = match[3].toUpperCase();
                    
                    if (ampm === 'PM' && hours !== 12) hours += 12;
                    if (ampm === 'AM' && hours === 12) hours = 0;
                    
                    return hours * 60 + minutes;
                };
                
                return parseTime(timeA) - parseTime(timeB);
            });
            
            sortedGames.forEach(game => {
                // Format for specified leagues: Use same table format as Today tab
                if (['NFL', 'NBA', 'MLB', 'NHL', 'NCAAF', 'WNBA', 'NCAAM', 'NCAAW', 'NCAABaseball', 'NCAASoftball'].includes(leagueKey)) {
                    const timeDisplay = game.time && game.time !== '12:00 AM' ? game.time : (game.time === '' || game.time === '12:00 AM' ? 'TBD' : '');
                    const channelDisplay = game.channel || '';
                    
                    // For NHL, strip city names to show only mascots
                    let awayTeam = game.away;
                    let homeTeam = game.home;
                    if (leagueKey === 'NHL') {
                        awayTeam = game.away.split(' ').slice(-1)[0]; // Get last word (mascot)
                        homeTeam = game.home.split(' ').slice(-1)[0]; // Get last word (mascot)
                    }
                    
                    // Use same table format as renderGames function
                    html += `
                        <tr class="game-row scheduled-game">
                            <td rowspan="2" style="text-align: left; font-size: 11px; vertical-align: top; padding: 2px 1px; box-sizing: border-box;">${timeDisplay}</td>
                            <td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${awayTeam}</td>
                            <td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;"></td>
                            <td rowspan="2" style="position: relative; text-align: center; font-size: 10px; color: #9ca3af; padding: 2px 1px; box-sizing: border-box;"><div style="position: absolute; top: 35%; left: 50%; transform: translate(-50%, -50%);">${channelDisplay}</div></td>
                        </tr>
                        <tr class="game-row game-separator scheduled-game">
                            <td class="team-cell" style="padding: 2px 1px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 11px; box-sizing: border-box;">${homeTeam}</td>
                            <td style="text-align: right; padding: 2px 1px; font-size: 11px; box-sizing: border-box;"></td>
                        </tr>
                    `;
                } else if (['Bundesliga', 'LaLiga', 'LigaMX', 'Ligue1', 'MLS', 'NWSL', 'PremierLeague', 'SerieA', 'UEFAEuropaLeague', 'UEFAChampionsLeague', 'UEFAConferenceLeague', 'FIFAWorldCupAfricanQualifiers', 'FIFAWorldCupEuropeanQualifiers', '2027AFCAsianCupQualifiers', 'FIFAWorldCupAsianQualifiers', 'FIFAWorldCupCONCACAFQualifiers', 'ClubFriendly'].includes(leagueKey)) {
                    // Format for soccer leagues: Time on left, Teams on two lines (home on top, away on bottom), Channel on right
                    const timeDisplay = game.time && game.time !== '12:00 AM' ? game.time : (game.time === '' || game.time === '12:00 AM' ? 'TBD' : '');
                    const channelDisplay = game.channel || '';
                    html += `
                        <div class="match-row" style="display: flex; justify-content: space-between; align-items: flex-start; padding: 8px 12px; border-bottom: none;">
                            <div class="time" style="color: white; font-size: 11px; font-weight: normal; min-width: 70px; margin-top: 4px;">${timeDisplay}</div>
                            <div class="teams" style="flex: 1; margin: 0 8px;">
                                <div class="home-team" style="color: white; font-size: 11px; line-height: 1.4; margin-bottom: 4px;">${game.home}</div>
                                <div class="away-team" style="color: white; font-size: 11px; line-height: 1.4;">${game.away}</div>
                            </div>
                            <div class="channel" style="color: #9ca3af; font-size: 10px; font-weight: normal; min-width: 50px; text-align: right; margin-top: 4px;">${channelDisplay}</div>
                        </div>
                    `;
                } else if (['Boxing'].includes(leagueKey)) {
                    // Boxing: Group by event, show event as subheader, then all boxer matchups under it
                    const currentEvent = game.away; // awayField = 'event' - this is the event name
                    const currentGameIndex = gamesByDate[dateHeader].indexOf(game);
                    const lastEvent = currentGameIndex > 0 ? gamesByDate[dateHeader][currentGameIndex - 1]?.away : null;
                    
                    // If this is a new event, add event header
                    if (currentEvent !== lastEvent) {
                        html += `<div class="event-header" style="background-color: #9ca3af; color: #000; padding: 4px 12px; margin: 4px 0 2px 0; font-weight: normal; font-size: 10px; line-height: 16px;">${currentEvent}</div>`;
                    }
                    
                    // Add boxer matchup
                    html += `
                        <div class="match-row" style="display: flex; justify-content: space-between; align-items: flex-start; padding: 6px 12px; border-bottom: none;">
                            <div class="teams" style="flex: 1; margin-right: 8px;">
                                <div class="boxers" style="color: white; font-size: 11px; line-height: 1.4;">${game.home}</div>
                            </div>
                            <div class="time" style="color: white; font-size: 11px; font-weight: normal; margin-top: 4px;">${game.time || 'TBD'}</div>
                        </div>
                    `;
                } else if (['Tennis'].includes(leagueKey)) {
                    // Tennis: Tour on top, Tournament on bottom, no time
                    html += `
                        <div class="match-row" style="display: flex; justify-content: space-between; align-items: flex-start; padding: 8px 12px; border-bottom: none;">
                            <div class="teams" style="flex: 1; margin-right: 8px;">
                                <div class="tour" style="color: white; font-size: 11px; line-height: 1.4; margin-bottom: 4px;">${game.home}</div>
                                <div class="tournament" style="color: white; font-size: 11px; line-height: 1.4;">${game.away}</div>
                            </div>
                            <div class="time" style="color: white; font-size: 11px; font-weight: normal; margin-top: 4px;"></div>
                        </div>
                    `;
                } else if (['LIVGolf', 'MotoGP', 'UFC'].includes(leagueKey)) {
                    // LIVGolf, MotoGP, UFC: Event on top, blank on bottom, time on right
                    html += `
                        <div class="match-row" style="display: flex; justify-content: space-between; align-items: flex-start; padding: 8px 12px; border-bottom: none;">
                            <div class="teams" style="flex: 1; margin-right: 8px;">
                                <div class="event" style="color: white; font-size: 11px; line-height: 1.4; margin-bottom: 4px;">${game.home}</div>
                                <div class="blank" style="color: white; font-size: 11px; line-height: 1.4;"></div>
                            </div>
                            <div class="time" style="color: white; font-size: 11px; font-weight: normal; margin-top: 4px;">${game.time && game.time !== '12:00 AM' ? game.time : (game.time === '' || game.time === '12:00 AM' ? 'TBD' : '')}</div>
                        </div>
                    `;
                } else if (['LPGATour', 'PGATour'].includes(leagueKey)) {
                    // LPGATour, PGATour: Tournament on top, blank on bottom, no time
                    html += `
                        <div class="match-row" style="display: flex; justify-content: space-between; align-items: flex-start; padding: 8px 12px; border-bottom: none;">
                            <div class="teams" style="flex: 1; margin-right: 8px;">
                                <div class="tournament" style="color: white; font-size: 11px; line-height: 1.4; margin-bottom: 4px;">${game.home}</div>
                                <div class="blank" style="color: white; font-size: 11px; line-height: 1.4;"></div>
                            </div>
                            <div class="time" style="color: white; font-size: 11px; font-weight: normal; margin-top: 4px;"></div>
                        </div>
                    `;
                } else if (['NASCARCupSeries'].includes(leagueKey)) {
                    // NASCARCupSeries: Race on top, Location on bottom, time on right
                    html += `
                        <div class="match-row" style="display: flex; justify-content: space-between; align-items: flex-start; padding: 8px 12px; border-bottom: none;">
                            <div class="teams" style="flex: 1; margin-right: 8px;">
                                <div class="race" style="color: white; font-size: 11px; line-height: 1.4; margin-bottom: 4px;">${game.away}</div>
                                <div class="location" style="color: white; font-size: 11px; line-height: 1.4;">${game.home}</div>
                            </div>
                            <div class="time" style="color: white; font-size: 11px; font-weight: normal; margin-top: 4px;">${game.time && game.time !== '12:00 AM' ? game.time : (game.time === '' || game.time === '12:00 AM' ? 'TBD' : '')}</div>
                        </div>
                    `;
                } else if (['TrackAndField'].includes(leagueKey)) {
                    // TrackAndField: Meet on top, blank on bottom, no time
                    html += `
                        <div class="match-row" style="display: flex; justify-content: space-between; align-items: flex-start; padding: 8px 12px; border-bottom: none;">
                            <div class="teams" style="flex: 1; margin-right: 8px;">
                                <div class="meet" style="color: white; font-size: 11px; line-height: 1.4; margin-bottom: 4px;">${game.home}</div>
                                <div class="blank" style="color: white; font-size: 11px; line-height: 1.4;"></div>
                            </div>
                            <div class="time" style="color: white; font-size: 11px; font-weight: normal; margin-top: 4px;"></div>
                        </div>
                    `;
                } else {
                    // Default format for other leagues
                    html += `<div class="match-row"><span class="team">${game.away}</span><span class="team">at ${game.home}</span><span class="time">${game.time && game.time !== '12:00 AM' ? game.time : (game.time === '' || game.time === '12:00 AM' ? 'TBD' : '')}</span></div>`;
                }
                });
            
            // Close the table for this date
            html += '</table>';
            });
        
        // Only update content if we're still on the same league
        const currentLeagueHeader = document.getElementById('league-specific-header');
        const currentLeagueKey = currentLeagueHeader ? currentLeagueHeader.innerText : null;
        if (currentLeagueKey === leagueKey) {
            upcomingScheduleContent.innerHTML = html;
        }
        }).catch(error => {
        // Only update content if we're still on the same league
        const currentLeagueHeader = document.getElementById('league-specific-header');
        const currentLeagueKey = currentLeagueHeader ? currentLeagueHeader.innerText : null;
        if (currentLeagueKey === leagueKey) {
            upcomingScheduleContent.innerHTML = `<div class="error" style="color: #c00;">Error loading schedule: ${error.message}</div>`;
        }
        });
    }


    // --- 7. TABS AND FILTER INITIALIZATION ---
const gamesTabsContainer = document.getElementById('games-tabs');
if (gamesTabsContainer) {
    const todayTab = gamesTabsContainer.querySelector('.games-tab[data-tab="today"]');
    const scoresTab = gamesTabsContainer.querySelector('.games-tab[data-tab="scores"]');
    const liveFilter = document.getElementById('live-filter-toggle');
    
    let activeListenerUnsubscribe = null;

    const applyLiveFilter = () => {
        const isFilterActive = liveFilter.classList.contains('active');
        const todayContent = document.getElementById('games');
        if (!todayContent) return;
        const allGameRows = todayContent.querySelectorAll('.game-row');
        const leagueSections = todayContent.querySelectorAll('.league-section');

        allGameRows.forEach(row => {
            let showRow = true;
            if (isFilterActive && !row.classList.contains('live-game')) {
                showRow = false;
            }
            // THIS IS THE CORRECTED LINE:
            row.style.display = showRow ? '' : 'none';
        });

        leagueSections.forEach(section => {
            const visibleRows = section.querySelectorAll('.game-row:not([style*="display: none"])');
            section.style.display = visibleRows.length > 0 ? 'block' : 'none';
        });
    };

    scoresTab.addEventListener('click', () => {
        if (activeListenerUnsubscribe) {
            activeListenerUnsubscribe();
            activeListenerUnsubscribe = null;
        }
        
        todayTab.classList.remove('active');
        liveFilter.classList.remove('active');
        scoresTab.classList.add('active');

        document.getElementById('tv-listings-scores').style.display = 'block';
        document.getElementById('tv-listings-today').style.display = 'none';

        fetchYesterdayScores();
    });

    todayTab.addEventListener('click', () => {
        if (activeListenerUnsubscribe) {
            activeListenerUnsubscribe();
            activeListenerUnsubscribe = null;
        }

        scoresTab.classList.remove('active');
        liveFilter.classList.remove('active');
        todayTab.classList.add('active');
        
        document.getElementById('tv-listings-today').style.display = 'block';
        document.getElementById('tv-listings-scores').style.display = 'none';
        
        activeListenerUnsubscribe = fetchTodayGames(applyLiveFilter);
    });

    liveFilter.addEventListener('click', () => {
        // Always switch to TODAY tab first, then apply LIVE filter
        if (!todayTab.classList.contains('active')) {
            // Switch to TODAY tab
            if (activeListenerUnsubscribe) {
                activeListenerUnsubscribe();
                activeListenerUnsubscribe = null;
            }
            
            scoresTab.classList.remove('active');
            todayTab.classList.add('active');
            
            document.getElementById('tv-listings-today').style.display = 'block';
            document.getElementById('tv-listings-scores').style.display = 'none';
            
            // Load today's games and then apply LIVE filter
            activeListenerUnsubscribe = fetchTodayGames(() => {
                liveFilter.classList.add('active');
                applyLiveFilter();
            });
        } else {
            // Already on TODAY tab, just toggle LIVE filter
            liveFilter.classList.toggle('active');
            applyLiveFilter();
        }
    });

    // Initial load
    if (todayTab) todayTab.click();
}

// --- STATS SUB-TABS INITIALIZATION ---
const statsSubTabsContainer = document.getElementById('stats-sub-tabs');
if (statsSubTabsContainer) {
    const playerStatsTab = statsSubTabsContainer.querySelector('.stats-sub-tab[data-stats-sub-tab="player"]');
    const teamStatsTab = statsSubTabsContainer.querySelector('.stats-sub-tab[data-stats-sub-tab="team"]');
    
    playerStatsTab.addEventListener('click', () => {
        // Remove active class from all sub-tabs
        statsSubTabsContainer.querySelectorAll('.stats-sub-tab').forEach(tab => {
            tab.classList.remove('active');
            tab.style.borderBottom = 'none';
        });
        // Add active class to clicked tab
        playerStatsTab.classList.add('active');
        playerStatsTab.style.borderBottom = '1px solid #fff';
        
        // Show player content, hide team content
        document.getElementById('player-stats-content').style.display = 'flex';
        document.getElementById('team-stats-content').style.display = 'none';
    });
    
    teamStatsTab.addEventListener('click', () => {
        // Remove active class from all sub-tabs
        statsSubTabsContainer.querySelectorAll('.stats-sub-tab').forEach(tab => {
            tab.classList.remove('active');
            tab.style.borderBottom = 'none';
        });
        // Add active class to clicked tab
        teamStatsTab.classList.add('active');
        teamStatsTab.style.borderBottom = '1px solid #fff';
        
        // Show team content, hide player content
        document.getElementById('player-stats-content').style.display = 'none';
        document.getElementById('team-stats-content').style.display = 'flex';
    });
}

// --- STATS CATEGORY MENU INITIALIZATION ---
function initializeStatsCategoryMenu(menuId, displayId) {
    const categoryMenu = document.getElementById(menuId);
    if (!categoryMenu) return;
    
    categoryMenu.addEventListener('click', (e) => {
        const clickedItem = e.target.closest('.stats-category-item');
        if (!clickedItem) return;
        
        const category = clickedItem.dataset.category;
        
        // Update all category items in this menu
        categoryMenu.querySelectorAll('.stats-category-item').forEach(item => {
            item.classList.remove('active');
            item.style.borderBottom = 'none';
            item.style.backgroundColor = '#141414';
            item.style.color = '#BFBFBF';
            item.style.fontWeight = 'normal';
        });
        
        // Activate clicked item
        clickedItem.classList.add('active');
        clickedItem.style.borderBottom = '1px solid #fff';
        clickedItem.style.backgroundColor = '#000';
        clickedItem.style.color = '#fff';
        clickedItem.style.fontWeight = 'bold';
        
        // Load stats for this category
        loadStatsCategory(category, displayId);
    });
    
    // Load the first category by default
    const firstCategory = categoryMenu.querySelector('.stats-category-item');
    if (firstCategory) {
        const defaultCategory = firstCategory.dataset.category;
        console.log('Loading default stats category:', defaultCategory);
        loadStatsCategory(defaultCategory, displayId);
    }
}

// Initialize both category menus
initializeStatsCategoryMenu('player-category-menu', 'player-stats-content-area');
initializeStatsCategoryMenu('team-category-menu', 'team-stats-content-area');

// --- STATS CATEGORY LOADER ---
function loadStatsCategory(category, displayElementId) {
    console.log('loadStatsCategory called with:', category, displayElementId);
    const displayElement = document.getElementById(displayElementId);
    if (!displayElement) {
        console.log('Display element not found:', displayElementId);
        return;
    }
    
    displayElement.innerHTML = `<p style="color: #9ca3af;">Loading ${category} statistics...</p>`;
    
    // Get current league to determine data source
    const leagueHeader = document.getElementById('league-specific-header');
    const currentLeague = leagueHeader ? leagueHeader.innerText : null;
    console.log('Current league detected:', currentLeague);
    
    // Load stats based on league and category
    if (currentLeague === 'MLB') {
        console.log('Loading MLB stats for category:', category);
        loadMLBStats(category, displayElement);
    } else {
        console.log('Non-MLB league, showing placeholder for:', currentLeague);
        // For other leagues, show placeholder
        setTimeout(() => {
            displayElement.innerHTML = `<p style="color: #9ca3af;">${category} statistics for ${currentLeague} will be implemented here...</p>`;
        }, 500);
    }
}


// --- PARSE BASEBALL REFERENCE DATA ---
function parseBaseballReferenceData(html, category) {
    try {
        // Create a temporary DOM parser
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        
        // Find the 2025 Leaders section
        const leadersSection = Array.from(doc.querySelectorAll('h2')).find(h2 => h2.textContent.includes('2025 Leaders'));
        
        if (!leadersSection) {
            console.log('2025 Leaders section not found');
            return [];
        }
        
        // Get all the leader entries
        const leaderEntries = [];
        let currentElement = leadersSection.nextElementSibling;
        
        while (currentElement && currentElement.tagName !== 'H2') {
            if (currentElement.tagName === 'P' && currentElement.textContent.trim()) {
                const text = currentElement.textContent.trim();
                // Look for bold text followed by leader info
                const match = text.match(/^\*\*(.+?)\*\*\s*(.+)$/) || 
                            text.match(/^(.+?)\s+(.+)$/);
                
                if (match) {
                    const statName = match[1].trim();
                    const leaderInfo = match[2].trim();
                    
                    // Only include if it looks like a valid stat entry
                    if (statName && leaderInfo && leaderInfo.includes('(')) {
                        // Categorize the stats
                        if (shouldIncludeStat(statName, category)) {
                            leaderEntries.push({
                                stat: statName,
                                leader: leaderInfo
                            });
                        }
                    }
                }
            }
            currentElement = currentElement.nextElementSibling;
        }
        
        return leaderEntries;
        
    } catch (error) {
        console.error('Error parsing Baseball Reference data:', error);
        return [];
    }
}

// --- CATEGORIZE STATS ---
function shouldIncludeStat(statName, category) {
    const battingStats = [
        'WAR Position Players', 'Offensive WAR', 'Defensive WAR', 'Batting Average', 'On-Base%', 
        'Slugging %', 'On-Base Plus Slugging', 'Games Played', 'At Bats', 'Plate Appearances',
        'Runs Scored', 'Hits', 'Total Bases', 'Doubles', 'Triples', 'Home Runs', 'Runs Batted In',
        'Bases on Balls', 'Strikeouts', 'Stolen Bases', 'Singles', 'Adjusted OPS+', 'Runs Created',
        'Adj. Batting Runs', 'Adj. Batting Wins', 'Extra Base Hits', 'Times On Base', 'Offensive Win %',
        'Hit By Pitch', 'Sacrifice Hits', 'Sacrifice Flies', 'Intentional Bases on Balls',
        'Double Plays Grounded Into', 'Caught Stealing', 'SB %', 'Power-Speed #', 'AB per SO',
        'AB per HR', 'Outs Made', 'Base-Out Runs Added (RE24)', 'Win Probability Added (WPA)',
        'Situ. Wins Added (WPA/LI)', 'Championship WPA (cWPA)', 'Base-Out Wins Added (REW)',
        'rOBA', 'Rbat+'
    ];
    
    const pitchingStats = [
        'WAR for Pitchers', 'Earned Run Average', 'Wins', 'Win-Loss %', 'Walks & Hits per IP',
        'Hits per 9 IP', 'Bases On Balls per 9 IP', 'Strikeouts per 9 IP', 'Games Played',
        'Saves', 'Innings Pitched', 'Strikeouts', 'Games Started', 'Complete Games', 'Shutouts',
        'Home Runs', 'Bases on Balls', 'Hits', 'Strikeouts / Base On Balls', 'Home Runs per 9 IP',
        'Losses', 'Earned Runs', 'Wild Pitches', 'Hit By Pitch', 'Batters Faced', 'Games Finished',
        'Adjusted ERA+', 'Fielding Independent Pitching', 'Adj. Pitching Runs', 'Adj. Pitching Wins',
        'Base-Out Runs Saved (RE24)', 'Win Probability Added (WPA)', 'Sit. Wins Saved (WPA/LI)',
        'Championship WPA (cWPA)', 'Base-Out Wins Saved (REW)'
    ];
    
    const fieldingStats = [
        'Putouts', 'Assists', 'Errors Committed', 'Total Zone Runs', 'Def. Games as C',
        'Putouts as C', 'Assists as C', 'Errors Committed as C', 'Double Plays Turned as C',
        'Passed Balls', 'Stolen Bases Allowed as C', 'Caught Stealing as C', 'Caught Stealing %'
    ];
    
    const advancedStats = [
        'Wins Above Replacement', 'WAR Position Players', 'WAR for Pitchers', 'Adjusted OPS+',
        'Adjusted ERA+', 'Fielding Independent Pitching', 'Base-Out Runs Added (RE24)',
        'Win Probability Added (WPA)', 'Situ. Wins Added (WPA/LI)', 'Championship WPA (cWPA)',
        'Base-Out Wins Added (REW)', 'Base-Out Wins Saved (REW)', 'rOBA', 'Rbat+'
    ];
    
    switch (category) {
        case 'batting':
            return battingStats.some(stat => statName.includes(stat));
        case 'pitching':
            return pitchingStats.some(stat => statName.includes(stat));
        case 'fielding':
            return fieldingStats.some(stat => statName.includes(stat));
        case 'advanced':
            return advancedStats.some(stat => statName.includes(stat));
        default:
            return true;
    }
}

// --- DISPLAY MLB STATS ---
function displayMLBStats(statsData, category, displayElement) {
    let html = `<div style="color: white;">`;
    html += `<h4 style="color: #fff; font-size: 12px; margin-bottom: 10px; border-bottom: 1px solid #4a4a4a; padding-bottom: 5px;">2025 MLB ${category.charAt(0).toUpperCase() + category.slice(1)} Leaders</h4>`;
    
    if (statsData.length > 0) {
        html += `<table style="width: 100%; border-collapse: collapse; font-size: 10px;">`;
        html += `<thead><tr style="border-bottom: 1px solid #4a4a4a;">`;
        html += `<th style="padding: 4px; text-align: left; color: #ccc;">Statistic</th>`;
        html += `<th style="padding: 4px; text-align: left; color: #ccc;">Leader</th>`;
        html += `</tr></thead><tbody>`;
        
        statsData.forEach(stat => {
            html += `<tr style="border-bottom: 1px solid #333;">`;
            html += `<td style="padding: 4px; color: white; font-weight: 500;">${stat.stat}</td>`;
            html += `<td style="padding: 4px; color: #ccc;">${stat.leader}</td>`;
            html += `</tr>`;
        });
        
        html += `</tbody></table>`;
    } else {
        html += `<p style="color: #9ca3af;">No ${category} statistics available.</p>`;
    }
    
    html += `<p style="color: #666; font-size: 9px; margin-top: 10px;">Data from Baseball Reference • Updated daily</p>`;
    html += `</div>`;
    
    displayElement.innerHTML = html;
}

// --- DAILY STATS REFRESH SYSTEM ---
const statsCache = {
    data: new Map(),
    timestamps: new Map(),
    CACHE_DURATION: 12 * 60 * 60 * 1000, // 12 hours cache for cost efficiency
    
    set(key, data) {
        this.data.set(key, data);
        this.timestamps.set(key, Date.now());
    },
    
    get(key) {
        const timestamp = this.timestamps.get(key);
        if (!timestamp || Date.now() - timestamp > this.CACHE_DURATION) {
            this.data.delete(key);
            this.timestamps.delete(key);
            return null;
        }
        return this.data.get(key);
    },
    
    clear() {
        this.data.clear();
        this.timestamps.clear();
    }
};

// --- ENHANCED MLB STATS LOADER FROM FIRESTORE ---
async function loadMLBStats(category, displayElement) {
    const cacheKey = `mlb_stats_${category}`;
    let cachedData = statsCache.get(cacheKey);
    
    if (cachedData) {
        console.log('Using cached MLB stats for', category);
        displayMLBStatsFromFirestore(cachedData, category, displayElement);
        return;
    }
    
    try {
        console.log('Fetching fresh MLB stats from Firestore for', category);
        
        // Load from Firestore
        const statsData = await loadMLBStatsFromFirestore(category);
        
        if (statsData && statsData.length > 0) {
            // Cache the data for 12 hours
            statsCache.set(cacheKey, statsData);
            displayMLBStatsFromFirestore(statsData, category, displayElement);
        } else {
            displayElement.innerHTML = `<p style="color: #9ca3af;">No ${category} data available. Please sync from Google Sheets.</p>`;
        }
        
    } catch (error) {
        console.error('Error loading MLB stats from Firestore:', error);
        displayElement.innerHTML = `<p style="color: #ef4444;">Error loading MLB statistics. Please try again later.</p>`;
    }
}

// --- LOAD MLB STATS FROM FIRESTORE ---
async function loadMLBStatsFromFirestore(category) {
    try {
        const docRef = db.collection('mlb_stats').doc(category);
        const doc = await docRef.get();
        
        if (doc.exists) {
            const data = doc.data();
            const statsData = data.stats || [];
            console.log('✅ Loaded', statsData.length, 'stats for', category);
            return statsData;
        } else {
            console.log('❌ No stats found for category:', category);
            return [];
        }
    } catch (error) {
        console.error('❌ Error loading MLB stats from Firestore:', error);
        return [];
    }
}

// --- DISPLAY MLB STATS FROM FIRESTORE ---
function displayMLBStatsFromFirestore(statsData, category, displayElement) {
    let html = `<div style="color: white;">`;
    html += `<h4 style="color: #fff; font-size: 12px; margin-bottom: 10px; border-bottom: 1px solid #4a4a4a; padding-bottom: 5px;">2025 MLB ${category.charAt(0).toUpperCase() + category.slice(1)} Leaders</h4>`;
    
    if (statsData && statsData.length > 0) {
        html += `<table style="width: 100%; border-collapse: collapse; font-size: 10px;">`;
        html += `<thead><tr style="border-bottom: 1px solid #4a4a4a;">`;
        html += `<th style="padding: 4px; text-align: left; color: #ccc;">Statistic</th>`;
        html += `<th style="padding: 4px; text-align: left; color: #ccc;">Leader</th>`;
        html += `<th style="padding: 4px; text-align: left; color: #ccc;">Value</th>`;
        html += `</tr></thead><tbody>`;
        
        statsData.forEach(stat => {
            html += `<tr style="border-bottom: 1px solid #333;">`;
            html += `<td style="padding: 4px; color: white; font-weight: 500;">${stat.statName}</td>`;
            html += `<td style="padding: 4px; color: #ccc;">${stat.leaderName}</td>`;
            html += `<td style="padding: 4px; color: #ccc;">${stat.value}</td>`;
            html += `</tr>`;
        });
        
        html += `</tbody></table>`;
    } else {
        html += `<p style="color: #9ca3af;">No ${category} statistics available.</p>`;
    }
    
    html += `<p style="color: #666; font-size: 9px; margin-top: 10px;">Data from Google Sheets • Updated daily • Cached for 12 hours</p>`;
    html += `</div>`;
    
    displayElement.innerHTML = html;
}

// --- DAILY REFRESH SCHEDULER ---
function startDailyStatsRefresh() {
    // Clear cache at midnight every day
    const now = new Date();
    const midnight = new Date(now);
    midnight.setHours(24, 0, 0, 0); // Next midnight
    const msUntilMidnight = midnight.getTime() - now.getTime();
    
    setTimeout(() => {
        console.log('Clearing MLB stats cache for daily refresh...');
        statsCache.clear();
        
        // Set up daily refresh
        setInterval(() => {
            console.log('Daily MLB stats cache refresh...');
            statsCache.clear();
        }, 24 * 60 * 60 * 1000); // Every 24 hours
        
    }, msUntilMidnight);
}

// Start the daily refresh system
startDailyStatsRefresh();

// --- TEST BASEBALL REFERENCE SCRAPER ---
async function testBaseballReferenceScraper() {
    console.log('=== TESTING BASEBALL REFERENCE SCRAPER ===');
    
    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const baseballRefUrl = 'https://www.baseball-reference.com/leaders/';
    
    try {
        console.log('Fetching Baseball Reference data...');
        const response = await fetch(proxyUrl + encodeURIComponent(baseballRefUrl));
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        
        const html = await response.text();
        console.log('✅ Successfully fetched HTML (length:', html.length, 'characters)');
        
        // Parse the HTML
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        
        // Find all h2 elements to see what sections exist
        const allH2s = Array.from(doc.querySelectorAll('h2'));
        console.log('\n📋 All H2 sections found:');
        allH2s.forEach((h2, index) => {
            console.log(`${index + 1}. "${h2.textContent.trim()}"`);
        });
        
        // Look for 2025 Leaders section
        const leadersSection = allH2s.find(h2 => h2.textContent.includes('2025 Leaders'));
        
        if (leadersSection) {
            console.log('\n✅ Found "2025 Leaders" section');
            
            // Get all content after this section until next h2
            const leaderEntries = [];
            let currentElement = leadersSection.nextElementSibling;
            let elementCount = 0;
            
            console.log('\n📊 Parsing leader entries...');
            
            while (currentElement && currentElement.tagName !== 'H2' && elementCount < 50) {
                if (currentElement.tagName === 'P' && currentElement.textContent.trim()) {
                    const text = currentElement.textContent.trim();
                    console.log(`Entry ${elementCount + 1}: "${text}"`);
                    
                    // Try different parsing patterns
                    const patterns = [
                        /^\*\*(.+?)\*\*\s*(.+)$/,  // **Stat** Leader info
                        /^(.+?)\s+(.+)$/           // Stat Leader info
                    ];
                    
                    for (const pattern of patterns) {
                        const match = text.match(pattern);
                        if (match) {
                            const statName = match[1].trim();
                            const leaderInfo = match[2].trim();
                            
                            if (statName && leaderInfo) {
                                leaderEntries.push({
                                    stat: statName,
                                    leader: leaderInfo,
                                    rawText: text
                                });
                                console.log(`  ✅ Parsed: "${statName}" -> "${leaderInfo}"`);
                                break;
                            }
                        }
                    }
                }
                currentElement = currentElement.nextElementSibling;
                elementCount++;
            }
            
            console.log(`\n📈 Total leader entries found: ${leaderEntries.length}`);
            
            // Show first 10 entries
            console.log('\n🏆 First 10 leader entries:');
            leaderEntries.slice(0, 10).forEach((entry, index) => {
                console.log(`${index + 1}. ${entry.stat}: ${entry.leader}`);
            });
            
            // Categorize by stat type
            console.log('\n📊 Categorizing stats...');
            const battingStats = leaderEntries.filter(entry => 
                shouldIncludeStat(entry.stat, 'batting')
            );
            const pitchingStats = leaderEntries.filter(entry => 
                shouldIncludeStat(entry.stat, 'pitching')
            );
            const fieldingStats = leaderEntries.filter(entry => 
                shouldIncludeStat(entry.stat, 'fielding')
            );
            const advancedStats = leaderEntries.filter(entry => 
                shouldIncludeStat(entry.stat, 'advanced')
            );
            
            console.log(`Batting stats: ${battingStats.length}`);
            console.log(`Pitching stats: ${pitchingStats.length}`);
            console.log(`Fielding stats: ${fieldingStats.length}`);
            console.log(`Advanced stats: ${advancedStats.length}`);
            
            // Show sample from each category
            if (battingStats.length > 0) {
                console.log('\n⚾ Sample Batting Stats:');
                battingStats.slice(0, 3).forEach(entry => {
                    console.log(`  ${entry.stat}: ${entry.leader}`);
                });
            }
            
            if (pitchingStats.length > 0) {
                console.log('\n⚾ Sample Pitching Stats:');
                pitchingStats.slice(0, 3).forEach(entry => {
                    console.log(`  ${entry.stat}: ${entry.leader}`);
                });
            }
            
        } else {
            console.log('❌ "2025 Leaders" section not found');
            console.log('Available sections:', allH2s.map(h2 => h2.textContent.trim()));
        }
        
    } catch (error) {
        console.error('❌ Error testing scraper:', error);
    }
    
    console.log('\n=== SCRAPER TEST COMPLETE ===');
}

// Make test function available globally
window.testBaseballScraper = testBaseballReferenceScraper;

// --- RESET STATS TABS TO DEFAULT ---
function resetStatsTabsToDefault() {
    // Reset Player/Team sub-tabs to Player active
    const statsSubTabsContainer = document.getElementById('stats-sub-tabs');
    if (statsSubTabsContainer) {
        const playerStatsTab = statsSubTabsContainer.querySelector('.stats-sub-tab[data-stats-sub-tab="player"]');
        const teamStatsTab = statsSubTabsContainer.querySelector('.stats-sub-tab[data-stats-sub-tab="team"]');
        
        // Reset all sub-tabs
        statsSubTabsContainer.querySelectorAll('.stats-sub-tab').forEach(tab => {
            tab.classList.remove('active');
            tab.style.borderBottom = 'none';
        });
        
        // Activate Player tab
        if (playerStatsTab) {
            playerStatsTab.classList.add('active');
            playerStatsTab.style.borderBottom = '1px solid #fff';
        }
        
        // Show player content, hide team content
        document.getElementById('player-stats-content').style.display = 'flex';
        document.getElementById('team-stats-content').style.display = 'none';
    }
    
    // Reset Player category menu to first item (Batting) active
    const playerCategoryMenu = document.getElementById('player-category-menu');
    if (playerCategoryMenu) {
        const firstCategoryItem = playerCategoryMenu.querySelector('.stats-category-item[data-category="batting"]');
        
        // Reset all category items
        playerCategoryMenu.querySelectorAll('.stats-category-item').forEach(item => {
            item.classList.remove('active');
            item.style.borderBottom = 'none';
            item.style.backgroundColor = '#141414';
            item.style.color = '#BFBFBF';
            item.style.fontWeight = 'normal';
        });
        
        // Activate first category (Batting)
        if (firstCategoryItem) {
            firstCategoryItem.classList.add('active');
            firstCategoryItem.style.borderBottom = '1px solid #fff';
            firstCategoryItem.style.backgroundColor = '#000';
            firstCategoryItem.style.color = '#fff';
            firstCategoryItem.style.fontWeight = 'bold';
        }
    }
    
    // Reset Team category menu to first item (Standings) active
    const teamCategoryMenu = document.getElementById('team-category-menu');
    if (teamCategoryMenu) {
        const firstCategoryItem = teamCategoryMenu.querySelector('.stats-category-item[data-category="standings"]');
        
        // Reset all category items
        teamCategoryMenu.querySelectorAll('.stats-category-item').forEach(item => {
            item.classList.remove('active');
            item.style.borderBottom = 'none';
            item.style.backgroundColor = '#141414';
            item.style.color = '#BFBFBF';
            item.style.fontWeight = 'normal';
        });
        
        // Activate first category (Standings)
        if (firstCategoryItem) {
            firstCategoryItem.classList.add('active');
            firstCategoryItem.style.borderBottom = '1px solid #fff';
            firstCategoryItem.style.backgroundColor = '#000';
            firstCategoryItem.style.color = '#fff';
            firstCategoryItem.style.fontWeight = 'bold';
        }
    }
}

// --- MAIN TABS INITIALIZATION ---
const mainTabsContainer = document.getElementById('main-tabs');
if (mainTabsContainer) {
    mainTabsContainer.addEventListener('click', (e) => {
        const clickedTab = e.target.closest('.main-tab');
        if (!clickedTab) return;
        
        const tabType = clickedTab.dataset.mainTab;
        
        // Update tab appearances
        mainTabsContainer.querySelectorAll('.main-tab').forEach(tab => {
            tab.classList.remove('active');
            tab.style.backgroundColor = '#2a2a2a';
            tab.style.color = '#ccc';
            tab.style.fontWeight = 'normal';
        });
        clickedTab.classList.add('active');
        clickedTab.style.backgroundColor = '#fff';
        clickedTab.style.color = '#000';
        clickedTab.style.fontWeight = 'bold';
        
        // Show/hide content
        document.querySelectorAll('.main-tab-content').forEach(content => {
            content.style.display = 'none';
        });
        document.getElementById(`${tabType}-tab-content`).style.display = 'block';
        
        // Reset stats tabs to default state when switching leagues
        if (tabType === 'stats') {
            resetStatsTabsToDefault();
        }
    });
}

// --- SCHEDULE TABS INITIALIZATION ---
const scheduleTabsContainer = document.getElementById('schedule-tabs');
if (scheduleTabsContainer) {
    const todayScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="today"]');
    const yesterdayScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="yesterday"]');
    const upcomingScheduleTab = scheduleTabsContainer.querySelector('.schedule-tab[data-schedule-tab="upcoming"]');
    
    todayScheduleTab.addEventListener('click', () => {
        // Remove active class from all tabs and reset styling
        scheduleTabsContainer.querySelectorAll('.schedule-tab').forEach(tab => {
            tab.classList.remove('active');
            tab.style.backgroundColor = '#2a2a2a';
            tab.style.color = '#ccc';
            tab.style.borderBottom = 'none';
        });
        // Add active class and styling to clicked tab
        todayScheduleTab.classList.add('active');
        todayScheduleTab.style.backgroundColor = '#2a2a2a';
        todayScheduleTab.style.color = '#fff';
        todayScheduleTab.style.borderBottom = '2px solid #fff';
        
        // Show today content, hide other content
        document.getElementById('league-schedule-today-content').style.display = 'block';
        document.getElementById('league-schedule-yesterday-content').style.display = 'none';
        document.getElementById('league-schedule-upcoming-content').style.display = 'none';
    });
    
    yesterdayScheduleTab.addEventListener('click', () => {
        // Remove active class from all tabs and reset styling
        scheduleTabsContainer.querySelectorAll('.schedule-tab').forEach(tab => {
            tab.classList.remove('active');
            tab.style.backgroundColor = '#2a2a2a';
            tab.style.color = '#ccc';
            tab.style.borderBottom = 'none';
        });
        // Add active class and styling to clicked tab
        yesterdayScheduleTab.classList.add('active');
        yesterdayScheduleTab.style.backgroundColor = '#2a2a2a';
        yesterdayScheduleTab.style.color = '#fff';
        yesterdayScheduleTab.style.borderBottom = '2px solid #fff';
        
        // Show yesterday content, hide other content
        document.getElementById('league-schedule-today-content').style.display = 'none';
        document.getElementById('league-schedule-yesterday-content').style.display = 'block';
        document.getElementById('league-schedule-upcoming-content').style.display = 'none';
        
        // Load yesterday's scores for the current league
        const currentLeagueHeader = document.getElementById('league-specific-header');
        if (currentLeagueHeader) {
            const leagueName = currentLeagueHeader.innerText;
            const leagueConfig = LEAGUE_DATA_CONFIG[leagueName];
            if (leagueConfig) {
                fetchYesterdayScoresForLeague(leagueConfig.leagueId, leagueName);
            }
        }
    });
    
    upcomingScheduleTab.addEventListener('click', (event) => {
        // Remove active class from all tabs and reset styling
        scheduleTabsContainer.querySelectorAll('.schedule-tab').forEach(tab => {
            tab.classList.remove('active');
            tab.style.backgroundColor = '#2a2a2a';
            tab.style.color = '#ccc';
            tab.style.borderBottom = 'none';
        });
        // Add active class and styling to clicked tab
        upcomingScheduleTab.classList.add('active');
        upcomingScheduleTab.style.backgroundColor = '#2a2a2a';
        upcomingScheduleTab.style.color = '#fff';
        upcomingScheduleTab.style.borderBottom = '2px solid #fff';

        // Show upcoming content, hide other content
        document.getElementById('league-schedule-today-content').style.display = 'none';
        document.getElementById('league-schedule-yesterday-content').style.display = 'none';
        document.getElementById('league-schedule-upcoming-content').style.display = 'block';
        
        // Get the current league key from the header
        const leagueHeader = document.getElementById('league-specific-header');
        const leagueKey = leagueHeader ? leagueHeader.innerText : null;

        // Call the new function to load the upcoming schedule, passing the current leagueKey
        if (leagueKey) {
            loadUpcomingSchedule(leagueKey);
        }
    });
}
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const nwsltabs = document.getElementById('nwsltabs-NWSL');

  const feedMapNWSL = {
    headlines: "https://rss.app/feeds/tnA7WHOi3hNDP2Wr.xml",
	breaking: "https://rss.app/feeds/PE7NGL6ftSREkzv9.xml",
    reddit: "https://rss.app/feeds/HL9rA42ELIkqWXJg.xml"
  };

  function fetchFeedNWSL(targetId, url) {
    const contentPane = document.querySelector(targetId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul style="margin:0; padding:0; list-style:none;">';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li style="margin-bottom:0.5em; padding:4px 0; border-bottom:1px solid #C9C8C7;">
              <a href="${link}" target="_blank" style="text-decoration:none; color:inherit;">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (nwsltabs) {
    nwsltabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        // Hide all panes
        document.querySelectorAll('#news-NWSL .news-feed-content')
          .forEach(p => p.style.display = 'none');
        // Remove active from all tabs
        document.querySelectorAll('#nwsltabs-NWSL .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPane = document.getElementById(source + '-feed-NWSL');
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        if (feedMapNWSL[source]) {
          fetchFeedNWSL(`#${source}-feed-NWSL`, feedMapNWSL[source]);
        }
      }
    });

    // initial load
    const initialActiveTab = document.querySelector('#nwsltabs-NWSL .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      fetchFeedNWSL(`#${source}-feed-NWSL`, feedMapNWSL[source]);
    }
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const ligue1tabs = document.getElementById('ligue1tabs-Ligue1');

  const feedMapLigue1 = {
    headlines: "https://rss.app/feeds/tbxA99undrBg8j4I.xml",
    breaking: "https://rss.app/feeds/AdN94t2aMmFNKpiW.xml",
    reddit: "https://rss.app/feeds/UNtqy55sZPAGDxWp.xml"
  };

  function fetchFeedLigue1(url, contentPaneId) {
    const contentPane = document.getElementById(contentPaneId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul>';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li>
              <a href="${link}" target="_blank">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (ligue1tabs) {
    ligue1tabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        document.querySelectorAll('#news-Ligue1 .news-feed-content')
          .forEach(p => p.style.display = 'none');
        document.querySelectorAll('#ligue1tabs-Ligue1 .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPaneId = `${source}-feed-Ligue1`;
        const targetPane = document.getElementById(targetPaneId);
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        const url = e.target.dataset.url;
        if (url) {
          fetchFeedLigue1(url, targetPaneId);
        }
      }
    });

    const initialActiveTab = document.querySelector('#ligue1tabs-Ligue1 .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      const targetPaneId = `${source}-feed-Ligue1`;
      const url = initialActiveTab.dataset.url;
      fetchFeedLigue1(url, targetPaneId);
    }
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const ligamxtabs = document.getElementById('ligamxtabs-LigaMX');

  const feedMapLigaMX = {
    headlines: "https://rss.app/feeds/tr10VModrXb2evce.xml",
    breaking: "https://rss.app/feeds/jEo9SeX0mg1s2Zcy.xml",
    reddit: "https://rss.app/feeds/o3KVLBimGj35TqzR.xml"
  };

  function fetchFeedLigaMX(url, contentPaneId) {
    const contentPane = document.getElementById(contentPaneId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul>';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li>
              <a href="${link}" target="_blank">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (ligamxtabs) {
    ligamxtabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        document.querySelectorAll('#news-LigaMX .news-feed-content')
          .forEach(p => p.style.display = 'none');
        document.querySelectorAll('#ligamxtabs-LigaMX .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPaneId = `${source}-feed-LigaMX`;
        const targetPane = document.getElementById(targetPaneId);
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        const url = e.target.dataset.url;
        if (url) {
          fetchFeedLigaMX(url, targetPaneId);
        }
      }
    });

    const initialActiveTab = document.querySelector('#ligamxtabs-LigaMX .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      const targetPaneId = `${source}-feed-LigaMX`;
      const url = initialActiveTab.dataset.url;
      fetchFeedLigaMX(url, targetPaneId);
    }
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const uefaeuropaleaguetabs = document.getElementById('uefaeuropaleaguetabs-UEFAEuropaLeague');

  const feedMapUEFAEuropaLeague = {
    headlines: "https://rss.app/feeds/tw7ijzsLkAnmByMf.xml",
    breaking: "https://rss.app/feeds/Y86rdhcYGEJTzVVE.xml"
  };

  function fetchFeedUEFAEuropaLeague(url, contentPaneId) {
    const contentPane = document.getElementById(contentPaneId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul>';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li>
              <a href="${link}" target="_blank">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (uefaeuropaleaguetabs) {
    uefaeuropaleaguetabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        document.querySelectorAll('#news-UEFAEuropaLeague .news-feed-content')
          .forEach(p => p.style.display = 'none');
        document.querySelectorAll('#uefaeuropaleaguetabs-UEFAEuropaLeague .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPaneId = `${source}-feed-UEFAEuropaLeague`;
        const targetPane = document.getElementById(targetPaneId);
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        const url = e.target.dataset.url;
        if (url) {
          fetchFeedUEFAEuropaLeague(url, targetPaneId);
        }
      }
    });

    const initialActiveTab = document.querySelector('#uefaeuropaleaguetabs-UEFAEuropaLeague .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      const targetPaneId = `${source}-feed-UEFAEuropaLeague`;
      const url = initialActiveTab.dataset.url;
      fetchFeedUEFAEuropaLeague(url, targetPaneId);
    }
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const uefaconferenceleaguetabs = document.getElementById('uefaconferenceleaguetabs-UEFAConferenceLeague');

  const feedMapUEFAConferenceLeague = {
    headlines: "https://rss.app/feeds/tpoJCJ6SHNu5XMoG.xml",
    breaking: "https://rss.app/feeds/0zeKHWCVNtBCrCro.xml"
  };

  function fetchFeedUEFAConferenceLeague(url, contentPaneId) {
    const contentPane = document.getElementById(contentPaneId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul>';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li>
              <a href="${link}" target="_blank">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (uefaconferenceleaguetabs) {
    uefaconferenceleaguetabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        document.querySelectorAll('#news-UEFAConferenceLeague .news-feed-content')
          .forEach(p => p.style.display = 'none');
        document.querySelectorAll('#uefaconferenceleaguetabs-UEFAConferenceLeague .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPaneId = `${source}-feed-UEFAConferenceLeague`;
        const targetPane = document.getElementById(targetPaneId);
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        const url = e.target.dataset.url;
        if (url) {
          fetchFeedUEFAConferenceLeague(url, targetPaneId);
        }
      }
    });

    const initialActiveTab = document.querySelector('#uefaconferenceleaguetabs-UEFAConferenceLeague .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      const targetPaneId = `${source}-feed-UEFAConferenceLeague`;
      const url = initialActiveTab.dataset.url;
      fetchFeedUEFAConferenceLeague(url, targetPaneId);
    }
  }
});
</script>

		<script>
document.addEventListener('DOMContentLoaded', function() {
  const livgolftabs = document.getElementById('livgolftabs-LIVGolf');

  const feedMapLIVGolf = {
    headlines: "https://rss.app/feeds/teYHPC2ZpUGeMBx5.xml",
    breaking: "https://rss.app/feeds/InHgRAqAOeKlilq8.xml"
  };

  function fetchFeedLIVGolf(url, contentPaneId) {
    const contentPane = document.getElementById(contentPaneId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul>';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li>
              <a href="${link}" target="_blank">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (livgolftabs) {
    livgolftabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        document.querySelectorAll('#news-LIVGolf .news-feed-content')
          .forEach(p => p.style.display = 'none');
        document.querySelectorAll('#livgolftabs-LIVGolf .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPaneId = `${source}-feed-LIVGolf`;
        const targetPane = document.getElementById(targetPaneId);
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        const url = e.target.dataset.url;
        if (url) {
          fetchFeedLIVGolf(url, targetPaneId);
        }
      }
    });

    const initialActiveTab = document.querySelector('#livgolftabs-LIVGolf .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      const targetPaneId = `${source}-feed-LIVGolf`;
      const url = initialActiveTab.dataset.url;
      fetchFeedLIVGolf(url, targetPaneId);
    }
  }
});
</script>

		<script>
document.addEventListener('DOMContentLoaded', function() {
  const indycarrtabs = document.getElementById('indycarrtabs-IndyCar');

  const feedMapIndyCar = {
    headlines: "https://rss.app/feeds/tBzOR3X3d0NpmoAA.xml",
    breaking: "https://rss.app/feeds/Zo7JsQDXIT8D0pCD.xml",
    reddit: "https://rss.app/feeds/8qBnW4yImPpMqMDD.xml"
  };

  function fetchFeedIndyCar(url, contentPaneId) {
    const contentPane = document.getElementById(contentPaneId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul>';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li>
              <a href="${link}" target="_blank">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (indycarrtabs) {
    indycarrtabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        document.querySelectorAll('#news-IndyCar .news-feed-content')
          .forEach(p => p.style.display = 'none');
        document.querySelectorAll('#indycarrtabs-IndyCar .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPaneId = `${source}-feed-IndyCar`;
        const targetPane = document.getElementById(targetPaneId);
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        const url = e.target.dataset.url;
        if (url) {
          fetchFeedIndyCar(url, targetPaneId);
        }
      }
    });

    const initialActiveTab = document.querySelector('#indycarrtabs-IndyCar .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      const targetPaneId = `${source}-feed-IndyCar`;
      const url = initialActiveTab.dataset.url;
      fetchFeedIndyCar(url, targetPaneId);
    }
  }
});
</script>

		<script>
document.addEventListener('DOMContentLoaded', function() {
  const lpgatourtabs = document.getElementById('lpgatourtabs-LPGATour');

  const feedMapLPGATour = {
    headlines: "https://rss.app/feeds/tqz9SwQPuclR1mSF.xml",
    breaking: "https://rss.app/feeds/0afVGov5MVxxBF7B.xml"
  };

  function fetchFeedLPGATour(url, contentPaneId) {
    const contentPane = document.getElementById(contentPaneId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul>';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li>
              <a href="${link}" target="_blank">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (lpgatourtabs) {
    lpgatourtabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        document.querySelectorAll('#news-LPGATour .news-feed-content')
          .forEach(p => p.style.display = 'none');
        document.querySelectorAll('#lpgatourtabs-LPGATour .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPaneId = `${source}-feed-LPGATour`;
        const targetPane = document.getElementById(targetPaneId);
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        const url = e.target.dataset.url;
        if (url) {
          fetchFeedLPGATour(url, targetPaneId);
        }
      }
    });

    const initialActiveTab = document.querySelector('#lpgatourtabs-LPGATour .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      const targetPaneId = `${source}-feed-LPGATour`;
      const url = initialActiveTab.dataset.url;
      fetchFeedLPGATour(url, targetPaneId);
    }
  }
});
</script>

		<script>
document.addEventListener('DOMContentLoaded', function() {
  const trackandfieldtabs = document.getElementById('trackandfieldtabs-TrackAndField');

  const feedMapTrackAndField = {
    headlines: "https://rss.app/feeds/wR4WbSpa3kRgWcdl.xml",
    breaking: "https://rss.app/feeds/VqavgJOoX0LKkfkb.xml"
  };

  function fetchFeedTrackAndField(url, contentPaneId) {
    const contentPane = document.getElementById(contentPaneId);
    if (!contentPane) return;
    contentPane.innerHTML = '<p>Loading...</p>';

    const proxyUrl = 'https://api.allorigins.win/raw?url=';
    const finalUrl = proxyUrl + encodeURIComponent(url);

    fetch(finalUrl)
      .then(r => r.text())
      .then(str => {
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(str, "text/xml");
        const items = xmlDoc.querySelectorAll("item");
        let html = '<ul>';
        items.forEach(el => {
          const title = el.querySelector("title")?.textContent || 'No title';
          const link = el.querySelector("link")?.textContent || '#';
          html += `
            <li>
              <a href="${link}" target="_blank">
                ${title}
              </a>
            </li>`;
        });
        html += '</ul>';
        contentPane.innerHTML = html;
      })
      .catch(err => {
        console.error("Error fetching RSS feed:", err);
        contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
      });
  }

  if (trackandfieldtabs) {
    trackandfieldtabs.addEventListener('click', function(e) {
      if (e.target.classList.contains('headlines-tab')) {
        document.querySelectorAll('#news-TrackAndField .news-feed-content')
          .forEach(p => p.style.display = 'none');
        document.querySelectorAll('#trackandfieldtabs-TrackAndField .headlines-tab')
          .forEach(t => t.classList.remove('active'));

        const source = e.target.dataset.source;
        const targetPaneId = `${source}-feed-TrackAndField`;
        const targetPane = document.getElementById(targetPaneId);
        if (targetPane) {
          targetPane.style.display = 'block';
          e.target.classList.add('active');
        }
        const url = e.target.dataset.url;
        if (url) {
          fetchFeedTrackAndField(url, targetPaneId);
        }
      }
    });

    const initialActiveTab = document.querySelector('#trackandfieldtabs-TrackAndField .headlines-tab.active');
    if (initialActiveTab) {
      const source = initialActiveTab.dataset.source;
      const targetPaneId = `${source}-feed-TrackAndField`;
      const url = initialActiveTab.dataset.url;
      fetchFeedTrackAndField(url, targetPaneId);
    }
  }
});
</script>

		<script>
document.addEventListener('DOMContentLoaded', function() {
    const contentPaneNCAASoftball = document.getElementById('breaking-content-NCAASoftball');
    const urlNCAASoftball = document.querySelector('#news-NCAASoftball .news-tab').dataset.url;

    function fetchFeedNCAASoftball(url, contentPane) {
        if (!contentPane) return;
        contentPane.innerHTML = '<p>Loading...</p>';
        const proxyUrl = 'https://api.allorigins.win/raw?url=';
        const finalUrl = proxyUrl + encodeURIComponent(url);
        fetch(finalUrl)
            .then(r => r.text())
            .then(str => {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(str, "text/xml");
                const items = xmlDoc.querySelectorAll("item");
                let html = '<ul>';
                items.forEach(el => {
                    const title = el.querySelector("title")?.textContent || 'No title';
                    const link = el.querySelector("link")?.textContent || '#';
                    html += `
                    <li>
                        <a href="${link}" target="_blank">
                            ${title}
                        </a>
                    </li>`;
                });
                html += '</ul>';
                contentPane.innerHTML = html;
            })
            .catch(err => {
                console.error("Error fetching RSS feed:", err);
                contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
            });
    }

    if (urlNCAASoftball && contentPaneNCAASoftball) {
        fetchFeedNCAASoftball(urlNCAASoftball, contentPaneNCAASoftball);
    }
});
</script>

		<script>
document.addEventListener('DOMContentLoaded', function() {
    const contentPaneNCAAW = document.getElementById('breaking-content-NCAAW');
    const urlNCAAW = document.querySelector('#news-NCAAW .news-tab').dataset.url;

    function fetchFeedNCAAW(url, contentPane) {
        if (!contentPane) return;
        contentPane.innerHTML = '<p>Loading...</p>';
        const proxyUrl = 'https://api.allorigins.win/raw?url=';
        const finalUrl = proxyUrl + encodeURIComponent(url);
        fetch(finalUrl)
            .then(r => r.text())
            .then(str => {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(str, "text/xml");
                const items = xmlDoc.querySelectorAll("item");
                let html = '<ul>';
                items.forEach(el => {
                    const title = el.querySelector("title")?.textContent || 'No title';
                    const link = el.querySelector("link")?.textContent || '#';
                    html += `
                    <li>
                        <a href="${link}" target="_blank">
                            ${title}
                        </a>
                    </li>`;
                });
                html += '</ul>';
                contentPane.innerHTML = html;
            })
            .catch(err => {
                console.error("Error fetching RSS feed:", err);
                contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
            });
    }

    if (urlNCAAW && contentPaneNCAAW) {
        fetchFeedNCAAW(urlNCAAW, contentPaneNCAAW);
    }
});
</script>

		<script>
document.addEventListener('DOMContentLoaded', function() {
    const contentPaneNCAABaseball = document.getElementById('breaking-content-NCAABaseball');
    const urlNCAABaseball = document.querySelector('#news-NCAABaseball .news-tab').dataset.url;

    function fetchFeedNCAABaseball(url, contentPane) {
        if (!contentPane) return;
        contentPane.innerHTML = '<p>Loading...</p>';
        const proxyUrl = 'https://api.allorigins.win/raw?url=';
        const finalUrl = proxyUrl + encodeURIComponent(url);
        fetch(finalUrl)
            .then(r => r.text())
            .then(str => {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(str, "text/xml");
                const items = xmlDoc.querySelectorAll("item");
                let html = '<ul>';
                items.forEach(el => {
                    const title = el.querySelector("title")?.textContent || 'No title';
                    const link = el.querySelector("link")?.textContent || '#';
                    html += `
                    <li>
                        <a href="${link}" target="_blank">
                            ${title}
                        </a>
                    </li>`;
                });
                html += '</ul>';
                contentPane.innerHTML = html;
            })
            .catch(err => {
                console.error("Error fetching RSS feed:", err);
                contentPane.innerHTML = `<p>Failed to load news. Please try again later.</p>`;
            });
    }

    if (urlNCAABaseball && contentPaneNCAABaseball) {
        fetchFeedNCAABaseball(urlNCAABaseball, contentPaneNCAABaseball);
    }
});
</script>
 
<!-- Videos Column JavaScript -->
<script>
// Videos RSS Feed Configuration
const VIDEOS_CONFIG = {
    // Single tab pages (just "Videos" header)
    singleTab: {
        'Home': '_S4vCO7EXWQbgfcVZ',
        'MLS': 'TTfWQ2SKVZMPKGD9',
        'NBA': '6TVMNSk3afZmhsLi',
        'LaLiga': 'dbiFC60cU9Yj94dT',
        'UFC': 'IlJbcKJuWHSyc7ZV',
        'Bundesliga': 'mPIKuLJkRaEWJJ5b',
        'FormulaOne': 'zKsXNd2g50iFJFdA',
        'NCAAM': 'ZMRalRpJHoqaJawG',
        'NCAAW': 'tSZRLZATzOZGyb02',
        'WNBA': 'al6x45CL8geoEccA',
        'Boxing': '_9vKUVdBIc1b9s6XI',
        'FACup': 'eETusreqvR3bo30j',
        'Tennis': '_NdxWHqMOZskfRRqd',
        'PremierLeague': 'lqRsEOc63yyGxmb1',
        'UEFAEuropaLeague': 'LuEqqJcBqxYDekLP',
        'UEFAConferenceLeague': 'blQJnM5CaqeYnasx',
        'LIVGolf': 'GeRvu9qsqnL2eJ93',
        'MotoGP': 'Q9fZUMXCK1a58Qx8',
        'UFC': 'IlJbcKJuWHSyc7ZV',
        'LPGATour': '7K2VhUphxvh3GPg9',
        'PGATour': 'Jt6EWwYgsSoteXE6',
        'NASCARCupSeries': '2dUaX0gxCaMUq1tn',
        'TrackAndField': 'mgPf2SFmqKywYMCA',
        'LigaMX': 'diq9IDhkm2VA44jI',
        'SerieA': 'inlvkId7SYqCfnec',
        'Ligue1': 'Yq808yRh1vipxkCz',
        'IndyCar': 'kyz4SCYCsuNDt3mC',
        'NWSL': 'j3Vmv9t0tUZurgOq',
        'UEFAChampionsLeague': 'VMoUhMONqIK5UmoT',
        'NCAABaseball': 'vSnjvx8lfhvdkJCI',
        'NCAASoftball': '0icHbpkIigOmSTpJ',
        'Soccer': '_zeLCah3ozvgMgS1t'
    },
    
    // Two tab pages ("Videos" header + "Highlights" and "All Videos" tabs)
    twoTabs: {
        'NFL': {
            highlights: 'Ak0PcjUx16rp7wSj',
            allVideos: 'vsvgWNVcJ1m95kd9'
        },
        'NCAAF': {
            highlights: '_UtSzOkumvAmcekwE',
            allVideos: '_fIhQHk7eKkZlafg4'
        },
        'MLB': {
            highlights: 'VTAPXtLpRtEGkfzO',
            allVideos: '0r7sMjvCjaspA2dD'
        },
        'NHL': {
            highlights: '6hslZAxd7onqWIfw',
            allVideos: 'Rj2KNuQXoY7IdWW8'
        }
        // Add more two-tab configurations as needed
    }
};

// Initialize Videos Column
function initializeVideosColumn(currentSection) {
    const videosColumn = document.getElementById('videos-column');
    const videosTabs = document.getElementById('videos-tabs');
    const videosContent = document.getElementById('videos-content');
    
    if (!videosColumn) return;
    
    // Check if current section has two tabs
    if (VIDEOS_CONFIG.twoTabs[currentSection]) {
        // Show tabs for two-tab configuration
        videosTabs.style.display = 'flex';
        loadVideosWithTabs(currentSection);
    } else if (VIDEOS_CONFIG.singleTab[currentSection]) {
        // Hide tabs for single-tab configuration
        videosTabs.style.display = 'none';
        loadSingleVideoFeed(currentSection);
    } else {
        // Default: hide tabs and show placeholder
        videosTabs.style.display = 'none';
        videosContent.innerHTML = '<div style="padding: 20px; color: #888; text-align: center;">No videos available for this section.</div>';
    }
}

// Load videos for single tab configuration
function loadSingleVideoFeed(section) {
    const widgetId = VIDEOS_CONFIG.singleTab[section];
    const videosContent = document.getElementById('dynamicVideosContent');
    
    if (!widgetId || !videosContent) return;
    
    displayRSSWidget(widgetId, videosContent);
}

// Load videos for two tab configuration
function loadVideosWithTabs(section) {
    const config = VIDEOS_CONFIG.twoTabs[section];
    if (!config) return;
    
    // Set up tab event listeners
    const highlightsTab = document.querySelector('.videos-tab[data-tab="highlights"]');
    const allVideosTab = document.querySelector('.videos-tab[data-tab="all-videos"]');
    
    // Customize tab labels for NHL, reset for others
    if (section === 'NHL') {
        if (highlightsTab) {
            highlightsTab.textContent = 'QUICK RECAPS';
        }
        if (allVideosTab) {
            allVideosTab.textContent = 'ALL VIDEOS';
        }
    } else {
        // Reset to default labels for other sections
        if (highlightsTab) {
            highlightsTab.textContent = 'HIGHLIGHTS';
        }
        if (allVideosTab) {
            allVideosTab.textContent = 'ALL VIDEOS';
        }
    }
    
    if (highlightsTab) {
        highlightsTab.addEventListener('click', () => {
            switchVideosTab('highlights');
            displayRSSWidget(config.highlights, document.getElementById('dynamicVideosContent'));
        });
    }
    
    if (allVideosTab) {
        allVideosTab.addEventListener('click', () => {
            switchVideosTab('all-videos');
            displayRSSWidget(config.allVideos, document.getElementById('dynamicVideosContent'));
        });
    }
    
    // Load highlights by default
    switchVideosTab('highlights');
    displayRSSWidget(config.highlights, document.getElementById('dynamicVideosContent'));
}

// Switch between video tabs
function switchVideosTab(activeTab) {
    const tabs = document.querySelectorAll('.videos-tab');
    tabs.forEach(tab => {
        tab.classList.remove('active');
        if (tab.dataset.tab === activeTab) {
            tab.classList.add('active');
        }
    });
}

// Display RSS.app widget
function displayRSSWidget(widgetId, container) {
    if (!widgetId || !container) return;
    
    container.innerHTML = '<rssapp-feed id="' + widgetId + '"></rssapp-feed>';
    
    // Only add the script tag once
    if (!document.querySelector('script[src="https://widget.rss.app/v1/feed.js"]')) {
        const script = document.createElement('script');
        script.src = 'https://widget.rss.app/v1/feed.js';
        script.type = 'text/javascript';
        script.async = true;
        document.head.appendChild(script);
    }
}

// Initialize videos when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Initialize with Home section by default
    initializeVideosColumn('Home');
    
    // Listen for section changes (when user clicks on different leagues)
    const menuItems = document.querySelectorAll('#menuList li[data-section]');
    menuItems.forEach(item => {
        item.addEventListener('click', function() {
            const section = this.dataset.section;
            initializeVideosColumn(section);
        });
    });
});


// Mobile Responsiveness JavaScript
document.addEventListener('DOMContentLoaded', function() {
    let currentMobileLeague = 'Home';
    
    // Mobile toolbar button handlers
    const mobileLeagueBtn = document.getElementById('mobile-league-btn');
    const mobileGamesBtn = document.getElementById('mobile-games-btn');
    const mobileNewsBtn = document.getElementById('mobile-news-btn');
    const mobileSocialBtn = document.getElementById('mobile-social-btn');
    const mobileVideosBtn = document.getElementById('mobile-videos-btn');
    const mobileLeagueMenu = document.getElementById('mobile-league-menu');
    const mobileLeagueList = document.getElementById('mobile-league-list');
    
    // Show specific column on mobile
    function showMobileColumn(columnType) {
        try {
            
            // Scroll to top when switching columns on mobile
            window.scrollTo(0, 0);
            
            // Hide all columns
            document.querySelectorAll('.column').forEach(col => {
                col.classList.remove('mobile-active');
            });
            
            // Show the appropriate column based on current league and column type
            if (columnType === 'games') {
                if (currentMobileLeague === 'Home') {
                    document.getElementById('games-column')?.classList.add('mobile-active');
                } else {
                    document.getElementById('league-specific-column')?.classList.add('mobile-active');
                }
            } else if (columnType === 'news') {
                document.querySelector('.column.news')?.classList.add('mobile-active');
            } else if (columnType === 'social') {
                document.querySelector('.column.social')?.classList.add('mobile-active');
            } else if (columnType === 'videos') {
                document.querySelector('.column.videos-column')?.classList.add('mobile-active');
            }
            
            // Update toolbar button states
            document.querySelectorAll('.mobile-toolbar-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`mobile-${columnType}-btn`)?.classList.add('active');
            
        } catch (error) {
            console.error('Error in showMobileColumn:', error);
        }
    }
    
    // Populate mobile league menu
    function populateMobileLeagueMenu() {
        if (!mobileLeagueList) return;
        
        mobileLeagueList.innerHTML = '';
        
        // Create mobile league list that matches desktop order exactly
        const mobileLeagues = [
            { section: 'Home', text: 'ALL' },
            { section: 'NFL', text: 'NFL' },
            { section: 'NBA', text: 'NBA' },
            { section: 'MLB', text: 'MLB' },
            { section: 'NHL', text: 'NHL' },
            { section: 'Soccer', text: 'Soccer' },
            { section: 'UEFAChampionsLeague', text: '    UEFA Champions League', indent: true },
            { section: 'PremierLeague', text: '    Premier League', indent: true },
            { section: 'MLS', text: '    MLS', indent: true },
            { section: 'LaLiga', text: '    LaLiga', indent: true },
            { section: 'SerieA', text: '    Serie A', indent: true },
            { section: 'Bundesliga', text: '    Bundesliga', indent: true },
            { section: 'FACup', text: '    FA Cup', indent: true },
            { section: 'LigaMX', text: '    Liga MX', indent: true },
            { section: 'NWSL', text: '    NWSL', indent: true },
            { section: 'Ligue1', text: '    Ligue 1', indent: true },
            { section: 'UEFAEuropaLeague', text: '    UEFA Europa League', indent: true },
            { section: 'UEFAConferenceLeague', text: '    UEFA Conference League', indent: true },
            { section: 'FormulaOne', text: 'Formula One' },
            { section: 'NCAAF', text: 'NCAAF' },
            { section: 'PGATour', text: 'PGA Tour' },
            { section: 'UFC', text: 'UFC' },
            { section: 'Boxing', text: 'Boxing' },
            { section: 'NASCARCupSeries', text: 'NASCAR Cup Series' },
            { section: 'Tennis', text: 'Tennis' },
            { section: 'WNBA', text: 'WNBA' },
            { section: 'LIVGolf', text: 'LIV Golf' },
            { section: 'IndyCar', text: 'IndyCar' },
            { section: 'NCAAM', text: 'NCAAM' },
            { section: 'NCAAW', text: 'NCAAW' },
            { section: 'NCAABaseball', text: 'NCAA Baseball' },
            { section: 'NCAASoftball', text: 'NCAA Softball' },
            { section: 'MotoGP', text: 'MotoGP' },
            { section: 'LPGATour', text: 'LPGA Tour' },
            { section: 'TrackAndField', text: 'Track & Field' }
        ];
        
        mobileLeagues.forEach(league => {
            const li = document.createElement('li');
            li.textContent = league.text;
            li.dataset.section = league.section;
            li.addEventListener('click', () => {
                selectMobileLeague(league.section, league.text);
            });
            mobileLeagueList.appendChild(li);
        });
    }
    
    // Select league on mobile - use desktop functionality exactly
    function selectMobileLeague(section, displayName) {
        try {
            currentMobileLeague = section;
            
            // Scroll to top when switching leagues on mobile
            window.scrollTo(0, 0);
            
            // Update league button text
            if (mobileLeagueBtn) {
                const span = mobileLeagueBtn.querySelector('span:first-child');
                if (span) {
                    span.textContent = displayName;
                }
            }
            
            // Use the exact same logic as desktop by simulating a click on the desktop menu item
            const desktopMenuItem = document.querySelector(`#menuList-123 li[data-section="${section}"]`);
            if (desktopMenuItem) {
                // Temporarily remove mobile-active classes to prevent conflicts
                document.querySelectorAll('.column').forEach(col => col.classList.remove('mobile-active'));
                // Trigger the desktop click handler
                desktopMenuItem.click();
            }
            
            // Close menu and show news column
            if (mobileLeagueMenu) {
                mobileLeagueMenu.style.display = 'none';
            }
            showMobileColumn('news');
            
            
        } catch (error) {
            console.error('Error in mobile league selection:', error);
        }
    }
    
    // Event listeners
    if (mobileLeagueBtn) {
        mobileLeagueBtn.addEventListener('click', () => {
            mobileLeagueMenu.style.display = 'block';
        });
    }
    
    if (mobileGamesBtn) {
        mobileGamesBtn.addEventListener('click', () => showMobileColumn('games'));
    }
    
    if (mobileNewsBtn) {
        mobileNewsBtn.addEventListener('click', () => showMobileColumn('news'));
    }
    
    if (mobileSocialBtn) {
        mobileSocialBtn.addEventListener('click', () => showMobileColumn('social'));
    }
    
    if (mobileVideosBtn) {
        mobileVideosBtn.addEventListener('click', () => showMobileColumn('videos'));
    }
    
    // Close mobile league menu
    const closeBtn = mobileLeagueMenu?.querySelector('.close-btn');
    if (closeBtn) {
        closeBtn.addEventListener('click', () => {
            mobileLeagueMenu.style.display = 'none';
        });
    }
    
    // Close menu when clicking outside
    if (mobileLeagueMenu) {
        mobileLeagueMenu.addEventListener('click', (e) => {
            if (e.target === mobileLeagueMenu) {
                mobileLeagueMenu.style.display = 'none';
            }
        });
    }
    
    // Initialize mobile interface
    populateMobileLeagueMenu();
    
    // Show news column by default on mobile - more robust check
    function initializeMobileContent() {
        const toolbar = document.getElementById('mobile-bottom-toolbar');
        const isToolbarVisible = toolbar && window.getComputedStyle(toolbar).display !== 'none';
        
        if (isToolbarVisible) {
            showMobileColumn('news');
        }
    }
    
    // Check immediately
    initializeMobileContent();
    
    // Also check after delays in case CSS is still loading
    setTimeout(initializeMobileContent, 100);
    setTimeout(initializeMobileContent, 500);
    
    // Add resize listener to handle window resizing
    window.addEventListener('resize', () => {
        setTimeout(initializeMobileContent, 50);
    });
});

// Standings tab functions
function showNFLTab(conference) {
    console.log('showNFLTab called with conference:', conference);
    document.getElementById('nfl-afc-content').classList.remove('active');
    document.getElementById('nfl-nfc-content').classList.remove('active');
    document.getElementById('nfl-afc-tab').classList.remove('active');
    document.getElementById('nfl-nfc-tab').classList.remove('active');
    
    document.getElementById('nfl-' + conference + '-content').classList.add('active');
    document.getElementById('nfl-' + conference + '-tab').classList.add('active');
    console.log('Tab switching completed');
}

function showMLBTab(league) {
    document.getElementById('mlb-al-content').classList.remove('active');
    document.getElementById('mlb-nl-content').classList.remove('active');
    document.getElementById('mlb-al-tab').classList.remove('active');
    document.getElementById('mlb-nl-tab').classList.remove('active');
    
    document.getElementById('mlb-' + league + '-content').classList.add('active');
    document.getElementById('mlb-' + league + '-tab').classList.add('active');
}

function showNBATab(conference) {
    document.getElementById('nba-east-content').classList.remove('active');
    document.getElementById('nba-west-content').classList.remove('active');
    document.getElementById('nba-east-tab').classList.remove('active');
    document.getElementById('nba-west-tab').classList.remove('active');
    
    document.getElementById('nba-' + conference + '-content').classList.add('active');
    document.getElementById('nba-' + conference + '-tab').classList.add('active');
}

function showNHLTab(conference) {
    document.getElementById('nhl-east-content').classList.remove('active');
    document.getElementById('nhl-west-content').classList.remove('active');
    document.getElementById('nhl-east-tab').classList.remove('active');
    document.getElementById('nhl-west-tab').classList.remove('active');
    
    document.getElementById('nhl-' + conference + '-content').classList.add('active');
    document.getElementById('nhl-' + conference + '-tab').classList.add('active');
}

</script>
 
  </body>
</html>
